/*!
 * messenger
 * @version: 2.11.7
 * @license: Genesys Cloud Services, Inc.
 */
(("undefined"!=typeof self?self:this).webpackJsonp_Messenger=("undefined"!=typeof self?self:this).webpackJsonp_Messenger||[]).push([[35],{174:function(e,t,n){var r=n(448),o=n(449),a=n(73),i=n(450);e.exports=function(e){return r(e)||o(e)||a(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},448:function(e,t,n){var r=n(74);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},449:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},450:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},674:function(e,t,n){e.exports=n(364)(1)},676:function(e,t,n){e.exports=n(364)(0)},677:function(e,t,n){var r=n(213),o=n(685);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};r(o,a);e.exports=o.locals||{}},678:function(e,t,n){"use strict";e.exports=n(679)},679:function(e,t,n){"use strict";
/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=60103,o=60106,a=60107,i=60108,s=60114,c=60109,l=60110,u=60112,d=60113,p=60120,g=60115,m=60116,f=60121,h=60122,b=60117,v=60129,y=60131;if("function"==typeof Symbol&&Symbol.for){var w=Symbol.for;r=w("react.element"),o=w("react.portal"),a=w("react.fragment"),i=w("react.strict_mode"),s=w("react.profiler"),c=w("react.provider"),l=w("react.context"),u=w("react.forward_ref"),d=w("react.suspense"),p=w("react.suspense_list"),g=w("react.memo"),m=w("react.lazy"),f=w("react.block"),h=w("react.server.block"),b=w("react.fundamental"),v=w("react.debug_trace_mode"),y=w("react.legacy_hidden")}function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case i:case d:case p:return e;default:switch(e=e&&e.$$typeof){case l:case u:case m:case g:case c:return e;default:return t}}case o:return t}}}var S=c,O=r,C=u,E=a,k=m,T=g,R=o,j=s,D=i,P=d;t.ContextConsumer=l,t.ContextProvider=S,t.Element=O,t.ForwardRef=C,t.Fragment=E,t.Lazy=k,t.Memo=T,t.Portal=R,t.Profiler=j,t.StrictMode=D,t.Suspense=P,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return x(e)===l},t.isContextProvider=function(e){return x(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===u},t.isFragment=function(e){return x(e)===a},t.isLazy=function(e){return x(e)===m},t.isMemo=function(e){return x(e)===g},t.isPortal=function(e){return x(e)===o},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===i},t.isSuspense=function(e){return x(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===s||e===v||e===i||e===d||e===p||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===c||e.$$typeof===l||e.$$typeof===u||e.$$typeof===b||e.$$typeof===f||e[0]===h)},t.typeOf=x},680:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isImmutable,n=void 0===t?a.default:t,s=e.ignore,u=i.default.bind(null,n,s);return function(e){var t=e.getState,n=t(),a=u(n),i=void 0;return function(e){return function(s){n=t(),i=a.detectMutations(),a=u(n),(0,r.default)(!i.wasMutated,c,(i.path||[]).join("."));var d=e(s);return n=t(),i=a.detectMutations(),a=u(n),i.wasMutated&&(0,r.default)(!i.wasMutated,l,(i.path||[]).join("."),(0,o.default)(s)),d}}}};var r=s(n(681)),o=s(n(682)),a=s(n(683)),i=s(n(684));function s(e){return e&&e.__esModule?e:{default:e}}var c=["A state mutation was detected between dispatches, in the path `%s`.","This may cause incorrect behavior.","(http://redux.js.org/docs/Troubleshooting.html#never-mutate-reducer-arguments)"].join(" "),l=["A state mutation was detected inside a dispatch, in the path: `%s`.","Take a look at the reducer(s) handling the action %s.","(http://redux.js.org/docs/Troubleshooting.html#never-mutate-reducer-arguments)"].join(" ")},681:function(e,t,n){"use strict";e.exports=function(e,t,n,r,o,a,i,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,i,s],u=0;(c=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},682:function(e,t){function n(e,t){var n=[],r=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(t)).join(".")+"]"}),function(o,a){if(n.length>0){var i=n.indexOf(this);~i?n.splice(i+1):n.push(this),~i?r.splice(i,1/0,o):r.push(o),~n.indexOf(a)&&(a=t.call(this,o,a))}else n.push(a);return null==e?a:e.call(this,o,a)}}(e.exports=function(e,t,r,o){return JSON.stringify(e,n(t,o),r)}).getSerialize=n},683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){return"object"!==(void 0===e?"undefined":r(e))||null==e}},684:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a={value:n};if(!e(n))for(var i in a.children={},n){var s=o.concat(i);t.length&&-1!==t.indexOf(s.join("."))||(a.children[i]=r(e,t,n[i],s))}return a}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],r=arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=n?n.value:void 0,c=s===r;if(a&&!c&&!Number.isNaN(r))return{wasMutated:!0,path:i};if(e(s)||e(r))return{wasMutated:!1};var l={};Object.keys(n.children).forEach((function(e){l[e]=!0})),Object.keys(r).forEach((function(e){l[e]=!0}));for(var u=Object.keys(l),d=0;d<u.length;d++){var p=u[d],g=i.concat(p);if(!t.length||-1===t.indexOf(g.join("."))){var m=o(e,t,n.children[p],r[p],c,g);if(m.wasMutated)return m}}return{wasMutated:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=r(e,t,n);return{detectMutations:function(){return o(e,t,a,n)}}}},685:function(e,t,n){(t=n(214)(!1)).push([e.i,".mxg-conversation{height:100%;border-radius:0px}.mxg-conversation .mxg-conversation-container{background-color:inherit}.mxg-conversation .mxg-conversation-container .mxg-input-container{position:absolute;bottom:0px;left:0px;width:100%;overflow-y:auto;height:auto;max-height:40%;background-color:inherit;z-index:1}.mxg-conversation .mxg-conversation-container .mxg-input-container .mxg-send-icon{float:right}.mxg-conversation .mxg-conversation-container .mxg-transcript a{color:inherit}.mxg-typing-indicator-dot{height:6px;width:6px;border-radius:100%;display:inline-block;margin:1px;animation:1.5s typing-dot ease-in-out infinite;animation-delay:calc(var(--animation-order)*150ms)}@keyframes typing-dot{15%{transform:translateY(-35%);opacity:.5}30%{transform:translateY(0%);opacity:1}}",""]),e.exports=t},686:function(e,t,n){var r=n(213),o=n(687);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};r(o,a);e.exports=o.locals||{}},687:function(e,t,n){(t=n(214)(!1)).push([e.i,".mxg-home .mxg-home-card h2{font-size:1.1rem}",""]),e.exports=t},688:function(e,t){},689:function(e,t,n){"use strict";n.r(t);var r=n(27),o=n.n(r),a=n(28),i=n.n(a),s=n(40),c=n.n(s),l=n(32),u=n.n(l),d=n(34),p=n.n(d),g=n(8),m=n.n(g),f=n(0),h=n.n(f),b=n(6),v=n.n(b),y=h.a.createContext(null);var w=function(e){e()},x=function(){return w};var S={notify:function(){},get:function(){return[]}};function O(e,t){var n,r=S;function o(){i.onStateChange&&i.onStateChange()}function a(){var a,i,s;n||(n=t?t.addNestedSub(o):e.subscribe(o),a=x(),i=null,s=null,r={clear:function(){i=null,s=null},notify:function(){a((function(){for(var e=i;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],t=i;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,n=s={callback:e,next:null,prev:s};return n.prev?n.prev.next=n:i=n,function(){t&&null!==i&&(t=!1,n.next?n.next.prev=n.prev:s=n.prev,n.prev?n.prev.next=n.next:i=n.next)}}})}var i={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=S)},getListeners:function(){return r}};return i}var C="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?f.useLayoutEffect:f.useEffect;var E=function(e){var t=e.store,n=e.context,r=e.children,o=Object(f.useMemo)((function(){var e=O(t);return{store:t,subscription:e}}),[t]),a=Object(f.useMemo)((function(){return t.getState()}),[t]);C((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,a]);var i=n||y;return h.a.createElement(i.Provider,{value:o},r)},k=n(1),T=n(5),R=n(82),j=n.n(R),D=n(678),P=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],I=["reactReduxForwardedRef"],M=[],A=[null,null];function N(e,t){var n=e[1];return[t.payload,n+1]}function F(e,t,n){C((function(){return e.apply(void 0,t)}),n)}function L(e,t,n,r,o,a,i){e.current=r,t.current=o,n.current=!1,a.current&&(a.current=null,i())}function B(e,t,n,r,o,a,i,s,c,l){if(e){var u=!1,d=null,p=function(){if(!u){var e,n,p=t.getState();try{e=r(p,o.current)}catch(e){n=e,d=e}n||(d=null),e===a.current?i.current||c():(a.current=e,s.current=e,i.current=!0,l({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=p,n.trySubscribe(),p();return function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var H=function(){return[null,0]};function K(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,o=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,a=n.methodName,i=void 0===a?"connectAdvanced":a,s=n.renderCountProp,c=void 0===s?void 0:s,l=n.shouldHandleStateChanges,u=void 0===l||l,d=n.storeKey,p=void 0===d?"store":d,g=(n.withRef,n.forwardRef),m=void 0!==g&&g,b=n.context,v=void 0===b?y:b,w=Object(T.a)(n,P),x=v;return function(t){var n=t.displayName||t.name||"Component",r=o(n),a=Object(k.a)({},w,{getDisplayName:o,methodName:i,renderCountProp:c,shouldHandleStateChanges:u,storeKey:p,displayName:r,wrappedComponentName:n,WrappedComponent:t}),s=w.pure;var l=s?f.useMemo:function(e){return e()};function d(n){var r=Object(f.useMemo)((function(){var e=n.reactReduxForwardedRef,t=Object(T.a)(n,I);return[n.context,e,t]}),[n]),o=r[0],i=r[1],s=r[2],c=Object(f.useMemo)((function(){return o&&o.Consumer&&Object(D.isContextConsumer)(h.a.createElement(o.Consumer,null))?o:x}),[o,x]),d=Object(f.useContext)(c),p=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(d)&&Boolean(d.store);var g=p?n.store:d.store,m=Object(f.useMemo)((function(){return function(t){return e(t.dispatch,a)}(g)}),[g]),b=Object(f.useMemo)((function(){if(!u)return A;var e=O(g,p?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[g,p,d]),v=b[0],y=b[1],w=Object(f.useMemo)((function(){return p?d:Object(k.a)({},d,{subscription:v})}),[p,d,v]),S=Object(f.useReducer)(N,M,H),C=S[0][0],E=S[1];if(C&&C.error)throw C.error;var R=Object(f.useRef)(),j=Object(f.useRef)(s),P=Object(f.useRef)(),K=Object(f.useRef)(!1),z=l((function(){return P.current&&s===j.current?P.current:m(g.getState(),s)}),[g,C,s]);F(L,[j,R,K,s,z,P,y]),F(B,[u,g,v,m,j,R,K,P,y,E],[g,v,m]);var U=Object(f.useMemo)((function(){return h.a.createElement(t,Object(k.a)({},z,{ref:i}))}),[i,t,z]);return Object(f.useMemo)((function(){return u?h.a.createElement(c.Provider,{value:w},U):U}),[c,U,w])}var g=s?h.a.memo(d):d;if(g.WrappedComponent=t,g.displayName=d.displayName=r,m){var b=h.a.forwardRef((function(e,t){return h.a.createElement(g,Object(k.a)({},e,{reactReduxForwardedRef:t}))}));return b.displayName=r,b.WrappedComponent=t,j()(b,t)}return j()(g,t)}}function z(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function U(e,t){if(z(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!z(e[n[o]],t[n[o]]))return!1;return!0}function q(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function V(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function W(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=V(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=V(o),o=r(t,n)),o},r}}var _=[function(e){return"function"==typeof e?W(e):void 0},function(e){return e?void 0:q((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?q((function(t){return function(e,t){var n={},r=function(r){var o=e[r];"function"==typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)r(o);return n}(e,t)})):void 0}];var G=[function(e){return"function"==typeof e?W(e):void 0},function(e){return e?void 0:q((function(){return{}}))}];function Y(e,t,n){return Object(k.a)({},n,e,t)}var $=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,a=n.areMergedPropsEqual,i=!1;return function(t,n,s){var c=e(t,n,s);return i?o&&a(c,r)||(r=c):(i=!0,r=c),r}}}(e):void 0},function(e){return e?void 0:function(){return Y}}];var J=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Q(e,t,n,r){return function(o,a){return n(e(o,a),t(r,a),a)}}function X(e,t,n,r,o){var a,i,s,c,l,u=o.areStatesEqual,d=o.areOwnPropsEqual,p=o.areStatePropsEqual,g=!1;function m(o,g){var m,f,h=!d(g,i),b=!u(o,a,g,i);return a=o,i=g,h&&b?(s=e(a,i),t.dependsOnOwnProps&&(c=t(r,i)),l=n(s,c,i)):h?(e.dependsOnOwnProps&&(s=e(a,i)),t.dependsOnOwnProps&&(c=t(r,i)),l=n(s,c,i)):b?(m=e(a,i),f=!p(m,s),s=m,f&&(l=n(s,c,i)),l):l}return function(o,u){return g?m(o,u):(s=e(a=o,i=u),c=t(r,i),l=n(s,c,i),g=!0,l)}}function Z(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,a=Object(T.a)(t,J),i=n(e,a),s=r(e,a),c=o(e,a);return(a.pure?X:Q)(i,s,c,e,a)}var ee=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function te(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function ne(e,t){return e===t}function re(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?K:n,o=t.mapStateToPropsFactories,a=void 0===o?G:o,i=t.mapDispatchToPropsFactories,s=void 0===i?_:i,c=t.mergePropsFactories,l=void 0===c?$:c,u=t.selectorFactory,d=void 0===u?Z:u;return function(e,t,n,o){void 0===o&&(o={});var i=o,c=i.pure,u=void 0===c||c,p=i.areStatesEqual,g=void 0===p?ne:p,m=i.areOwnPropsEqual,f=void 0===m?U:m,h=i.areStatePropsEqual,b=void 0===h?U:h,v=i.areMergedPropsEqual,y=void 0===v?U:v,w=Object(T.a)(i,ee),x=te(e,a,"mapStateToProps"),S=te(t,s,"mapDispatchToProps"),O=te(n,l,"mergeProps");return r(d,Object(k.a)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:x,initMapDispatchToProps:S,initMergeProps:O,pure:u,areStatesEqual:g,areOwnPropsEqual:f,areStatePropsEqual:b,areMergedPropsEqual:y},w))}}var oe=re();var ae,ie=n(42);function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}ae=ie.unstable_batchedUpdates,w=ae;var de="function"==typeof Symbol&&Symbol.observable||"@@observable",pe=function(){return Math.random().toString(36).substring(7).split("").join(".")},ge={INIT:"@@redux/INIT"+pe(),REPLACE:"@@redux/REPLACE"+pe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+pe()}};function me(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function fe(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(ue(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(ue(1));return n(fe)(e,t)}if("function"!=typeof e)throw new Error(ue(2));var o=e,a=t,i=[],s=i,c=!1;function l(){s===i&&(s=i.slice())}function u(){if(c)throw new Error(ue(3));return a}function d(e){if("function"!=typeof e)throw new Error(ue(4));if(c)throw new Error(ue(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw new Error(ue(6));t=!1,l();var n=s.indexOf(e);s.splice(n,1),i=null}}}function p(e){if(!me(e))throw new Error(ue(7));if(void 0===e.type)throw new Error(ue(8));if(c)throw new Error(ue(9));try{c=!0,a=o(a,e)}finally{c=!1}for(var t=i=s,n=0;n<t.length;n++){(0,t[n])()}return e}return p({type:ge.INIT}),(r={dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(ue(10));o=e,p({type:ge.REPLACE})}})[de]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(ue(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[de]=function(){return this},e},r}function he(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var be=n(174),ve=n.n(be),ye={route:"conversations.home",routeStack:["conversations.home"],messages:[]};function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se={},Oe={},Ce="";function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye||{},t=arguments.length>1?arguments[1]:void 0,n=ve()(e.routeStack);switch(1==n.length&&Object.keys(Se)&&Object.keys(Se).length>1&&(n=ve()(Se.routeStack)),t.type){case"CONFIRM_CHAT":return-1===n.indexOf(t.route)&&n.push(t.route),Object.assign({},e,{route:t.route,routeStack:n,documentId:""});case"OPEN_CONVERSATIONS":return-1===(n=n.filter((function(e){return-1!==e.indexOf("conversations.home")}))).indexOf(t.route)&&n.push(t.route),Se=Object.assign({},Se,{route:t.route,routeStack:n,categoryData:{},cobrowseConnectStatus:Ce}),Object.assign({},e,{route:t.route,routeStack:n,categoryData:{},documentId:"",cobrowseConnectStatus:Ce});case"COBROWSE_CONNECT_STATUS":return Ce=t.cobrowseConnectStatus||"",Object.assign({},e,{cobrowseConnectStatus:Ce});case"OPEN_COBROWSE_CONNECT":return-1===(n=n.filter((function(e){return-1!==e.indexOf("conversations.home")}))).indexOf(t.route)&&n.push(t.route),Se=Object.assign({},Se,{route:t.route,routeStack:n,categoryData:{}}),Object.assign({},e,{route:t.route,routeStack:n,categoryData:{},documentId:""});case"COBROWSE_SHARE":return-1===(n=n.filter((function(e){return-1!==e.indexOf("conversations.home")}))).indexOf(t.route)&&n.push(t.route),Ce=t.cobrowseConnectStatus||"",Se=Object.assign({},Se,{route:t.route,routeStack:n,categoryData:{},cobrowseConnectStatus:Ce}),Object.assign({},e,{route:t.route,routeStack:n,categoryData:{},documentId:"",cobrowseConnectStatus:Ce});case"OPEN_KNOWLEDGE_ARTICLE":return-1===n.indexOf(t.route)&&n.push(t.route),Se=Object.assign({},Se,{route:t.route,routeStack:n,documentId:t.documentId,cobrowseConnectStatus:Ce}),Object.assign({},e,{route:t.route,routeStack:n,documentId:t.documentId,cobrowseConnectStatus:Ce});case"OPEN_PREVIEW":return-1===n.indexOf(t.route)&&n.push(t.route),Se=Object.assign({},Se,{route:t.route,routeStack:n,file:t.file}),Object.assign({},e,{route:t.route,routeStack:n,file:t.file});case"OPEN_KNOWLEDGE_ARTICLE_DIRECT":return-1===n.indexOf(t.route)&&(-1===n.indexOf("knowledge.search")?n.push("knowledge.search",t.route):n.push(t.route)),Object.assign({},e,{route:t.route,routeStack:n,documentId:t.documentId});case"OPEN_KNOWLEDGE_SEARCH":return-1===(n=n.filter((function(e){return-1!==e.indexOf("conversations.home")}))).indexOf(t.route)&&n.push(t.route),Se=Object.assign({},Se,{route:t.route,routeStack:n,categoryData:{},documentId:"",cobrowseConnectStatus:Ce}),Object.assign({},e,{route:t.route,routeStack:n,categoryData:{},documentId:"",categoryId:"",cobrowseConnectStatus:Ce});case"OPEN_KNOWLEDGE_CATEGORY":var r=t.route.split(".")[2];return n.push(t.route),Oe=Object.assign({},Oe,m()({},r,t.categoryData)),Se=Object.assign({},Se,{route:t.route,routeStack:n,categoryData:Oe,categoryId:"",documentId:"",cobrowseConnectStatus:Ce}),Object.assign({},e,{route:t.route,routeStack:n,categoryData:Oe,categoryId:"",documentId:"",cobrowseConnectStatus:Ce});case"RESET_CATEGORIES":return n=n.filter((function(e){return-1===e.indexOf("knowledge.category")})),Object.assign({},e,{route:"knowledge.search",routeStack:n,categoryData:{},categoryId:"",documentId:"",cobrowseConnectStatus:Ce});case"NAVIGATE_TO_HOME":return n=n.filter((function(e){return-1!==e.indexOf("conversations.home")})),t.cobrowseConnectStatus&&(Ce=t.cobrowseConnectStatus),Se=Object.assign({},Se,{route:n[n.length-1],routeStack:n,categoryData:{},documentId:"",cobrowseConnectStatus:Ce}),Object.assign({},e,{route:"conversations.home",routeStack:n,categoryId:"",documentId:"",cobrowseConnectStatus:Ce});case"NAVIGATE_BACK":return n.pop(),Se=Object.assign({},Se,{route:n[n.length-1],routeStack:n,documentId:"",cobrowseConnectStatus:Ce,file:""}),Object.assign({},e,{route:n[n.length-1],routeStack:n,documentId:"",cobrowseConnectStatus:Ce,file:""});case"OPEN-WITH-STORE":return Object.assign({},e,xe(xe({},e),Se));case"CLOSED":return Se=e,e;default:return e}}var ke=n(94);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je={status:"pending",connection:"",connectionStatus:"",sendingMessage:!1,error:"",messages:[],allowedMediaPresence:!1,allowedFileTypes:[],maxFileSizeInKB:"",bImageOnlyFileType:!1,typingNotification:{},messageOutofOrderIndex:"",files:{removed:{}},viewFiles:{},resetSession:!1,readOnly:!1,capabilities:{enableSend:!1},userTyping:!1,bRestoring:!1,newSession:"",messengerCleared:!1},De=5,Pe=!1,Ie={inbound:{fileTypes:[{type:"image/jpeg"},{type:"image/gif"},{type:"image/png"}],maxFileSizeKB:10240}},Me={},Ae=!0;function Ne(e,t){var n=t.data||{},r=n.messageType,o=n.timestamp,a=(e||{}).messages,i=Fe(e,t),s=i.messages,c=i.sendingMessage,l="",u=s;if(a&&a.length&&r&&"outbound"===r){var d=a[0]&&a[0].timestamp;if(new Date(o)<new Date(d)){var p=u.splice(0,De);p.sort((function(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()})),u=p.concat(u),p.every((function(t,n){var r=e.messages[n]?e.messages[n].timestamp:"";return!r||t.timestamp==r||(l=n,!1)}))}}return Object.assign({},e,Re(Re({},e),{},{sendingMessage:c,previousStatus:e.status,status:"connected",message:t.data,messages:u,error:"",typingNotification:{},messageOutofOrderIndex:l}))}function Fe(e,t){var n=(t.data||{}).tracingId,r=(e||{}).messages,o=!1,a=JSON.parse(JSON.stringify(r));if(n&&Object(ke.a)(a,"tracingId",n)){var i=a.findIndex((function(e){return e.tracingId===n}));a.splice(i,1),a=[Re(Re({},t.data),{},{deliveryStatus:"sent"})].concat(ve()(a.map((function(e){return Object.assign({},e)})))),o="sent"}else a=[t.data].concat(ve()(a.map((function(e){return Object.assign({},e)}))));return{messages:a,sendingMessage:o}}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re({},je),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECTING":return Object.assign({},e,Re(Re({},e),{},{resetSession:!1,readOnly:e.readOnly,previousStatus:e.status,status:"connecting",userTyping:!1,error:"",messageOutofOrderIndex:""}));case"RECONNECTING":return Object.assign({},e,Re(Re({},e),{},{resetSession:!1,readOnly:e.readOnly,previousStatus:e.status,status:"reconnecting",userTyping:!1,error:"",messageOutofOrderIndex:""}));case"CONNECTED":var n=(t.data||{}).newSession;return Object.assign({},e,Re(Re({},e),{},{resetSession:!1,readOnly:e.readOnly,connection:"opened",previousStatus:e.status,status:"connected",bRestoring:!1,sendingMessage:!1,error:"",userTyping:!1,connectionStatus:"online",messageOutofOrderIndex:"",newSession:n||""}));case"READYTOSEND":return Object.assign({},e,Re(Re({},e),{},{capabilities:{enableSend:!0},userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"RESTORING":return Object.assign({},e,Re(Re({},e),{},{resetSession:!1,readOnly:e.readOnly,previousStatus:e.status,status:"restoring",bRestoring:!0,userTyping:!1,error:"",messageOutofOrderIndex:""}));case"RESTORED":return Object.assign({},e,Re(Re(Re({},e),{},{previousStatus:e.status,status:"restored",bRestoring:!1,messages:t.data.messages,sendingMessage:!1,error:"",userTyping:!1},t.data),{},{messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"REOPEN":var r=[].concat(ve()(t.data.messages),ve()(e.messages.map((function(e){return Object.assign({},e)})))),o=new Set,a=r.filter((function(e){return!o.has(e.timestamp)&&(o.add(e.timestamp),!0)}),o);return Object.assign({},e,Re(Re(Re({},e),{},{previousStatus:e.status,status:"restored",bRestoring:!1,connection:"opened"},t.data),{},{messages:a,sendingMessage:!1,userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"FETCHINGHISTORY":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"fetchingHistory",userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"HISTORYFETCHED":return Object.assign({},e,Re(Re(Re({},e),{},{prevStatus:e.status,status:"historyFetched"},t.data),{},{messages:[].concat(ve()(e.messages.map((function(e){return Object.assign({},e)}))),ve()(t.data.messages)),sendingMessage:!1,userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"HISTORYCOMPLETE":return Object.assign({},e,Re(Re(Re({},e),{},{prevStatus:e.status,status:"historyComplete"},t.data),{},{messages:ve()(e.messages.map((function(e){return Object.assign({},e)}))),sendingMessage:!1,userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"SENDING":return Object.assign({},e,{sendingMessage:"sending",error:"",typingNotification:{},userTyping:!1,messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly});case"SENDINGTEXTBACK":return Object.assign({},e,{sendingMessage:"sending",error:"",typingNotification:{},userTyping:!1});case"SENDINGMESSAGE":var i=(new Date).toISOString();return Object.assign({},e,{sendingMessage:"sending",error:"",messages:[Re(Re({},t.data),{},{files:e.files.type?[Re({},e.files)]:[],id:t.data.metadata.id?t.data.metadata.id:"",deliveryStatus:"sending",tracingId:t.data.tracingId,messageType:"inbound",originatingEntity:"",timestamp:i,type:t.data.type?t.data.type.toLowerCase():""})].concat(ve()(e.messages.map((function(e){return Object.assign({},e)})))),files:{removed:e.files.removed},typingNotification:{},userTyping:!1});case"ADDMESSAGES":return e&&"closed"===e.status?Me=Object.assign({},e,Re(Re({},e),{},{files:Re(Re({},e.files),t.data.files),sendingMessage:!1,messages:[].concat(ve()(t.data),ve()(e.messages.map((function(e){return Object.assign({},e)})))),userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly})):Object.assign({},e,Re(Re({},e),{},{sendingMessage:!1,files:Re(Re({},e.files),t.data.files),messages:[].concat(ve()(t.data),ve()(e.messages.map((function(e){return Object.assign({},e)})))),userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"RECEIVED":if(e&&("closed"===e.status||"closed"===e.prevStatus&&"disconnected"===e.status||"disconnected"===e.status)){if(Ae){var s=Ne(e,t);return Me=Object.assign({},s,Re(Re({},s),{},{prevStatus:e.status,status:"closed"}))}var c=Fe(e,t),l=c.messages,u=c.sendingMessage;return Me=Object.assign({},e,Re(Re({},e),{},{prevStatus:e.status,status:"closed",sendingMessage:u,message:t.data,messages:l,error:"",typingNotification:{},messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}))}if(Ae)return Ne(e,t);var d=Fe(e,t),p=d.messages,g=d.sendingMessage;return Object.assign({},e,Re(Re({},e),{},{sendingMessage:g,previousStatus:e.status,status:"connected",message:t.data,messages:p,error:"",typingNotification:{},messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"USERTYPING":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,userTyping:!0,messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"RECEIVEDTYPING":return e&&"closed"===e.status?Me=Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,sendingMessage:!1,status:"closed",typingNotification:t.data,userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly})):Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,sendingMessage:!1,status:"receivedTyping",typingNotification:t.data,userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"RESETTYPING":return e&&"closed"===e.status?Me=Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"closed",typingNotification:{},userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly})):Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"resetTyping",typingNotification:{},userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"DISCONNECTED":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"disconnected",resetSession:!1,readOnly:t.data.readOnly||!1,sendingMessage:!1,files:{removed:{}},error:""}));case"CLOSED":var m=e.connection,f=e.status;return Me="connectionClosed"===f&&"closed"===m?Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,messages:[],files:{removed:{}},viewFiles:{},status:"closed",sendingMessage:!1,userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly})):Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"closed",sendingMessage:!1,userTyping:!1,messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"REQUESTINGFILE":return Object.assign({},e,{previousStatus:e.status,status:"requestingFile",sendingMessage:!1,viewFiles:Re(Re({},e.viewFiles),{},{newDownloadUrl:"",downloadUrl:e.viewFiles.newDownloadUrl||e.viewFiles.downloadUrl}),userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly});case"REFRESHINGFILES":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"refreshingFiles",sendingMessage:!1,userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"REQUESTINGUPLOAD":var h={};return t.data[0]&&(h={name:t.data[0].name,size:t.data[0].size,type:t.data[0].type}),Object.assign({},e,{previousStatus:e.status,status:"requestingUpload",files:Re(Re({removed:Re({},e.files.removed)},h),{},{percentage:0}),sendingMessage:!1,userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly});case"UPLOADAPPROVED":return Object.assign({},e,Re(Re({},e),{},{sendingMessage:!1,previousStatus:e.status,status:"uploadApproved",userTyping:!1,files:Re(Re({},e.files),{},{percentage:0},t.data),messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"FILEUPLOADING":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"uploading",userTyping:!1,files:Re(Re({},e.files),{},{percentage:t.data.percentage}),messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"FILEUPLOADED":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"fileUploaded",userTyping:!1,files:Re(Re({},e.files),{},{percentage:100},t.data),messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"MESSAGESUPDATED":var b=function(e,t){var n=(t.data||{}).viewFiles,r=n||{},o=r.attachmentId,a=r.newDownloadUrl,i=r.updatedTime,s=(e||{}).messages,c=JSON.parse(JSON.stringify(s));return n&&Object.keys(n).length&&(c=c.map((function(e){var t=JSON.parse(JSON.stringify(e));if(t.files&&t.files[0]&&t.files[0].downloadUrl){var n=(t.files[0]||{}).attachmentId;n&&n===o&&(t.files[0].downloadUrl=a,t.files[0].updatedTime=i,t.updatedTime=i)}return Re({},t)}))),c}(e,t);return t.data.updatedMessages&&t.data.updatedMessages.length&&t.data.updatedMessages.forEach((function(e){b.forEach((function(t,n){if(t.id==e.id){var r=(t||{}).deliveryStatus;b[n]=r?Re(Re({},e),{},{deliveryStatus:r}):e}}))})),e&&"closed"===e.status?Me=Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"closed",viewFiles:Re(Re({},e.viewFiles),t.data.viewFiles),sendingMessage:!1,messages:ve()(b),userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly})):Object.assign({},e,Re(Re({},e),{},{sendingMessage:!1,previousStatus:e.status,status:"messagesUpdated",viewFiles:Re(Re({},e.viewFiles),t.data.viewFiles),messages:ve()(b),userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"DELETINGFILE":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"deletingFile",userTyping:!1,messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"FILEDELETED":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"fileDeleted",userTyping:!1,files:{removed:t.data},messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"ENDED":return Object.assign({},e,{sendingMessage:!1,error:"",userTyping:!1});case"LOGOUT":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"logout",sendingMessage:!1,files:{removed:{}},viewFiles:{},messages:[],userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"REAUTHENTICATE":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,userTyping:!1,status:"reAuthenticating",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"AUTHENTICATED":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,userTyping:!1,status:"authenticated",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"STEPPINGUPCONVERSATION":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,userTyping:!1,status:"steppingUpConversation",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"STEPUPFAILED":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,userTyping:!1,status:"stepupFailed",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"CONVERSATIONSTEPPEDUP":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,userTyping:!1,status:"conversationSteppedUp",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"READONLY":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"readOnly",resetSession:!1,readOnly:t.data.readOnly}));case"STARTFAILED":return Object.assign({},e,Re(Re({},e),{},{error:t.data,previousStatus:e.status,userTyping:!1,status:"connectionFailed",bRestoring:!1,messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"SENDFAILED":return Object.assign({},e,Re(Re({},e),{},{erro:t.data,previousStatus:e.status,userTyping:!1,sendingMessage:"failed",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"SESSIONLOGGEDOUT":return e&&"closed"===e.status?Me=Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"sessionLoggedOut",resetSession:!1,readOnly:!1,connection:"closed",sendingMessage:!1,files:{removed:{}},viewFiles:{},capabilities:{enableSend:!1},messages:[],userTyping:!1,error:"",messageOutofOrderIndex:"",newSession:""})):Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"sessionLoggedOut",connection:"closed",resetSession:!1,readOnly:!1,sendingMessage:!1,files:{removed:{}},viewFiles:{},capabilities:{enableSend:!1},messages:[],userTyping:!1,error:"",messageOutofOrderIndex:"",newSession:""}));case"SESSIONEXPIRED":return e&&"closed"===e.status?Me=Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"sessionExpired",resetSession:!1,readOnly:!1,connection:"closed",sendingMessage:!1,files:{removed:{}},viewFiles:{},capabilities:{enableSend:!1},messages:[],userTyping:!1,error:"",messageOutofOrderIndex:"",newSession:""})):Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"sessionExpired",connection:"closed",resetSession:!1,readOnly:!1,sendingMessage:!1,files:{removed:{}},viewFiles:{},capabilities:{enableSend:!1},messages:[],userTyping:!1,error:"",messageOutofOrderIndex:"",newSession:""}));case"CONVERSATIONNOTFOUND":return e&&"closed"===e.status?Me=Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"conversationNotFound",connection:"closed",sendingMessage:!1,files:{removed:{}},viewFiles:{},capabilities:{enableSend:!1},messages:[],userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly})):Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"conversationNotFound",connection:"closed",sendingMessage:!1,files:{removed:{}},viewFiles:{},capabilities:{enableSend:!1},messages:[],userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"CLEARMESSENGER":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"messengerCleared",connection:"closed",sendingMessage:!1,messengerCleared:!0,files:{removed:{}},viewFiles:{},capabilities:{enableSend:!1},messages:[],userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"SESSIONCLEARED":var v=(t.data||{}).resetSession;return e&&"closed"===e.status?Me=Object.assign({},e,Re(Re({},e),{},{resetSession:v||!1,previousStatus:e.status,connection:v&&"boolean"==typeof v?"closed":e.connection,status:"sessionCleared",sendingMessage:!1,files:{removed:{}},viewFiles:{},message:{},readOnly:!1,capabilities:{enableSend:!1},messages:[],userTyping:!1,error:"",messageOutofOrderIndex:"",newSession:""})):Object.assign({},e,Re(Re({},e),{},{resetSession:v||!1,previousStatus:e.status,connection:v&&"boolean"==typeof v?"closed":e.connection,status:"sessionCleared",sendingMessage:!1,files:{removed:{}},viewFiles:{},message:{},readOnly:!1,capabilities:{enableSend:!1},messages:[],userTyping:!1,error:"",messageOutofOrderIndex:"",newSession:""}));case"FETCHHISTORYFAILED":return Object.assign({},e,Re(Re({error:t.data},e),{},{previousStatus:e.status,userTyping:!1,status:"fetchHistoryFailed",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"ERROR":var y=t.data.errorKey,w=e.files,x=e.status;switch(y){case"rateLimitExceeded":case"readOnlySession":case"authenticationFailed":case"customAttributesSizeExceeded":case"messageLengthExceeded":return function(e,t){var n=t.data||{},r=n.tracingId,o=n.errorKey,a=(e||{}).messages,i=!(!o||"messageLengthExceeded"!==o),s=JSON.parse(JSON.stringify(a));if(r&&Object(ke.a)(s,"tracingId",r)){var c=s.findIndex((function(e){return e.tracingId===r}));s[c]=Re(Re({},s[c]),{},{timestamp:(new Date).toISOString(),errorKey:o,deliveryStatus:"error"})}return Object.assign({},e,Re(Re({},e),{},{sendingMessage:"error",previousStatus:e.status,status:"connected",error:i?t.data:"",files:{removed:{}},messageOutofOrderIndex:"",message:t.data,messages:s,typingNotification:{}}))}(e,t);case"fileTypeInvalid":case"fileSizeZero":case"fileTooLarge":case"fileNameInvalid":case"fileNameTooLong":case"fileContentInvalid":w={removed:{}},x="fileUploadFailed";break;default:w={removed:{}}}return Object.assign({},e,Re(Re({},e),{},{files:w,userTyping:!1,error:t.data,messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly,status:x}));case"CLEARERROR":return Object.assign({},e,Re(Re({},e),{},{error:""}));case"RESTOREFAILED":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"restoreFailed",bRestoring:!1,sendingMessage:!1,userTyping:!1,error:t.data,messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"PENDING":return Object.assign({},e,Re(Re({},e),{},{previousStatus:e.status,status:"pending",userTyping:!1,error:"",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"OFFLINE":return Object.assign({},e,Re(Re({},e),{},{message:{},previousStatus:e.status,status:"offline",userTyping:!1,connectionStatus:"offline",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"RECONNECTED":return Object.assign({},e,Re(Re({},e),{},{connection:"opened",previousStatus:e.status,status:"connected",userTyping:!1,connectionStatus:"online",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"CONVERSATIONCLEARED":return e&&"closed"===e.status?Me=Object.assign({},e,Re(Re({},e),{},{messages:[],files:{removed:{}},viewFiles:{},previousStatus:e.status,userTyping:!1,bRestoring:!1,sendingMessage:!1,status:"cleared",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly,newSession:""})):Object.assign({},e,Re(Re({},e),{},{messages:[],files:{removed:{}},viewFiles:{},previousStatus:e.status,userTyping:!1,bRestoring:!1,sendingMessage:!1,status:"cleared",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly,newSession:""}));case"CONNECTIONCLOSED":return!e||"closed"!==e.status&&"cleared"!==e.status?Object.assign({},e,Re(Re({},e),{},{connection:"closed",bRestoring:!1,previousStatus:e.status,userTyping:!1,status:"connectionClosed",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly})):Me=Object.assign({},e,Re(Re({},e),{},{connection:"closed",bRestoring:!1,messages:[],previousStatus:e.status,userTyping:!1,status:"connectionClosed",messageOutofOrderIndex:"",resetSession:!1,readOnly:e.readOnly}));case"OPEN-WITH-STORE":return Object.assign({},e,Re(Re(Re({},e),Me),{},{connection:Me.connection,previousStatus:e.status,userTyping:!1,status:"opened",messageOutofOrderIndex:"",resetSession:!1,readOnly:Me.readOnly}));case"ALLOWEDFILETYPESUPDATED":t.data&&!0===t.data.hasOwnProperty("allowedMedia")?Pe=!0:t.data&&!1===t.data.hasOwnProperty("allowedMedia")&&(Pe=!1,t.data.allowedMedia=Ie);var S=((t.data||{}).allowedMedia||{}).inbound||{},O=S.fileTypes,C=S.maxFileSizeKB,E=[],k=!1;if(O&&O.length&&O.forEach((function(e){var t=(e||{}).type;E.push(t)})),Array.isArray(E)&&E.length>0)k=E.map((function(e){return e.toString().toLowerCase()})).every((function(e){return e.match("image")}));return Object.assign({},e,Re(Re({},e),{},{status:"allowedfiletypesupdated",allowedFileTypes:E,maxFileSizeInKB:C,allowedMediaPresence:Pe,bImageOnlyFileType:k}));default:return e}}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var He={knowledge:{}};function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},He)||{};return(arguments.length>1?arguments[1]:void 0).type,e}var ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{messengerStore:Ee(e.messengerStore,t),conversationStore:Le(e.conversationStore,t),knowledgeStore:Ke(e.knowledgeStore,t)}},Ue=n(680),qe=n.n(Ue),Ve=n(600);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||he,n=_e({},ye);return e&&Object.keys(e).length>0&&(n=_e(_e({},n),e)),fe(ze,n,t(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(ue(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(o)}));return r=he.apply(void 0,a)(n.dispatch),le(le({},n),{},{dispatch:r})}}}(Ve.default,qe()())))}var Ye=n(19),$e=n.n(Ye),Je=n(92),Qe=n.n(Je),Xe=n(39),Ze=n.n(Xe),et=n(65),tt=n.n(et);const nt=e=>new Proxy({},{get:(t,n)=>{if("string"==typeof n)return Object(f.lazy)((()=>e(n).then((e=>({default:e[n]})))))}});var rt=n(674);function ot(e){return{type:"OPEN_KNOWLEDGE_SEARCH",route:e.route}}var at,it=n(676),st=(n(100),n(405)),ct=n(428),lt=n(284),ut=n(149),dt=n(278),pt=n(426),gt=n(424),mt=n(435),ft=n(417),ht=n(607),bt=n.n(ht),vt=n(602),yt=n.n(vt),wt=n(606),xt=n.n(wt),St=n(605),Ot=n.n(St);function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(null,arguments)}var Et=function(e){return f.createElement("svg",Ct({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",fill:"currentColor"},e),at||(at=f.createElement("path",{d:"M261-120q-24.75 0-42.375-17.625T201-180v-570h-41v-60h188v-30h264v30h188v60h-41v570q0 24-18 42t-42 18H261zm438-630H261v570h438v-570zM367-266h60v-399h-60v399zm166 0h60v-399h-60v399zM261-750v570-570z"})))},kt=n(205),Tt=n.n(kt),Rt=n(603),jt=n.n(Rt),Dt=n(604),Pt=n.n(Dt),It=n(4),Mt=n(46),At=n(13),Nt=n(656);function Ft(e,t){var n=e||{},r=n.direction,o=n.sImageUrl,a=n.bShowHomeIcon,i=t||{},s=i.direction,c=i.sImageUrl,l=i.bShowHomeIcon;return r===s&&o===c&&a===l}var Lt=Object(It.a)("div")((function(e){e.theme,e.props;var t=e.imageRef;return{"&.messenger-logo-row":{display:"flex",flexDirection:"row",alignItems:"center",margin:"auto",padding:"12px 6px 6px 6px",overflow:"hidden"},"& img":{maxHeight:"70px",minHeight:"20px",display:"block",objectFit:"contain",width:"auto",height:"auto"},"& .logo-image-home":{margin:"14px 0px 0px 14px",padding:"6px 6px 2px 6px",maxWidth:"200px"},"& .logo-image-view":{maxWidth:t&&t.current&&t.current.naturalWidth/t.current.naturalHeight>8?"200px":t&&t.current&&t.current.naturalWidth/t.current.naturalHeight>3.5?"160px":"70px",cursor:"pointer"}}})),Bt=function(e){var t="right",n="left";"rtl"===e.direction&&(n="right",t="left");var r=Object(f.useRef)(null),o=Object(f.useState)(!1),a=$e()(o,2),i=a[0],s=a[1];e.bShowHomeIcon&&e.onImageLoaded&&e.onImageLoaded(!1);var c=function(t){var n=e||{},r=n.route,o=n.navigateToHome;r&&"conversations.home"!==r&&o&&o(t)};return h.a.createElement(Nt.a,{direction:"backward"==e.slideDirection?t:n,in:!0,appear:null!==e.slideDirection,key:e.route,mountOnEnter:!0,unmountOnExit:!0},h.a.createElement(Lt,{className:"mxg-header-logo-container ".concat(e.bShowHomeIcon?"":"messenger-logo-row"),imageRef:r},!i&&h.a.createElement("img",{className:"mxg-header-logo-img ".concat(e.bShowHomeIcon?"logo-image-home":"logo-image-view"),ref:r,src:e.sImageUrl,alt:"Company Logo",role:e.route&&"conversations.home"!==e.route?"link":"",onLoad:function(){setTimeout((function(){r.current&&r.current.naturalWidth>0&&r.current.naturalHeight>0&&e.bShowHomeIcon&&e.onImageLoaded&&e.onImageLoaded(!0)}),100)},onKeyDown:function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),c(e))},onClick:c,onError:function(e){i||s(!0)},tabIndex:e.route&&"conversations.home"!==e.route?0:-1})))},Ht=h.a.memo(Bt,Ft),Kt=n(211);function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qt=!1,Vt=Object(It.a)("div")((function(e){e.theme;return{position:"relative",maxWidth:"90%",marginBottom:"16px",marginLeft:"18px"}})),Wt=Object(It.a)("div")((function(e){e.theme;return{position:"absolute",right:"6px",cursor:"pointer",top:"6px"}})),_t=Object(It.a)("div")((function(e){e.theme;var t=e.props,n=e.bFabVisible;return{maxWidth:t.deleteButton&&(qt||!n&&(t.closeButton||t.backButton))?"65%":"90%",minHeight:t.expand?"86px":"34px",marginTop:"14px",marginBottom:t.expand?"25px":"12px",paddingLeft:t.backButton||t.closeButton?"0px":"16px",transition:"all 100ms ease-out 0s",wordBreak:"break-word",wordWrap:"break-word",overflowY:"auto"}})),Gt=Object(It.a)("div")((function(e){e.theme;var t,n=e.props;return{cursor:"pointer",position:null!==(t=n.config.homeScreen)&&void 0!==t&&t.enabled&&"conversations.conversations"!==n.route&&"cobrowse.connect"!==n.route&&"cobrowse.sharing"!==n.route&&"conversations.filePreview"!==n.route?"absolute":"relative",top:"6px",left:"0px"}})),Yt=Object(It.a)("div")((function(e){e.theme,e.props;var t=e.bFabVisible;return{cursor:"pointer",position:"absolute",top:"6px",right:qt||!t?"44px":"0px"}})),$t=Object(It.a)("div")((function(e){e.theme,e.props;var t=e.bFabVisible;return{cursor:"pointer",position:"absolute",top:"6px",right:qt||!t?"44px":"0px"}})),Jt=Object(It.a)("div")((function(e){e.theme;var t=e.props,n=e.bFabVisible;return{cursor:"pointer",position:"absolute",top:"6px",right:qt||void 0!==n&&!n||t.deleteButton?"44px":"0px"}})),Qt=Object(It.a)("div")((function(e){e.theme,e.props;return{cursor:"pointer",position:"relative",top:"6px",left:"0px"}})),Xt=Object(It.a)("div")((function(e){e.theme;var t,n=e.props;return{"&.mxg-header-main":{display:"flex",flexDirection:"row",overflow:"hidden",padding:"conversations.conversations"!=n.route&&"conversations.filePreview"!=n.route||"cobrowse.connect"===n.route||"cobrowse.sharing"===n.route?"knowledge.article"==n.route?"0px 8px 14px 0px":"0px 8px 8px 0px":"0",placeContent:null!==(t=n.config.homeScreen)&&void 0!==t&&t.logoUrl&&"conversations.conversations"!==n.route&&"cobrowse.connect"!==n.route&&"cobrowse.sharing"!==n.route&&"conversations.filePreview"!==n.route?"center":"flex-start"},"&.mxg-header-home-view":{display:"flex",overflow:"hidden",flexDirection:"column"},"& .mxg-header-subTitle":{paddingBottom:"22px"},"& .mxg-header-collapsed":{height:"64px"}}})),Zt=h.a.forwardRef((function(e,t){var n=e||{},r=n.expandMessenger,o=n.collapseMessenger,a=n.handleNavigation,i=n.route,s=n.isHeaderUpdated,c=n.messengerRef,l=(n.markdownMessages,n.handleSignOut,n.deleteButton),u=n.moreVertButton,d=n.showSignInButton,p=n.isSignedIn,g=n.sLoginStatus,m=n.oAvatar,b=n.muiTheme,v=n.toggleLauncher,y=n.oDisableInputs,w=n.onHeaderDeleteButtonClick,x=n.onHeaderSignInButtonClick,S=n.bFabVisible,O=n.oPlugins,C=Object(At.w)(),E=(e||{}).slideDirection,k=!1,T=m.firstName||m.lastName,R=Object(At.t)();Object(f.useLayoutEffect)((function(){var n=(t||{}).current;i&&"conversations.home"!==i&&s&&s(!1),n&&setTimeout((function(){e.onHeaderUpdated({height:n.offsetHeight})}),200),function(){ae.apply(this,arguments)}()}));var j=function(t,n){13!==t.which&&32!==t.which||t.ctrlKey||t.shiftKey?9===t.which&&t.shiftKey&&!t.ctrlKey&&(!i||"knowledge.search"!=i&&"knowledge.category"!=i&&"knowledge.article"!=i||(t.preventDefault(),e.homeScreenRef&&e.homeScreenRef.current&&e.homeScreenRef.current.focus())):n(t)},D=function(e,t){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),t())},P=function(e,t){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),t())},I=Object(f.useState)(!1),M=$e()(I,2),A=(M[0],M[1],Object(f.useState)(!1)),N=$e()(A,2),F=N[0],L=N[1],B=Object(f.useState)(!1),H=$e()(B,2),K=H[0],z=H[1],U=h.a.useState(null),q=$e()(U,2),V=q[0],W=q[1],_=Boolean(V),G=function(e){W(e.currentTarget)},Y=function(){W(null)},$=function(e){e.preventDefault(),L(!1),o(),a()};i&&F&&"knowledge.article"!=i&&(L(!1),o());var J,Q=(e||{}).getFramesDimension,X=e.config||{},Z=X.homeScreen,ee=X.theme,te=X.fullScreen,ne=(ee||{}).direction,re=(Z||{}).logoUrl,oe=[];function ae(){return(ae=Qe()(tt.a.mark((function e(){var t,n,r;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:t=e.sent,n=t.messengerFrame,(r=(n||{}).bottom)&&"0px"===r?K||z(!0):K&&z(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c&&c.current&&(oe=c.current.classList.value.split(" ")),J=!(!re||""==re);var ie="conversations.home"===i&&J,se="conversations.conversations"!==i&&"conversations.filePreview"!==i&&"cobrowse.connect"!==i&&"cobrowse.sharing"!==i,ce="knowledge.article"===i&&!C&&!R,le={width:"26px",height:"26px",display:"flex",alignItems:"inherit",justifyContent:"inherit"},ue={width:"26px",height:"26px",display:"flex",padding:"6px",margin:"6px",fontSize:"0.95rem",alignItems:"center",justifyContent:"center",color:b.palette.primary.contrastText,backgroundColor:b.palette.primary.main,cursor:"default"},de={padding:"8px 16px 8px 16px"},pe="";"conversations.home"===i?pe="mxg-home-header":"knowledge.search"!==i&&"knowledge.category"!==i&&"knowledge.article"!==i||(pe="mxg-search-header"),qt=!1,(te||oe.includes("cx-mxg-tablet-landscape")||C&&R||K)&&(qt=!0),u&&(k=p?T:l&&d&&(qt||!S));var ge=!(!qt&&S||p||!d);return h.a.createElement(st.a,{ref:t,className:"mxg-header ".concat(pe),sx:function(t){return{position:"relative!important",borderRadius:"4px 4px 0px 0px",background:t.palette[e.color].main+"!important",color:t.palette[e.color].contrastText+"!important",minWidth:"364px"}}},h.a.createElement(Xt,{className:ie?"mxg-header-home-view":"mxg-header-main",props:e},e.backButton&&h.a.createElement(Gt,{props:e,oDisableInputs:y},h.a.createElement(ct.a,{disableInteractive:!0,PopperProps:{container:t&&t.current},title:e.ariaBack},h.a.createElement(lt.a,{color:"inherit",children:h.a.createElement(Kt.a,{icon:yt.a,customStyle:le}),onClick:$,"aria-label":e.ariaBack,tabIndex:y.bHeaderBackIcon,onKeyDown:function(e){return j(e,$)}}))),e.closeButton&&h.a.createElement(Qt,{props:e},h.a.createElement(ct.a,{disableInteractive:!0,PopperProps:{container:t&&t.current},title:e.ariaClose},h.a.createElement(lt.a,{color:"inherit",children:h.a.createElement(Tt.a,{"aria-hidden":"true",alt:"",sx:Ut({},le)}),onClick:$,"aria-label":e.ariaClose,tabIndex:0,onKeyDown:function(e){return j(e,$)}}))),J&&se&&h.a.createElement(Ht,{key:re,slideDirection:E,bShowHomeIcon:ie,sImageUrl:re,route:i,direction:ne,navigateToHome:function(e){e.preventDefault(),L(!1),o(),a({route:"conversations.home"})},onImageLoaded:s}),h.a.createElement(_t,{className:"mxg-heading",props:e,bFabVisible:S},h.a.createElement("div",null,e.showHeaderTitle&&h.a.createElement(ut.a,{variant:"h1","aria-label":e.title},e.title),e.showHeaderSubTitle&&h.a.createElement(ut.a,{variant:"subtitle2",className:"mxg-header-subTitle",variantMapping:{subtitle2:"h2"},"aria-label":e.subTitle},e.subTitle))),k&&h.a.createElement($t,{props:e,bFabVisible:S},h.a.createElement(ct.a,{disableInteractive:!0,PopperProps:{container:t&&t.current},title:e.ariaMenuTitle},h.a.createElement(lt.a,{fontSize:"default",color:"inherit","aria-hidden":"true",alt:"",children:h.a.createElement(jt.a,{sx:Ut({},le)}),"aria-label":e.ariaExpandMenu,title:e.ariaMenuTitle,tabIndex:0,onClick:G,onKeyPress:function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),G(e))},"aria-controls":_?"messenger-menu":void 0,"aria-haspopup":"true","aria-expanded":_?"true":void 0}))),!p&&d&&!k&&h.a.createElement(Jt,{props:e,bFabVisible:S},h.a.createElement(ct.a,{disableInteractive:!0,PopperProps:{container:t&&t.current},title:e.ariaActionsSignInButtonTitle},h.a.createElement(lt.a,{fontSize:"default",color:"inherit","aria-hidden":"true",alt:"",children:h.a.createElement(Pt.a,{sx:Ut({},le)}),"aria-label":e.ariaActionsSignInButtonLabel,title:e.ariaActionsSignInButtonTitle,tabIndex:0,disabled:"signingIn"===g,onClick:x,onKeyPress:function(e){return P(e,x)}}))),(!p||!T)&&l&&!k&&h.a.createElement(Yt,{props:e,bFabVisible:S,oDisableInputs:y},h.a.createElement(ct.a,{disableInteractive:!0,PopperProps:{container:t&&t.current},title:e.ariaDeleteTitle},h.a.createElement(lt.a,{color:"inherit",children:h.a.createElement(Et,{style:Ut({},le)}),onClick:w,"aria-label":e.ariaDeleteLabel,tabIndex:y.bHeaderDeleteIcon,title:e.ariaDeleteTitle,disabled:"signingIn"===g,onKeyPress:function(e){return D(e,w)}}))),k&&h.a.createElement(dt.a,{anchorEl:V,id:"messenger-menu",open:_,onClose:Y,onClick:Y,onKeyDown:function(e){var t;13!==(t=e).which&&32!==t.which||t.ctrlKey||t.shiftKey||(t.preventDefault(),Y())},MenuListProps:{sx:{padding:0}},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&::before":{content:'""',display:"block",position:"absolute",top:0,right:qt||!S?20:12,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},p&&h.a.createElement(pt.a,{disableRipple:!0,sx:Ut(Ut({},{justifyContent:"center",display:"block",textAlign:"center",margin:"auto",cursor:"default"}),de)},h.a.createElement(gt.a,null,h.a.createElement(mt.a,{children:m.initials,sx:Ut({},ue),title:"".concat(e.ariaYouAreSignedIn," ").concat(m.firstName," ").concat(m.lastName),"aria-label":"".concat(e.ariaYouAreSignedIn," ").concat(m.firstName," ").concat(m.lastName)})),h.a.createElement(ut.a,{noWrap:!0,sx:{padding:"4px"}},m.firstName," ",m.lastName)),p&&l&&h.a.createElement(ft.a,null),ge&&h.a.createElement(pt.a,{onClick:x,onKeyPress:function(e){return P(e,x)},autoFocus:!0,disabled:"signingIn"===g,"aria-label":e.ariaActionsSignInButtonLabel,title:e.ariaActionsSignInButtonTitle,tabIndex:0},h.a.createElement(Pt.a,{sx:Ut({},le)}),h.a.createElement(ut.a,{noWrap:!0,sx:{margin:"0 0 0 8px"}},e.signInButton)),l&&h.a.createElement(pt.a,{onClick:w,onKeyPress:function(e){return D(e,w)},"aria-label":e.ariaMenuClearLabel,autoFocus:!ge,sx:Ut({},de),tabIndex:0},h.a.createElement(Et,{style:Ut({},le)}),h.a.createElement(ut.a,{noWrap:!0,sx:{margin:"0 0 0 8px"}},e.clearButton))),h.a.createElement(Wt,null,h.a.createElement(h.a.Fragment,null,ce&&h.a.createElement(ct.a,{disableInteractive:!0,PopperProps:{container:t&&t.current},title:F?e.ariaCollapse:e.ariaExpand},h.a.createElement(lt.a,{color:"inherit","aria-label":F?e.ariaCollapse:e.ariaExpand,children:F?h.a.createElement(Ot.a,{fontSize:"default","aria-hidden":"true",alt:"",sx:Ut({},le)}):h.a.createElement(xt.a,{fontSize:"default","aria-hidden":"true",alt:"",sx:Ut({},le)}),onClick:function(e){F?(o(),L(!1)):(r(),L(!0)),e.preventDefault()}})),(qt||!S)&&h.a.createElement(ct.a,{disableInteractive:!0,PopperProps:{container:t&&t.current},title:e.ariaMinimize},h.a.createElement(lt.a,{color:"inherit",children:h.a.createElement(bt.a,{fontSize:"default","aria-hidden":"true",alt:"",sx:Ut({},le)}),title:e.ariaMinimize,"aria-label":e.ariaMinimize,tabIndex:y.bHeaderMinimizeIcon,onClick:function(){return function(e,t){var n=(t||{}).Messenger;e(),n.command("SubMessenger.collapseLauncher")}(v,O)},onKeyPress:function(t){return function(t,n){13!==t.which&&32!==t.which||t.ctrlKey||t.shiftKey||(t.preventDefault(),n({launcherRef:e.launcherRef},t))}(t,v)}}))))),!!e.children&&h.a.createElement(Vt,null,e.children))}));Zt.propTypes={title:v.a.string,subTitle:v.a.string,ariaMinimize:v.a.string,ariaDeleteTitle:v.a.string,ariaDeleteLabel:v.a.string,color:v.a.string,expand:v.a.bool.isRequired,backButton:v.a.bool,showHeaderTitle:v.a.bool.isRequired,showHeaderSubTitle:v.a.bool.isRequired,handleNavigation:v.a.func.isRequired,expandMessenger:v.a.func.isRequired,collapseMessenger:v.a.func.isRequired,config:v.a.object,onHeaderUpdated:v.a.func,launcherRef:v.a.object,route:v.a.string.isRequired,markdownMessages:v.a.array,muiTheme:v.a.object.isRequired};var en,tn=(en=Zt,h.a.forwardRef((function(e,t){return h.a.createElement(Mt.a.Consumer,null,(function(n){var r=n.toggleLauncher,o=n.oDisableInputs,a=n.onHeaderDeleteButtonClick,i=n.onHeaderSignInButtonClick,s=n.bFabVisible,c=n.oPlugins;return h.a.createElement(en,Ze()({},e,{toggleLauncher:r,oDisableInputs:o,onHeaderDeleteButtonClick:a,onHeaderSignInButtonClick:i,bFabVisible:s,oPlugins:c,ref:t}))}))}))),nn=n(234),rn=n(437),on=n(295),an=n(93),sn=n(419),cn=n(436),ln=n(413),un=n(414),dn=n(415),pn=n(416);function gn(e,t,n){return t=u()(t),c()(e,mn()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function mn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mn=function(){return!!e})()}var fn=function(e){function t(e){var n;return o()(this,t),(n=gn(this,t,[e])).bIphone=!!Object(At.u)(),n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){(this.props.bShowAlertDialog&&!!this.props.sAlertDialogMessage||!1)&&this.props.disableFocusControls()}},{key:"render",value:function(){var e=this,t=function(e){var t=e.children,n=e.color,r=e.focusVisibleClassName,o=Object(f.createRef)();return Object(f.useLayoutEffect)((function(){e.bFocusVisible&&o.current&&o.current.focusVisible()}),[e.bFocusVisible]),h.a.createElement(cn.a,{action:o,sx:{margin:"4px"},onClick:e.onClick,color:n||"inherit",focusVisibleClassName:r||"",variant:e.variant||"inherit",disabled:e.disabled,tabIndex:0},t)},n=function(t){e.props.onAlertDialogExiting(t)},r=this.props.sAlertDialogButtonPrimary&&this.props.sAlertDialogButtonSecondary||!1;return h.a.createElement("div",null,h.a.createElement(ln.a,{open:this.props.bShowAlertDialog&&!!this.props.sAlertDialogMessage,onClose:function(e,t){"backdropClick"!==t&&n(e)},container:function(){return e.props.container.current},fullScreen:!1,style:{position:"absolute",textAlign:"center"},BackdropProps:{style:{position:"absolute"}},disableScrollLock:!0,disableEnforceFocus:!0,PaperProps:{tabIndex:0,"aria-modal":this.bIphone&&this.props.bShowAlertDialog?"true":"false","aria-label":this.props.sAlertDialogMessage||""},TransitionProps:{onEntering:function(t){e.props.onAlertDialogEntering(t)},onEntered:function(t){e.props.onAlertDialogEntered(t)},onExiting:function(t){e.props.onAlertDialogExiting},onExited:n}},"progress"==this.props.status&&h.a.createElement(sn.a,{variant:"query"}),h.a.createElement(dn.a,null,h.a.createElement(pn.a,null,this.props.sAlertDialogMessage),h.a.createElement(un.a,{style:{justifyContent:"center",WebkitBoxPack:"center",marginTop:"10px"}},h.a.createElement(t,{onClick:function(t){e.props.onAlertDialogButtonPrimary(t),e.props.preventDefault||e.props.closeAlertDialog("primary")},color:this.props.sAlertDialogButtonPrimaryColor||this.props.color||"inherit",variant:this.props.sAlertDialogButtonPrimaryVariant||"contained",bFocusVisible:!0,disabled:"progress"==this.props.status},this.props.sAlertDialogButtonPrimary),r&&h.a.createElement(t,{onClick:function(t){e.props.onAlertDialogButtonSecondary(t),e.props.preventDefault||e.props.closeAlertDialog("secondary")},disabled:"progress"==this.props.status,focusVisibleClassName:"mxg-button-focus-visible"},this.props.sAlertDialogButtonSecondary)))))}}])}(h.a.Component);fn.propTypes={color:v.a.string,route:v.a.string,status:v.a.string,container:v.a.object,bShowAlertDialog:v.a.bool,sAlertDialogMessage:v.a.string,sAlertDialogButtonPrimary:v.a.string,sAlertDialogButtonSecondary:v.a.string,onAlertDialogEntering:v.a.func,onAlertDialogEntered:v.a.func,onAlertDialogExiting:v.a.func,onAlertDialogExited:v.a.func,onAlertDialogButtonPrimary:v.a.func,onAlertDialogButtonSecondary:v.a.func};var hn=function(e){return function(t){return h.a.createElement(Mt.a.Consumer,null,(function(n){var r=n.route,o=n.bShowAlertDialog,a=n.showAlertDialog,i=n.closeAlertDialog,s=n.sAlertDialogMessage,c=n.sAlertDialogButtonPrimary,l=n.sAlertDialogButtonSecondary,u=n.onAlertDialogEntering,d=n.onAlertDialogEntered,p=n.onAlertDialogExiting,g=n.onAlertDialogExited,m=n.onAlertDialogButtonPrimary,f=n.onAlertDialogButtonSecondary,b=n.sAlertDialogButtonPrimaryColor,v=n.sAlertDialogButtonPrimaryVariant,y=n.disableFocusControls,w=n.oDisableInputs;return h.a.createElement(e,Ze()({},t,{route:r,bShowAlertDialog:o,showAlertDialog:a,closeAlertDialog:i,sAlertDialogMessage:s,sAlertDialogButtonPrimary:c,sAlertDialogButtonPrimaryColor:b,sAlertDialogButtonPrimaryVariant:v,sAlertDialogButtonSecondary:l,onAlertDialogEntering:u,onAlertDialogEntered:d,onAlertDialogExiting:p,onAlertDialogExited:g,onAlertDialogButtonPrimary:m,onAlertDialogButtonSecondary:f,disableFocusControls:y,oDisableInputs:w}))}))}}(fn),bn=n(420),vn=n(421),yn=n(407),wn=n(410),xn=n(601),Sn=n.n(xn),On=n(16),Cn=n.n(On),En=n(608),kn=n.n(En),Tn="IconAvatar",Rn={avatar:"".concat(Tn,"-root"),image:"".concat(Tn,"-image"),fallbackIcon:"".concat(Tn,"-fallbackIcon")},jn=Object(It.a)("div")((function(e){e.theme,e.props;return m()(m()({},"& .".concat(Rn.image),{maxHeight:"100%",maxWidth:"100%",minWidth:"75%",minHeight:"75%"}),"& .".concat(Rn.fallbackIcon),{width:"1em!important",height:"1em!important"})})),Dn=function(e){var t,n,r=e.humanizeConfig,o=e.message,a=e.showAgentAvatar,i=e.showBotAvatar,s=r||{},c=s.bot,l=s.enabled,u=c||{},d=u.name,p=u.avatarUrl,g=o||{},m=g.messageType,f=g.originatingEntity,b=g.from||{},v=b.name,y=b.avatar,w="";return l&&"outbound"==m&&("Human"==f?(n=y,w=v):"Bot"==f&&(n=y||p,w=v||d)),h.a.createElement("div",null,l&&(a||i)&&h.a.createElement(jn,null,h.a.createElement(mt.a,{src:n,alt:w,classes:{img:Rn.image,fallback:Rn.fallbackIcon},children:"Human"==f?w?null===(t=w[0])||void 0===t?void 0:t.toUpperCase():h.a.createElement(mt.a,{classes:{img:Rn.image,fallback:Rn.fallbackIcon}}):h.a.createElement(mt.a,null,h.a.createElement(kn.a,{className:Rn.fallbackIcon}))}))||null)},Pn=Dn;Dn.propTypes={styles:v.a.object};var In=n(12);function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nn=Object(It.a)(yn.a)((function(e){var t=e.theme;return{width:"100%",backgroundColor:"transparent!important","& .Cx-MuiCardContent-root":{display:"flex",paddingBottom:"16px!important",position:"relative"},"& .mxg-card-title-container":{width:"100%",paddingTop:"4px"},"& .mxg-card-title-content":{display:"block",width:"100%",whiteSpace:"pre"},"& .mxg-card-message":{lineHeight:"unset"},"& .mxg-chevron-right":{display:"inline-block",float:"right",cursor:"pointer",position:"relative",marginLeft:"auto",left:"9px",width:"26px",height:"26px"},"& .mxg-message-caption":{color:t.palette.common.mediumGrey,fontWeight:"600",whiteSpace:"pre",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",width:"100%",verticalAlign:"text-bottom"},"& .card-container":{width:"100%"},"& .mxg-avatar":{display:"inline-block",width:"81%",float:"left",position:"relative",paddingTop:"4px"},"& .mxg-card-textContent":{display:"inline-block",width:"84%",float:"left",position:"relative"},"& .mxg-card-column1":{display:"inline-block",position:"relative",float:"left",bottom:"0px",maxWidth:"14%",marginRight:"10px",paddingTop:"9px"},"& .mxg-card-column2":{display:"inline-block",width:"100%",paddingTop:"4px"},"& .mxg-card-column3":{display:"inline-block",float:"right",width:"15%",padding:"10px 2px 0px 0px"},"& .mxg-text-message-caption":{color:t.palette.common.mediumGrey,display:"block",float:"left",whiteSpace:"nowrap",overflow:"hidden",width:"100%",textOverflow:"ellipsis",pointerEvents:"none",maxWidth:"91%"},"& .mxg-message-date":m()(m()({color:t.palette.common.mediumGrey,width:"100%",fontSize:"0.75rem",float:"right",textAlign:"end"},"fontSize","0.75rem"),"whiteSpace","pre"),"& .Cx-MuiButton-contained":{margin:"0px 5px 0px 0px",boxShadow:"none",display:"flex",maxWidth:"100%",float:"left"},"& .mxg-message-container":{display:"flex",position:"relative"},"& .mxg-card-buttons":{display:"inline-block",paddingTop:"15px"},"& .mxg-markdown":{"& pre":{padding:"9px",borderRadius:"4px",border:"1px solid",textOverflow:"ellipsis",overflow:"hidden",margin:"0px",whiteSpace:"nowrap",display:"inline-block",maxWidth:"inherit"},"& mark":{backgroundColor:t.palette.highlight.main,padding:"0px 2px",fontWeight:700,color:t.palette.getContrastText(t.palette.highlight.main)}},"& .mxg-secondary-btn":{color:t.palette.common.textColor,backgroundColor:t.palette.common.lightGrey,"&:hover":{backgroundColor:t.palette.common.smokeGrey},"&:focus-visible":{outlineColor:t.palette.common.outlineColor}},"& .mxg-clear-button":{float:"right",position:"absolute",right:0,margin:"-7px 5px 0px 0px",clear:"both","&:focus-visible":{outlineColor:t.palette.common.outlineColor}}}})),Fn=function(e,t,n){var r=e||{},o=r.messageType,a=r.originatingEntity,i=(r.from||{}).name,s=n||{},c=s.bot,l=s.enabled,u=t||{},d=u.customerDefaultName,p=u.botDefaultName,g=u.agentDefaultName,m=(c||{}).name,f="";if(o){switch(o){case"inbound":f=d;break;case"outbound":"Bot"===a?(f=p,l&&(m||i)&&(f=i||m)):(f=g,l&&i&&(f=i))}return f}};function Ln(e){var t=e||{},n=t.i18n,r=t.openConversation,o=t.startNewConversation,a=t.config,i=a.apps,s=a.preview,c=t.conversationStore,l=t.humanizeConfig,u=t.disconnectType,d=t.markdownMessages,p=t.color,g=t.handleConversationCardKeyDown,m=t.onHeaderDeleteButtonClick,b=t.bConversationDisconnected,v=c||{},y=(v.messages,v.readOnly),w=(i||{}).conversations||{},x=w.conversationDisconnect,S=w.conversationClear,O=x||{},C=O.enabled,E=(O.type,(S||{}).enabled),k=(l||{}).enabled,T=Object(f.useRef)(null),R=Object(f.useRef)(null),j=Object(f.useState)(!1),D=$e()(j,2),P=D[0],I=D[1],M=Object(f.useRef)(null),A=!s&&(e.autoFocus||!1);Object(f.useEffect)((function(){setTimeout((function(){A&&M.current&&M.current.focusVisible({preventScrolling:!0})}),150)}));var N=function(){r(),"function"==typeof m&&m()},F=function(){T&&T.current&&T.current.scrollWidth>T.current.clientWidth?P||I(!0):P&&I(!1)};Object(f.useEffect)((function(){return window.addEventListener("resize",F),function(){window.removeEventListener("resize",F)}}),[]),R&&R.current&&F();var L="",B="",H="",K="",z="",U="",q=!1,V=!1,W="";if(d&&d.length&&(L=d.find((function(e){var t=e||{},n=t.text,r=t.contentType,o=t.files,a=t.eventType,i=(t.presence||{}).type;if(e)return n||r||o&&o.length||a&&a.toLowerCase()===In.M&&i&&i.toLowerCase()===In.q}))),L){var _=L||{},G=_.timestamp,Y=_.text,$=_.contentType,J=_.carousel,Q=_.card,X=_.eventType,Z=_.presence,ee=_.messageType,te=(Z||{}).type,ne=(J||{}).cards;switch(H=Cn()(G),Y&&(z=Y),$&&"string"==typeof $&&(U=$.toLowerCase()),U){case"carousel":ne&&ne.length&&!z&&(z=ne[0].title||ne[0].description);break;case"card":Q&&Q.title&&!z&&(z=Q.title)}X&&X.toLowerCase()==In.M&&te&&te.toLowerCase()==In.q&&(!0,z=u&&"send"==u.toLowerCase()&&!y?n.disconnectMessage+". "+n.disconnectMessageSend:n.disconnectMessage||""),C&&y&&"boolean"==typeof V&&!V&&b&&(V=!0),K=Fn(L,n,l),q=ee&&"outbound"===ee||!1,W=L,z||(B=d.find((function(e){return e&&e.text})))&&B.text&&(K=Fn(B,n,l),z=B.text,B.timestamp&&(H=Cn()(B.timestamp)),q=B.messageType&&"outbound"===B.messageType||!1,W=B),z&&z.match(/<a/)&&(z=z.replaceAll("<a target='_blank'","<a target='_blank' tabindex='-1'"))}return h.a.createElement(Nn,{elevation:2,raised:!0},h.a.createElement(wn.a,{ref:R,id:"card_content"},h.a.createElement("div",{className:"card-container"},h.a.createElement("div",{className:"mxg-card-title-content"},h.a.createElement(ct.a,{componentsProps:{tooltip:{sx:{width:"93%",maxHeight:"27px",overflowY:"auto",margin:"10px 0"}}},PopperProps:{container:R&&R.current},title:L&&V?n.yourConversationCardTitle:L?n.continueConversationCardTitle:n.startConversationCardTitle,placement:"top",disableHoverListener:!P,disableFocusListener:!P,disableTouchListener:!P},h.a.createElement(ut.a,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},ref:T,variant:"h3"},L&&V?n.yourConversationCardTitle:L?n.continueConversationCardTitle:n.startConversationCardTitle))),L&&h.a.createElement("div",{className:"mxg-message-container"},h.a.createElement("div",{className:"mxg-card-textContent"},k&&q&&h.a.createElement("div",{className:"mxg-card-column1"},h.a.createElement(Pn,{humanizeConfig:l,message:W,showAgentAvatar:q,styles:{avatar:{margin:"2px 6px 0px 0px"}}})),h.a.createElement("div",{className:k&&q?"mxg-avatar":"mxg-card-column2"},L&&z&&h.a.createElement("div",{className:"mxg-card-title-container"},K&&h.a.createElement(ut.a,{className:"mxg-message-caption",variant:"caption"},"".concat(K," ")),z&&h.a.createElement(ut.a,{className:"mxg-text-message-caption mxg-card-message mxg-markdown",variant:"caption",dangerouslySetInnerHTML:{__html:Object(ke.b)(z)}}),h.a.createElement("div",{role:"alert",className:"cx-messenger-screen-reader",tabIndex:-1,"aria-labelledby":"card_content"})))),h.a.createElement("div",{className:"mxg-card-column3"},H&&h.a.createElement(ut.a,{className:"mxg-message-date",variant:"caption"},Cn()(H.$d).format("LT")))),h.a.createElement("div",{className:"mxg-card-buttons"},h.a.createElement(cn.a,{action:M,variant:"contained",startIcon:h.a.createElement(Kt.a,{icon:Sn.a,alt:"",customStyle:{width:"20px",height:"20px",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}),size:"medium",dir:"auto",color:p,tabIndex:0,"aria-label":L&&V?n.openConversationButtonTitle+"-"+n.ariaOpenConversation:L?n.continueConversationButtonTitle+"-"+n.ariaContinueConversation:n.startConversationButtonTitle+"-"+n.ariaStartNewConversation,onClick:r,onKeyDown:g},h.a.createElement("span",{className:"mxg-button-text"},L&&V?n.openConversationButtonTitle:L?n.continueConversationButtonTitle:n.startConversationButtonTitle)),V&&h.a.createElement(cn.a,{id:"startNewConversation_text",variant:"contained",size:"medium",dir:"auto",className:"mxg-secondary-btn",tabIndex:0,"aria-label":n&&n.startNewConversation+"-"+n.ariaStartNewConversation||"",onClick:o},n&&n.startNewConversation||""),E&&L&&h.a.createElement(ct.a,{disableInteractive:!0,PopperProps:{container:R&&R.current},title:n.ariaActionsClearButtonTitle},h.a.createElement(lt.a,{className:"mxg-clear-button",color:"inherit",children:h.a.createElement(Et,{style:An({},{width:"26px",height:"26px",display:"flex",alignItems:"inherit",justifyContent:"inherit"})}),onClick:N,"aria-label":n.ariaActionsClearButtonLabel,title:n.ariaActionsClearButtonTitle,tabIndex:0,onKeyPress:function(e){var t;13!==(t=e).which&&32!==t.which||t.ctrlKey||t.shiftKey||(t.preventDefault(),N())}}))))))}Ln.propTypes={openConversation:v.a.func.isRequired,i18n:v.a.object.isRequired,conversationStore:v.a.object,onHeaderDeleteButtonClick:v.a.func};var Bn=n(659),Hn=n(660),Kn=n(661),zn=n(658),Un=Object(It.a)(yn.a)((function(e){e.theme;return{width:"100%",backgroundColor:"transparent!important","& .mxg-card-notification":{width:"100%",paddingTop:"15px"},"& .mxg-card-title-content":{display:"block",width:"100%",whiteSpace:"pre"},"& .card-container":{width:"100%"},"& .Cx-MuiButton-contained":{margin:"0px 5px 0px 0px",boxShadow:"none",display:"flex",maxWidth:"100%",float:"left"},"& .Cx-MuiCardContent-root":{display:"flex",position:"relative",paddingBottom:"16px !important"},"& .mxg-card-buttons":{display:"inline-block",paddingTop:"15px"}}}));function qn(e){var t=e||{},n=t.i18n,r=t.openCobrowseConnect,o=t.cobrowseConnectStatus,a=t.color,i=t.autoFocus,s=(t.config||{}).preview,c=n||{},l=c.connect,u=c.enterPin,d=c.sharingAgent,p=c.ariaConnect,g="sharing"==o,m=Object(f.useRef)(null),b=Object(f.useRef)(null),v=Object(f.useState)(!1),y=$e()(v,2),w=y[0],x=y[1],S=Object(f.createRef)(),O=!s&&(i||!1),C=Object(At.k)().os||"",E=!Object(At.w)()&&("iOS"===C||"Android"===C||"Linux"===C)||!1,k=function(){m&&m.current&&m.current.scrollWidth>m.current.clientWidth?w||x(!0):w&&x(!1)};return Object(f.useEffect)((function(){return window.addEventListener("resize",k),function(){window.removeEventListener("resize",k)}}),[]),b&&b.current&&k(),Object(f.useEffect)((function(){setTimeout((function(){O&&S.current&&S.current.focusVisible()}),150)})),h.a.createElement(Un,{elevation:2,raised:!0},h.a.createElement(wn.a,{ref:b,id:"card_content"},h.a.createElement("div",{className:"card-container"},h.a.createElement("div",{className:"mxg-card-title-content"},h.a.createElement(ct.a,{componentsProps:{tooltip:{sx:{width:"93%",maxHeight:"27px",overflowY:"auto",margin:"10px 0"}}},PopperProps:{container:b&&b.current},title:l,placement:"bottom",disableHoverListener:!w,disableFocusListener:!w,disableTouchListener:!w},h.a.createElement(ut.a,{variant:"h3",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},ref:m,"aria-label":l+". "+p},l||""))),!g&&u&&h.a.createElement("div",{className:"mxg-card-buttons"},h.a.createElement(cn.a,{action:S,startIcon:h.a.createElement(Kt.a,{icon:Object(At.w)()||E?Bn.a:Hn.a,alt:"",customStyle:{width:"20px",height:"20px"}}),id:"enterPin_text",color:a,variant:"contained",size:"medium",dir:"auto",tabIndex:0,"aria-label":u,onClick:r},u)),g&&d&&h.a.createElement(zn.a,{direction:"row",alignItems:"center",spacing:1,className:"mxg-card-notification"},h.a.createElement(Kt.a,{icon:Kn.a,alt:"",customStyle:{height:"22px",width:"initial"},iconProps:{color:"success"}}),h.a.createElement(ut.a,{id:"sharing_text",variant:"body1",variantMapping:{body1:"h4"},"aria-label":d},d)))))}qn.propTypes={openCobrowseConnect:v.a.func.isRequired,i18n:v.a.object.isRequired,cobrowseConnectStatus:v.a.string};n(677);var Vn=n(429),Wn=Object(It.a)("div")((function(e){e.theme,e.props;return{"& .mxg-connect-container":{padding:"20px",height:"100%",position:"absolute",boxSizing:"border-box",overflowX:"hidden",overflowY:"auto",width:"100%"},"& .otpInputContainer":{padding:"25px",textAlign:"center"},"& .otpInput":{width:"40px",marginLeft:"5px"},"& .otpInput:firstChild":{marginLeft:0},"& .shareButton":{width:"70%"},"& .Cx-MuiOutlinedInput-notchedOutline":{borderColor:"#000000 !important"}}})),_n=!1;function Gn(e){var t=e.i18n,n=e.onStartSharing,r=e.bInvalidJoinCode,o=e.bShowProgress,a=e.errorKey,i=t||{},s=i.enterPinTitle,c=i.otpMessage,l=i.startSharing,u=i.ariaConnecting,d=i.errors,p=a&&d&&d[a]||"",g=h.a.useState(!0),m=$e()(g,2),b=m[0],v=m[1],y=h.a.useState(!1),w=$e()(y,2),x=w[0],S=w[1],O=Object(f.useState)((function(){return Array.from({length:6},(function(){return Object(f.createRef)()}))})),C=$e()(O,1)[0],E=Object(f.useRef)([]);Object(f.useEffect)((function(){r&&_n&&(b||v(!0))})),Object(f.useEffect)((function(){E.current[0].focus()}),[]),r&&!x&&(_n=!1,E.current.forEach((function(e){e.value&&(e.value="")})),E.current[0].focus(),_n=!0,S(!0));var k=function(e){e.preventDefault()},T=function(){var e="";E.current.forEach((function(t){e+=t.value})),S(!1),n(e)};return h.a.createElement(Wn,{role:"status","aria-labelledby":"enterPIN_text otpMessage_text"},o&&h.a.createElement(sn.a,{variant:"query",role:"alert","aria-busy":"true","aria-label":u}),h.a.createElement("div",{className:"mxg-connect-container"},h.a.createElement(ut.a,{id:"enterPIN_text",sx:{fontWeight:"600"},variant:"subtitle1","aria-label":s,align:"left"},s),h.a.createElement(ut.a,{id:"otpMessage_text",className:"mxg-header-subTitle",variant:"subtitle2","aria-label":c,align:"left"},c),r&&p&&h.a.createElement(ut.a,{id:"otpMessage_text",className:"mxg-header-subTitle",variant:"subtitle2","aria-label":p,align:"left",sx:function(e){return{fontStyle:"italic",color:e.palette.error.main}},role:"alert"},p),h.a.createElement("div",{className:"otpInputContainer"},C.map((function(e,t){return h.a.createElement(Vn.a,{key:t,inputRef:function(e){return E.current[t]=e},type:"text",id:"digit".concat(t,"-1"),onChange:function(e){return function(e,t){var n=t,r=0;_n=!1,e.target.value&&!/^[0-9\b]+$/.test(e.target.value)&&(e.target.value=""),5!==t&&E.current[t].value&&(n=t+1),E.current.forEach((function(e){e.value&&(r++,v(6!=r))})),E.current[n].focus()}(e,t)},inputProps:{maxLength:1,inputMode:"numeric",sx:{fontSize:"20px",textAlign:"center"}},onKeyDown:function(e){return function(e,t){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey?8===e.which?e.target.value||0!==t&&(E.current[t-1].value="",E.current[t-1].focus(),b||v(!0)):46===e.which?5!==t&&E.current[t+1].value&&(E.current[t+1].value="",E.current[t+1].focus(),b||v(!0)):39===e.which?(e.preventDefault(),5!==t&&E.current[t+1].focus()):37===e.which&&(e.preventDefault(),0!==t&&E.current[t-1].focus()):e.target.value&&t&&5===t&&!b&&T()}(e,t)},onPaste:k,className:"otpInput",autoComplete:"off"})}))),h.a.createElement(cn.a,{id:"startSharing_text",variant:"contained",size:"medium",dir:"auto",className:"mxg-secondary-btn shareButton",tabIndex:b?-1:0,"aria-label":l,onClick:T,disabled:b},l&&l||"")))}Gn.propTypes={i18n:v.a.object,onStartSharing:v.a.func.isRequired,bCobrowseSharing:v.a.bool,enableTransition:v.a.bool};var Yn=n(609),$n=n.n(Yn),Jn=Object(It.a)("div")((function(e){return{top:"36%",position:"relative"}})),Qn={width:"40px",height:"40px",display:"flex",justifyContent:"inherit"};function Xn(e){var t=((e||{}).i18n||{}).sharing;return h.a.createElement(Jn,{role:"alert","aria-labelledby":"sharing_text"},h.a.createElement(zn.a,{direction:"column",alignItems:"center",spacing:1},h.a.createElement(Kt.a,{icon:$n.a,alt:"",customStyle:Qn,iconProps:{color:"success"}}),h.a.createElement(ut.a,{id:"sharing_text",sx:{fontWeight:"600"},variant:"subtitle1","aria-label":t},t)))}function Zn(e,t,n){return t=u()(t),c()(e,er()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(er=function(){return!!e})()}Xn.propTypes={i18n:v.a.object};var tr=function(e){function t(e){var n;o()(this,t),n=Zn(this,t,[e]),m()(n,"initialize",(function(){var e=n.props||{},t=e.config,r=e.oPlugins,o=(t||{}).cobrowse,a=n,i=o||{},s=i.enabled,c=i.channels,l=!(!c||!c.length)&&c.includes("voice");s&&l&&(r&&r[n.sPluginName]?(n.oCobrowseVoice=r[n.sPluginName],n.oCobrowseVoice.subscribe("CobrowseService.sessionStarted",(function(e){var t=e.data;a.onSessionStarted(t)})),n.oCobrowseVoice.subscribe("CobrowseService.sessionEnded",(function(e){a.onSessionEnded(e)}))):Genesys("registerPlugin",n.sPluginName,(function(e){e&&Object.keys(e).length&&(a.oCobrowseVoice=e,e.subscribe("CobrowseService.sessionStarted",(function(e){var t=e.data;a.onSessionStarted(t)})),e.subscribe("CobrowseService.sessionEnded",(function(e){a.onSessionEnded(e)})),a.oCobrowseVoice.ready())})))})),m()(n,"setStorage",(function(e,t,r){n.oMessengerPlugin.command(n.storage+".set",{name:e,value:t,expireInSecs:r})})),m()(n,"removeStorage",(function(e){n.oMessengerPlugin.command(n.storage+".remove",{name:e})}));var r=e||{},a=r.config,i=r.oPlugins;(a||{}).deploymentId;return n.sPluginName="CobrowseVoice",n.oMessengerPlugin=i.Messenger,n.oCobrowseVoice="",n.state={bCobrowseSharing:null,bInvalidJoinCode:!1,bShowProgress:!1},n.onStartSharing=n.onStartSharing.bind(n),n.onSessionStarted=n.onSessionStarted.bind(n),n.onSessionEnded=n.onSessionEnded.bind(n),n.joinCode="",n.errorKey="",n.errorCodes={COBROWSEACTIVE:In.g,JOINFAILURE:In.z},n.storage=Object(At.q)(a),n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.props.setPlugin(this.sPluginName,this.oCobrowseVoice),this.setState=function(e,t){}}},{key:"onStartSharing",value:function(e){var t=this,n=(this.props||{}).acceptOffer;this.joinCode=e;var r={sessionJoinToken:this.joinCode};this.setState({bShowProgress:!0,bInvalidJoinCode:!1}),n(r).catch((function(e){if(e){var n=(e||{}).code;n&&(t.errorKey=t.errorCodes[n]||"",t.setState({bInvalidJoinCode:!0,bShowProgress:!1})),t.oCobrowseVoice.publish("error",e)}}))}},{key:"onSessionStarted",value:function(e){var t=e.joinCode;this.joinCode===t&&(this.state.bCobrowseSharing||(this.setState({bCobrowseSharing:!0,bInvalidJoinCode:!1,bShowProgress:!1}),this.props.dispatch(rt.cobrowseShare({route:"cobrowse.sharing",cobrowseConnectStatus:"sharing"})),this.oCobrowseVoice.publish("sessionStarted",e)))}},{key:"onSessionEnded",value:function(){this.state.bCobrowseSharing&&(this.setState({bCobrowseSharing:!1}),this.oCobrowseVoice.publish("sessionEnded"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.i18n,r=t.enableTransition,o=t.route,a=t.slideDirection,i=this.state,s=i.bInvalidJoinCode,c=i.bShowProgress;this.joinCode;return h.a.createElement(Nt.a,{direction:"right",in:!0,appear:null!==a,mountOnEnter:!0,unmountOnExit:!0},h.a.createElement(an.a,{elevation:0,className:"mxg-conversation"},h.a.createElement(h.a.Fragment,null,function(){switch(o){case"cobrowse.connect":return h.a.createElement(Gn,{i18n:n,onStartSharing:e.onStartSharing,bInvalidJoinCode:s,slideDirection:a,enableTransition:r,bShowProgress:c,errorKey:e.errorKey});case"cobrowse.sharing":return h.a.createElement(Xn,{i18n:n});default:return null}}())))}}])}(h.a.PureComponent);tr.propTypes={i18n:v.a.object,dispatch:v.a.func.isRequired,config:v.a.object.isRequired};var nr=oe()(function(e){return function(t){return h.a.createElement(Mt.a.Consumer,null,(function(n){var r=n.acceptOffer,o=n.setPlugin,a=n.oPlugins,i=n.getOfferState;return h.a.createElement(e,Ze()({},t,{getOfferState:i,acceptOffer:r,setPlugin:o,oPlugins:a}))}))}}(tr)),rr=n(235);n(686);function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ir(e,t,n){return t=u()(t),c()(e,sr()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function sr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sr=function(){return!!e})()}var cr=Object(At.k)().browser||"",lr=!(!cr||"Safari"!==cr),ur=nt((function(){return Promise.resolve().then(n.bind(null,235))})),dr=ur.KnowledgeCard,pr=ur.KnowledgeResults,gr=ur.KnowledgeArticle,mr=ur.KnowledgeCategories,fr=Object(It.a)("div")((function(e){var t=e.theme,n=e.props;return{position:"absolute",top:"-32px",bottom:"0px",right:"0px",left:"0px",width:"92%",overflowY:"auto",overflowX:"hidden",backgroundColor:"inherit",margin:"0px 16px 16px 16px",borderRadius:"4px","&.mxg-app":{position:"initial",margin:"0px"},"&.mxg-cobrowse-voice-app":{position:"initial",margin:"0px",width:"100%",height:"100%",borderRadius:0,overflow:"hidden"},"& .mxg-cobrowse-voice-container":{position:"absolute",width:"100%",height:"100%"},"& .mxg-knowledge-container":{position:"absolute",right:"0px",boxSizing:"border-box",overflow:"hidden auto",overscrollBehavior:"contain",width:"100%",height:"100%",scrollBehavior:"smooth",fontFamily:t.typography.fontFamily},"& .mxg-knowledge-wrapper":{height:"100%"},"& .mxg-toaster-listItem":{marginBottom:n.bToaster?"16px!important":"0!important"}}})),hr={padding:"1px","& .Cx-MuiListItem-root":{display:"flex",margin:"0px 0px 16px 0px",padding:"0",listStyle:"none","&:hover":{backgroundColor:"transparent"},"&:focus":{backgroundColor:"transparent"},"&:focus-visible":{backgroundColor:"transparent",outline:"1px auto",outlineOffset:lr?"-7px":"unset"},"&:last-child":{marginBottom:"0px"}},"& .Cx-MuiListItem-button.Mui-focusVisible":{backgroundColor:"transparent",outline:"1px auto",outlineOffset:lr?"-7px":"unset"}},br=function(e){function t(e){var n;o()(this,t),n=ir(this,t,[e]),m()(n,"setHomeDimensions",(function(){var e=n.props||{},t=e.headerRef,r=e.homeScreenRef,o=e.sOSBrowser,a=e.iHomeScreenHeight,i=e.setHomeScreenHeight,s=e.updateHomeHeight,c=e.knowledgeEnabled,l=e.bTablet,u=e.config,d=(n.state||{}).homeScreenHeight;n.sConversationClassName=Object(At.l)(u),n.sHomeClassName=Object(At.m)(u);var p=Object(At.w)()?10:50;if("conversations.home"===n.route){if(r&&r.current&&t&&t.current){var g=r.current.children[0]&&r.current.children[0].firstElementChild&&r.current.children[0].firstElementChild.clientHeight||n.homeScreenCardHeight,m=t.current.clientHeight+g;if(l&&c&&m<=368&&(m=368),!c&&m<245&&(m=245),s&&i({homeScreenHeight:a,bAddTransition:s}),(!d||d!==m)&&(n.homeScreenCardHeight=g,n.homeScreenCardHeight&&n.homeScreenCardHeight<In.x&&(n.homeScreenCardHeight=In.x),n.homeScreenCardHeight>=In.x&&n.homeScreenCardHeight<=In.w)){n.setState({homeScreenHeight:m});var f=m+p;i({homeScreenHeight:f,bAddTransition:s}),n.oHome&&n.oHome.command("MessengerHelper.setDimension",{conversations:{height:"".concat(f,"px"),width:In.F,removeClass:[n.sConversationClassName],addClass:[n.sHomeClassName,o]}})}}}else d&&(n.setState({homeScreenHeight:0}),i&&i({homeScreenHeight:0,bAddTransition:!1}),n.oHome&&n.oHome.command("MessengerHelper.setDimension",{conversations:{height:In.E,width:In.F,removeClass:[n.sHomeClassName,o,"genesys-mxg-frame-transition"],addClass:[n.sConversationClassName]}}))})),m()(n,"openArticle",(function(e){var t,r,o=e.data,a=e.showProgress;n.knowledge.articleData=o||{},n.slideDirection="backward",n.bShowProgress=a,n.props.dispatch((r=(((t=e)||{}).data||{}).documentId,{type:"OPEN_KNOWLEDGE_ARTICLE",route:t.route,documentId:r||""}))})),m()(n,"openCategory",(function(e){var t,r=e.data,o=e.route,a=(e.showProgress,o.split(".")),i=$e()(a,3);n.app=i[0],n.view=i[1],n.subView=i[2],n.route="".concat(n.app,".").concat(n.view),n.knowledge.categoryData[n.subView]=r||{},n.slideDirection="forward",n.bShowProgress=n.showProgress,n.props.dispatch({type:"OPEN_KNOWLEDGE_CATEGORY",route:(t=e).route,categoryData:t.data})})),m()(n,"showProgress",(function(){n.setState((function(){return{showArticleProgress:!0}}))})),m()(n,"stopProgress",(function(){n.setState((function(){return{showArticleProgress:!1}}))})),m()(n,"showCategoriesProgress",(function(){n.setState((function(){return{showCategoriesProgress:!0}}))})),m()(n,"stopCategoriesProgress",(function(){n.setState((function(){return{showCategoriesProgress:!1}}))})),m()(n,"openSearch",(function(e){n.sOpeningView="search",n.slideDirection="forward",n.props.dispatch(ot(e))})),m()(n,"openCobrowseConnect",(function(){n.slideDirection="forward",n.props.dispatch(rt.openCobrowseConnect({route:"cobrowse.connect"}))})),m()(n,"openCobrowseSharing",(function(){n.slideDirection="forward",n.props.dispatch(rt.cobrowseShare({route:"cobrowse.sharing",cobrowseConnectStatus:"sharing"}))})),m()(n,"openConversation",(function(){n.sOpeningView="conversations",n.props.dispatch(rt.openConversations({route:"conversations.conversations"}))})),m()(n,"startNewConversation",(function(){((((n.props.config||{}).apps||{}).conversations||{}).conversationDisconnect||{}).enabled&&(n.props.fConversationDisconnected(!1),n.props.dispatch(it.resetConversation()),n.openConversation())})),m()(n,"setMarkdown",function(){var e=Qe()(tt.a.mark((function e(t){var r,o,a,i;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props||{},o=r.awaitMarkdown,e.next=3,o(t);case 3:n.markdownMessages=e.sent,a=n.state||{},i=a.newMessage,n.markdownMessages.length&&n.markdownMessages[0].timestamp!==i.timestamp?(n.props.setMarkdownMessages(n.markdownMessages),n.setState((function(){return{newMessage:n.markdownMessages[0]}}))):n.setState((function(){return{newMessage:{}}}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m()(n,"setStorage",(function(e,t,r){n.oMessengerPlugin.command(n.storage+".set",{name:e,value:t,expireInSecs:r})})),m()(n,"removeStorage",(function(e){n.oMessengerPlugin.command(n.storage+".remove",{name:e})})),m()(n,"verifyStorageAndRemove",(function(){var e=n.knowledgeStoragePrefix+n.subKnowledgeArticleIdStorage;n.oMessengerPlugin.command(n.storage+".get",{name:e}).then((function(t){var r=t.split(":"),o=$e()(r,2),a=o[0],i=o[1];a&&"string"==typeof a&&!i&&n.removeStorage(e)}))})),m()(n,"handleConversationCardKeyDown",(function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),n.openConversation())})),m()(n,"handleKnowledgeCardKeyDown",(function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),n.openSearch({route:"knowledge.search"}))})),m()(n,"handleCobrowseCardClick",(function(e){var t=((n.props||{}).messengerStore||{}).cobrowseConnectStatus;t&&"sharing"===t?n.openCobrowseSharing():n.openCobrowseConnect()})),m()(n,"handleCobrowseCardKeyDown",(function(e){var t=((n.props||{}).messengerStore||{}).cobrowseConnectStatus;13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),t&&"sharing"===t?n.openCobrowseSharing():n.openCobrowseConnect())}));var r=e||{},a=r.config,i=r.plugins,s=r.knowledgeEnabled,c=r.knowledge,l=r.conversationStore,u=a||{},d=u.deploymentId,p=u.appType;(l||{}).status;return n.sPluginName="Home",n.knowledgeStoragePrefix=":gcmk",n.subKnowledgeArticleIdStorage="aid",n.oMessengerPlugin=i.Messenger,n.oHome="",n.route="",n.bShowProgress=!1,n.sOpeningView="",n.knowledge={articleData:{},categoryData:{}},n.slideDirection=n.props.slideDirection,n.state={showArticleProgress:!1,showCategoriesProgress:!1,homeScreenHeight:0,newMessage:{}},n.homeScreenCardHeight=In.x,n.storage=Object(At.q)(a),n.markdownMessages=[],n.bActiveCobrowseVoiceSession=!1,n.cobrowseVoiceCardRef=Object(f.createRef)(),d&&(n.knowledgeStoragePrefix=d+n.knowledgeStoragePrefix),n.checkCobrowseActiveSession().then((function(){s&&c&&(!i.KnowledgeService&&p&&Object(rr.initKnowledgeServicePlugin)(a).then((function(e){n.props.setPlugin("KnowledgeService",e)})),n.oMessengerPlugin.command(n.storage+".get",{name:n.knowledgeStoragePrefix+n.subKnowledgeArticleIdStorage}).then((function(e){var t,r=e.split(":"),o=$e()(r,2),a=o[0],i=o[1];if(a&&"string"==typeof a&&!i&&n.route&&"knowledge.article"!==n.route){n.route="knowledge.article";var s=n.route.split("."),c=$e()(s,3);n.app=c[0],n.view=c[1],n.subView=c[2],n.props.dispatch({type:"OPEN_KNOWLEDGE_ARTICLE_DIRECT",route:(t={route:"knowledge.article",documentId:a}).route,documentId:t.documentId})}})))})),n}return p()(t,e),i()(t,[{key:"checkCobrowseActiveSession",value:function(){var e=this;return new Promise((function(t,n){var r=((e.props||{}).config||{}).cobrowse||{},o=r.enabled,a=r.channels;if(!!(o&&a&&a.length)&&a.includes("voice")){var i=e.props||{},s=i.route,c=i.cobrowseActiveSession,l=(i.messengerStore||{}).route;!s&&c?e.props.dispatch(rt.setCobrowseConnectStatus({cobrowseConnectStatus:"sharing"})):c||(l&&"cobrowse.sharing"===l?e.props.dispatch(rt.navigateToHome({route:"conversations.home",cobrowseConnectStatus:"ended"})):e.props.dispatch(rt.setCobrowseConnectStatus({cobrowseConnectStatus:""}))),t()}else t()}))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.oPlugins,r=t.route,o=t.bTablet;if(n&&n[this.sPluginName]?this.oHome=n[this.sPluginName]:Genesys("registerPlugin",this.sPluginName,(function(t){e.oHome=t,e.oHome.ready()})),this.route&&(!Object(At.w)()&&!Object(At.t)()||o)&&setTimeout((function(){e.setHomeDimensions()}),150),r)switch(r){case"conversations.conversations":this.openConversation(),this.props.resetRoute();break;case"knowledge.search":this.openSearch({route:r}),this.props.resetRoute();break;case"cobrowse.connect":this.openCobrowseConnect(),this.props.resetRoute();break;case"cobrowse.sharing":this.openCobrowseSharing(),this.props.resetRoute()}}},{key:"componentDidUpdate",value:function(){var e=this;!this.route||Object(At.w)()||Object(At.t)()||setTimeout((function(){e.setHomeDimensions()}),150)}},{key:"componentWillUnmount",value:function(){this.props.setPlugin(this.sPluginName,this.oHome),this.sOpeningView||this.props.dispatch(it.closed()),this.sOpeningView=""}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=e.conversationStore,o=e.markdownMessages,a=e.aFocusMngtMsgIds,i=r||{},s=i.messages,c=i.status,l=i.sendingMessage,u=(t||{}).newMessage,d=(this.state||{}).newMessage,p=this.props||{},g=p.setMarkdownMessages,m=p.awaitMarkdown,f=p.setFocusMngtMsgIds,h=function(e){var t=(e||{}).propertyName,r=Object(ke.c)(n.markdownMessages,s,t);return r&&r.length?(n.setMarkdown(r),!1):!function(e,t){return!(!t||!e||t.timestamp!=e.timestamp)}(d,u)},b=function(){n.markdownMessages=[],m([]),g([]),f([])};if(s&&s.length){if(this.markdownMessages.length||o.length!==s.length||(this.markdownMessages=o),s.length<this.markdownMessages.length){var v=Object(ke.c)(s,this.markdownMessages,"timestamp");v&&v.length&&b()}return"messagesUpdated"===c&&s.length===this.markdownMessages.length?h({propertyName:"updatedTime"}):s.length===this.markdownMessages.length&&!l||h({propertyName:"timestamp"})}return!(!s.length&&(this.markdownMessages.length||o.length||a.length))||(b(),!0)}},{key:"updateView",value:function(){var e,t=this.props,n=t.messengerStore,r=t.route,o=t.knowledgeStore,a=t.knowledge,i=t.resetKnowledgeState,s=(n||{}).route.split("."),c=$e()(s,3);(this.app=c[0],this.view=c[1],this.subView=c[2],this.route="".concat(this.app,".").concat(this.view),this.route&&"knowledge.article"===this.route&&r&&("knowledge.search"===r?this.route="knowledge.search":"conversations.conversations"===r?this.route="conversations.conversations":"cobrowse.connect"===r?this.route="cobrowse.connect":"cobrowse.sharing"===r&&(this.route="cobrowse.sharing")),this.route&&"conversations.home"===this.route)&&(!!(null!=o&&o.inputValue||null!=a&&null!==(e=a.results)&&void 0!==e&&e.searchQuery)&&i())}},{key:"render",value:function(){var e=this,t=this.props,n=t.knowledgeEnabled,r=t.knowledge,o=t.cobrowseVoiceEnabled,a=t.showProgress,i=t.config,s=t.i18n,c=t.setKnowledgeStore,l=t.knowledgeStore,u=t.messengerStore,d=t.conversationStore,p=t.setKnowledgePlugin,g=t.plugins,m=t.onError,b=t.knowledgeWrapperRef,v=t.handleSearchContentNavigation,y=t.homeScreenRef,w=t.color,x=t.Toaster,S=t.oPlugins,O=t.bToaster,C=(t.markdownMessages,t.setMarkdownMessages,t.onHeaderDeleteButtonClick),E=t.bConversationApp,k=t.bConversationDisconnected,T=this.state,R=T.showArticleProgress,j=T.showCategoriesProgress,D=this.knowledge||{},P=D.articleData,I=D.categoryData,M=(r||{}).results,A=!!Object.keys(M).length,N=((i||{}).apps||{}).conversations,F=((N||{}).conversationDisconnect||{}).type,L=(N||{}).humanize,B=(L||{}).enabled,H=(u||{}).cobrowseConnectStatus,K=(d||{}).messengerCleared,z={bToasterCard:!1,bConversationCard:!1,bKnowledgeCard:!1,bCobrowseCard:!1};this.updateView();var U="",q="";"knowledge.search"!==this.route&&"knowledge.article"!==this.route&&"knowledge.category"!==this.route||(U="mxg-app",q=" mxg-app-body"),"cobrowse.connect"!==this.route&&"cobrowse.sharing"!==this.route||(U="mxg-cobrowse-voice-app",q=" mxg-app-body");var V=((s||{}).knowledge||{}).ariaLoading,W=this.route&&("knowledge.search"===this.route||"knowledge.category"===this.route||"knowledge.article"===this.route);return O?z.bToasterCard=!0:E?z.bConversationCard=!0:n?z.bKnowledgeCard=!0:o&&(z.bCobrowseCard=!0),H&&"sharing"==H&&z&&z.bCobrowseCard&&this.cobrowseVoiceCardRef&&this.cobrowseVoiceCardRef.current&&this.cobrowseVoiceCardRef.current.focusVisible(),h.a.createElement(Nt.a,{direction:"right",in:!0,appear:null!==this.slideDirection,mountOnEnter:!0,unmountOnExit:!0},h.a.createElement(an.a,{elevation:0,className:"mxg-home".concat(q),sx:function(e){return ar(ar({},{"&.Cx-MuiPaper-root":{position:"relative",flex:"1 1 0%",zIndex:"9999","&:focus-visible":{outline:"none"}},"&.mxg-app-body":{zIndex:"999"}}),{},{left:"0"})},square:!0,role:"main",ref:y,tabIndex:W?0:-1,"aria-label":"HomeScreen"},h.a.createElement(fr,{className:U,props:this.props},function(){switch(e.route){case"knowledge.category":case"knowledge.search":return e.verifyStorageAndRemove(),h.a.createElement("div",null,h.a.createElement(x,{plugin:S.Toaster,config:i}),h.a.createElement("div",{className:"mxg-knowledge-container"},h.a.createElement(Nt.a,{direction:"forward"===e.slideDirection?"left":"right",in:!0,appear:!0},h.a.createElement("div",{className:"mxg-knowledge-wrapper",ref:b,onKeyDown:function(e){return v(e)}},n&&(a||j)&&h.a.createElement(sn.a,{variant:"query","aria-busy":"true",role:"alert","aria-label":V}),!A&&h.a.isValidElement(h.a.createElement(mr,null))&&h.a.createElement(mr,{config:i,i18n:s.knowledge,setStore:c,showProgress:e.showCategoriesProgress,stopProgress:e.stopCategoriesProgress,data:I[e.subView]&&Object.keys(I[e.subView]).length?I[e.subView]:u.categoryData&&u.categoryData[e.subView],store:l||{},openCategory:e.openCategory,openArticle:e.openArticle,onError:m}),n&&A&&h.a.createElement(pr,{openArticle:e.openArticle,data:M,config:i,setStore:c,store:l||{},setPlugin:p,plugin:g.Knowledge||"",i18n:s.knowledge,onError:m})))));case"knowledge.article":if(e.knowledge&&P&&Object.keys(P).length){var t=P.documentId;t&&!K&&e.setStorage(e.knowledgeStoragePrefix+e.subKnowledgeArticleIdStorage,t,In.p)}return h.a.createElement("div",null,h.a.createElement(x,{plugin:S.Toaster,config:i}),h.a.createElement(Nt.a,{direction:"left",in:!0,appear:!0,className:"mxg-knowledge-container"},h.a.createElement("div",{ref:b,onKeyDown:function(e){return v(e)}},n&&(e.bShowProgress||R)&&h.a.createElement(sn.a,{variant:"query","aria-busy":"true",role:"alert","aria-label":V}),n&&h.a.createElement(gr,{data:P&&Object.keys(P).length?P:{documentId:u.documentId},showProgress:e.showProgress,stopProgress:e.stopProgress,openArticle:e.openArticle,config:i,i18n:s.knowledge,setStore:c,store:l||{},setPlugin:p,plugin:g.Knowledge||"",onError:m}))));case"cobrowse.connect":case"cobrowse.sharing":return e.verifyStorageAndRemove(),h.a.createElement("div",null,h.a.createElement(x,{plugin:S.Toaster,config:i}),h.a.createElement("div",{className:"mxg-cobrowse-voice-container"},h.a.createElement(nr,{cobrowseVoiceEnabled:o,i18n:s.cobrowse,config:i,route:e.route,slideDirection:e.slideDirection})));default:return e.verifyStorageAndRemove(),h.a.createElement(Nt.a,{direction:"right",in:!0,appear:null!==e.slideDirection,timeout:{appear:200,enter:200,exit:0}},h.a.createElement(bn.a,{sx:ar({},hr)},O&&h.a.createElement(vn.a,{component:"li",role:O?"listitem":"none",tabIndex:O?0:-1,className:"mxg-toaster-listItem","aria-hidden":!O},h.a.createElement("div",{style:{width:"100%"}},h.a.createElement(x,{plugin:S.Toaster,config:i,autoFocus:z.bToasterCard}))),E&&h.a.createElement(vn.a,{component:"li",role:"listitem",tabIndex:0},h.a.createElement(Ln,{openConversation:e.openConversation,startNewConversation:e.startNewConversation,config:i,plugin:e.oHome||"",i18n:s.conversations,conversationStore:d,humanizeConfig:B?L:{},disconnectType:F,color:w,handleConversationCardKeyDown:e.handleConversationCardKeyDown,markdownMessages:e.markdownMessages,onHeaderDeleteButtonClick:C,bConversationDisconnected:k,autoFocus:z.bConversationCard})),n&&h.a.isValidElement(h.a.createElement(dr,null))&&h.a.createElement(f.Suspense,{fallback:h.a.createElement("div",null)},h.a.createElement(vn.a,{button:!0,component:"li",role:"listitem",tabIndex:0,onKeyDown:e.handleKnowledgeCardKeyDown},h.a.createElement(dr,{openSearch:e.openSearch,config:i,setStore:c,store:l||{},setPlugin:p,plugin:g.Knowledge||"",i18n:s.knowledge,muiCardProps:{elevation:2,raised:!0},autoFocus:z.bKnowledgeCard}))),o&&h.a.createElement(vn.a,{button:!0,action:e.cobrowseVoiceCardRef,component:"li",role:"listitem",tabIndex:0,onClick:e.handleCobrowseCardClick,onKeyDown:e.handleCobrowseCardKeyDown},h.a.createElement(qn,{openCobrowseConnect:e.openCobrowseConnect,config:i,i18n:s.cobrowse,muiCardProps:{elevation:2,raised:!0},cobrowseConnectStatus:H,color:w,autoFocus:z.bCobrowseCard}))))}}())))}}])}(h.a.Component);br.propTypes={knowledgeEnabled:v.a.bool,knowledge:v.a.object,cobrowseVoiceEnabled:v.a.bool,showProgress:v.a.bool,config:v.a.object,setKnowledgePlugin:v.a.func.isRequired,setKnowledgeStore:v.a.func.isRequired,knowledgeStore:v.a.object.isRequired,oPlugins:v.a.object.isRequired,setPlugin:v.a.func.isRequired,plugins:v.a.object.isRequired,i18n:v.a.object.isRequired,resetRoute:v.a.func.isRequired,bTablet:v.a.bool,Toaster:v.a.elementType.isRequired};var vr=oe((function(e){return{messengerStore:e.messengerStore,conversationStore:e.conversationStore}}))(function(e){return function(t){return h.a.createElement(Mt.a.Consumer,null,(function(n){var r=n.oPlugins,o=n.setPlugin,a=n.route,i=n.resetRoute,s=n.markdownMessages,c=n.setMarkdownMessages,l=n.aFocusMngtMsgIds,u=n.setFocusMngtMsgIds,d=n.iHomeScreenHeight,p=n.setHomeScreenHeight,g=n.bToaster,m=n.iToasterHeight,f=n.onHeaderDeleteButtonClick;return h.a.createElement(e,Ze()({},t,{oPlugins:r,setPlugin:o,route:a,resetRoute:i,iHomeScreenHeight:d,setHomeScreenHeight:p,markdownMessages:s,setMarkdownMessages:c,aFocusMngtMsgIds:l,setFocusMngtMsgIds:u,bToaster:g,iToasterHeight:m,onHeaderDeleteButtonClick:f}))}))}}(br)),yr=n(26),wr=n.n(yr),xr=n(434),Sr=function(e){return h.a.createElement(xr.a,Ze()({sx:function(e){return{"&.Cx-MuiAlert-filledError":{justifyContent:"center",zIndex:"1",position:"relative",width:"100%",padding:"0px",marginBottom:"16px"},"&.Cx-MuiAlert-filledWarning":{justifyContent:"center",zIndex:"1",position:"relative",width:"100%",padding:"0px",marginBottom:"16px"},"&.MuiAlert-filledInfo":{justifyContent:"center",zIndex:"1",position:"relative",width:"100%",padding:"0px",marginBottom:"16px"}}},elevation:6,variant:"filled"},e))},Or=(n(688),n(613)),Cr=n.n(Or),Er=n(412),kr=n(44),Tr=n(280),Rr=n(664),jr=n(663),Dr=n(662),Pr=n(666),Ir=n(665),Mr=n(352),Ar=n(610),Nr=n.n(Ar);function Fr(e,t,n){return t=u()(t),c()(e,Lr()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function Lr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lr=function(){return!!e})()}var Br=h.a.createRef,Hr=Object(It.a)("ul")((function(e){e.theme;return{listStyle:"none",position:"relative",clear:"both",margin:"0",padding:"10px 0px",display:"inline-flex",flexFlow:"row-reverse",flexWrap:"wrap-reverse",float:"right",justifyContent:"flex-start",maxWidth:"84%","& li":{padding:"4px",maxWidth:"100%"}}})),Kr=!1,zr=function(e){function t(e){var n;return o()(this,t),n=Fr(this,t,[e]),m()(n,"setIsOverflow",(function(){var e=n.props.reply;if(n.setState({isOverflown:!1}),n.chipRef.current){var t=e.imageUrl?n.chipRef.current.children[1]:n.chipRef.current.children[0];t.scrollWidth>t.offsetWidth&&n.setState({isOverflown:!0})}})),n.state={isOverflown:!1,disableQuickReply:!1},n.chipRef=Br(),n}return p()(t,e),i()(t,[{key:"handleOnline",value:function(){var e=((this.props||{}).oCallbacks||{}).resetSelectedReplyId;e&&e(),this.setState({disableQuickReply:!1})}},{key:"handleOffline",value:function(){this.setState({disableQuickReply:!0})}},{key:"componentDidMount",value:function(){var e=this;this.setIsOverflow(),window.addEventListener("orientationchange",this.setIsOverflow),window.addEventListener("resize",this.setIsOverflow),window.addEventListener("online",(function(){e.handleOnline()})),window.addEventListener("offline",(function(){e.handleOffline()}))}},{key:"componentWillUnmount",value:function(){var e=this;window.removeEventListener("orientationchange",this.setIsOverflow),window.removeEventListener("resize",this.setIsOverflow),window.removeEventListener("online",(function(){e.handleOnline()})),window.removeEventListener("offline",(function(){e.handleOffline()}))}},{key:"render",value:function(){var e=this.props,t=e.removeFocus,n=e.reply,r=e.i18n,o=e.containerRef,a=e.oCallbacks,i=e.selectedReplyId,s=a.handleSelection,c=this.state,l=c.isOverflown,u=c.disableQuickReply,d=(window.navigator||{}).onLine,p=u||0==d||!1;return h.a.createElement(ct.a,{componentsProps:{tooltip:{sx:{width:"93%",maxHeight:"100px",overflowY:"auto",margin:"10px 0"}}},title:n.text,PopperProps:{container:o.current},disableHoverListener:!l,disableFocusListener:!l,disableTouchListener:!l},h.a.createElement(Mr.a,{sx:{"& .Cx-MuiAvatar-root":{width:"24px",height:"24px",marginLeft:"4px",marginRight:"-6px"},"&.Cx-MuiChip-outlined":{height:"100%",maxWidth:"100%",padding:"6px 0px 0px 4px"},"&.Cx-MuiChip-root":{float:"right",height:"100%",maxWidth:"100%",padding:"6px 0px"}},ref:this.chipRef,variant:i&&i===n.id?"filled":"outlined",clickable:!i,avatar:n.imageUrl?h.a.createElement(mt.a,{src:n.imageUrl,alt:""},h.a.createElement(Nr.a,null)):null,label:h.a.createElement("span",{dir:"auto"},n.text),onClick:function(){return s(n,u)},"aria-label":n.text+". - "+r.ariaQuickReply,tabIndex:t?-1:0,disabled:p}))}}])}(h.a.Component),Ur=function(e){function t(e){var n;return o()(this,t),n=Fr(this,t,[e]),m()(n,"resetSelectedReplyId",(function(){n.selectedReplyId=""})),m()(n,"handleSelection",(function(e,t){var r=n.props.onReplySelection,o=(window.navigator||{}).onLine;e&&!n.selectedReplyId&&o&&!t&&(n.selectedReplyId=e.id,r({type:"quickReply",postback:e}))})),m()(n,"removeQuickReply",(function(){n.setState({removeMe:!0})})),n.selectedReplyId="",n.state={removeMe:!1},n.handleSelection=n.handleSelection.bind(n),n.removeQuickReply=n.removeQuickReply.bind(n),n.resetSelectedReplyId=n.resetSelectedReplyId.bind(n),n}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.mode,r=t.data,o=this.state.removeMe;return"advanced"===n&&(Kr=!0),!r||!r.length||this.selectedReplyId&&!Kr||o?null:h.a.createElement(Hr,null,r.map((function(t,n){return h.a.createElement("li",{"aria-posinset":n+1,key:t.id||n},h.a.createElement(zr,Ze()({selectedReplyId:e.selectedReplyId,reply:t,oCallbacks:{handleSelection:e.handleSelection,resetSelectedReplyId:e.resetSelectedReplyId}},e.props)))})).reverse())}}])}(h.a.Component);Ur.propTypes={mode:v.a.string,data:v.a.array.isRequired,i18n:v.a.object.isRequired,onReplySelection:v.a.func.isRequired,containerRef:v.a.object.isRequired};var qr=Ur,Vr=n(408),Wr=n(411),_r=n(409);function Gr(e,t,n){return t=u()(t),c()(e,Yr()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function Yr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yr=function(){return!!e})()}var $r=Object(At.k)().browser||"",Jr=Object(It.a)(yn.a)((function(e){var t=e.theme;return{width:"230px",marginTop:"10px",border:"1px solid #DEE4ED",borderRadius:"0 10px 10px 10px",boxShadow:"none",whiteSpace:"pre-wrap",wordBreak:"break-word",wordWrap:"break-word",overflowWrap:"break-word",display:"flex",flexDirection:"column-reverse","&:focus-within":{outlineStyle:"Firefox"==$r?"solid":"auto",outlineWidth:"1px",outlineColor:"Firefox"==$r?"light"==t.palette.type?t.palette.getContrastText(t.palette.background.default):"inherit":"-webkit-focus-ring-color"},"&:-moz-focusring":{outlineColor:function(){return"light"==t.palette.type?t.palette.getContrastText(t.palette.background.default):"inherit"},outlineStyle:"solid"},"&.mxg-card-first":{borderRadius:"0 0px 0px 10px !important"},"&.mxg-card-last":{borderRadius:"0 10px 10px 0px !important"},"&.mxg-card-carousel":{borderRadius:"0!important"},"& .Cx-MuiCardMedia-media":{borderRadius:"0 10px 0px 0px",maxWidth:"100%",maxHeight:"100%"},"& .mxg-media-last":{borderRadius:"0 10px 0px 0px !important"},"& .mxg-media-carousel":{borderRadius:"0!important"},"& .Cx-MuiCardMedia-img":{height:"117px",objectFit:"cover"},"& .Cx-MuiButton-contained":{margin:"0",boxShadow:"none",display:"inline-block",maxWidth:"100%",lineHeight:"1.2",height:"30px",fontSize:"0.875rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"& .Cx-MuiTypography-subtitle2":{fontSize:"0.875rem",fontWeight:"600"},"& .Cx-MuiTypography-body2":{fontSize:"0.875rem"},"& .Cx-MuiCardContent-root":{display:"flex",flexDirection:"column-reverse",padding:"8px 12px"},"& .Cx-MuiCardActions-root":{padding:"0px 12px 4px 12px",justifyContent:"center","&:first-of-type":{paddingBottom:"8px"}},"& .mxg-card-button":{display:"flex",flexDirection:"column-reverse",flex:"1"}}})),Qr=function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||e.target.click()},Xr=function(e){function t(e){var n;return o()(this,t),n=Gr(this,t,[e]),m()(n,"onImageLoaded",(function(){n.setState({loaded:!0})})),m()(n,"onImageLoadError",(function(){n.setState({loaded:!1})})),n.state={loaded:!1,bEnableScrollDown:!1},n.imageRef=Object(f.createRef)(),n.mediaStyles="",n}return p()(t,e),i()(t,[{key:"componentDidUpdate",value:function(){var e=this.state,t=e.loaded,n=e.bEnableScrollDown,r=this.props.onContentAdded;t&&!n&&this.imageRef.current&&this.imageRef.current.complete&&this.imageRef.current.naturalWidth>0&&this.imageRef.current.naturalHeight>0&&(this.setState({bEnableScrollDown:!0}),r(t))}},{key:"render",value:function(){var e=this.props,t=e.removeFocus,n=e.imageUrl,r=e.actions,o=e.i18n,a=e.id,i=e.bCarousel,s=e.bLastSlide,c=(r||{}).url,l=this.state.loaded;return this.mediaStyles=i?s?"mxg-media-last":"mxg-media-carousel":"",c?h.a.createElement(Vr.a,{component:"a",href:c,target:"_blank",tabIndex:t?-1:0,"aria-label":o.ariaImageLabel||"",onKeyPress:function(e){Qr(e)},id:"cardImage_"+a},!l&&h.a.createElement(Tr.a,{variant:"rectangular",height:118}),h.a.createElement(Wr.a,{className:this.mediaStyles,src:n,alt:"",component:"img",onLoad:this.onImageLoaded,onError:this.onImageLoadError,style:l?{}:{display:"none"},ref:this.imageRef})):h.a.createElement("div",{id:"cardImage_"+a},!l&&h.a.createElement(Tr.a,{variant:"rectangular",height:118}),h.a.createElement(Wr.a,{className:this.mediaStyles,src:n,alt:"",component:"img",onLoad:this.onImageLoaded,onError:this.onImageLoadError,style:l?{}:{display:"none"},tabIndex:t?-1:0,"aria-label":o.ariaImageLabel||"",ref:this.imageRef}))}}])}(h.a.Component),Zr=function(e){var t=e.text,n=(e.i18n,e.actions),r=e.removeFocus,o=e.maxTextLength,a=e.containerRef,i=e.id,s=Object(At.z)(t,o),c=s.text,l=s.truncated,u=(n||{}).url;return h.a.createElement(ct.a,{componentsProps:{tooltip:{sx:{width:"93%",maxHeight:"100px",overflowY:"auto",margin:"10px 0"}}},title:t,PopperProps:{container:a.current},disableHoverListener:!l,disableFocusListener:!l,disableTouchListener:!l},h.a.createElement("div",{id:"cardTitle_"+i},u?h.a.createElement(Vr.a,{component:"a",href:u,target:"_blank",tabIndex:r?-1:0,"aria-label":t,onKeyPress:function(e){Qr(e)}},h.a.createElement(ut.a,{variant:"subtitle2",gutterBottom:!0,component:"h2",dir:"auto"},c)):h.a.createElement(ut.a,{variant:"subtitle2",gutterBottom:!0,component:"h2",dir:"auto",tabIndex:r?-1:0,"aria-label":t},c)))},eo=function(e){var t=e.text,n=(e.i18n,e.actions),r=e.removeFocus,o=e.maxTextLength,a=e.containerRef,i=e.id,s=(n||{}).url,c=Object(At.z)(t,o),l=c.text,u=c.truncated;return h.a.createElement(ct.a,{componentsProps:{tooltip:{sx:{width:"93%",maxHeight:"100px",overflowY:"auto",margin:"10px 0"}}},title:t,PopperProps:{container:a.current},disableHoverListener:!u,disableFocusListener:!u,disableTouchListener:!u},h.a.createElement("div",{id:"cardDescription_"+i},s?h.a.createElement(Vr.a,{component:"a",href:s,target:"_blank",tabIndex:r?-1:0,"aria-label":t,onKeyPress:function(e){Qr(e)}},h.a.createElement(ut.a,{dir:"auto",variant:"body2"},l)):h.a.createElement(ut.a,{dir:"auto",variant:"body2",component:"p",role:"text",tabIndex:r?-1:0,"aria-label":t},l)))},to=function(e){var t=e.button,n=e.index,r=e.i18n,o=e.maxButtonsLimit,a=e.onReplySelection,i=e.cardActionLabel,s=t.title,c=t.actions,l=t.type,u=t.text,d=c||{},p=d.url,g=d.textback,m=p||"Link"==l||!1,b=g&&null!==g||"Postback"==l||!1,v=Object(f.createRef)(),y="";return m?y=r.ariaCardActionLink:b&&(y=i||r.ariaCardActionPostback),n<o?h.a.createElement(no,Ze()({key:"button-"+n,text:s||u,ariaLabel:y,actions:c||t,bLink:m,bTextBack:b,onReplySelection:a,buttonRef:v},e)):null},no=function(e){function t(e){var n;return o()(this,t),n=Gr(this,t,[e]),m()(n,"setIsOverflow",(function(){var e=n.props.buttonRef;e.current&&(n.setState({isOverflown:!1}),e.current.scrollWidth>e.current.offsetWidth&&n.setState({isOverflown:!0}))})),n.state={isOverflown:!1,disableCardButton:!1},n}return p()(t,e),i()(t,[{key:"handleOnline",value:function(){this.setState({disableCardButton:!1})}},{key:"handleOffline",value:function(){this.setState({disableCardButton:!0})}},{key:"componentDidMount",value:function(){var e=this;this.setIsOverflow(),window.addEventListener("orientationchange",this.setIsOverflow),window.addEventListener("resize",this.setIsOverflow),window.addEventListener("online",(function(){e.handleOnline()})),window.addEventListener("offline",(function(){e.handleOffline()}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("orientationchange",this.setIsOverflow),window.removeEventListener("resize",this.setIsOverflow),window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline)}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.ariaLabel,r=e.actions,o=e.removeFocus,a=e.bLink,i=e.bTextBack,s=e.onReplySelection,c=e.buttonRef,l=e.containerRef,u=e.color,d=e.disableButton,p=e.textBackType,g=this.state,m=g.isOverflown,f=g.disableCardButton,b=(window.navigator||{}).onLine,v=d||f||0==b||!1,y=function(){if(r&&Object.keys(r).length){var e=r||{},n=e.url,o=e.textback,c=e.payload;a?window.open(n,"_blank"):i&&function(e){var n=(window.navigator||{}).onLine;e&&n&&!f&&s({type:p||"card",postback:{text:t,payload:e}})}(o||c)}};return h.a.createElement(_r.a,{disableSpacing:!0},v?h.a.createElement(cn.a,{variant:"contained",size:"medium",dir:"auto",color:u,fullWidth:!0,tabIndex:o?-1:0,"aria-label":t,onClick:y,ref:c,disabled:v},t):h.a.createElement(ct.a,{componentsProps:{tooltip:{sx:{width:"93%",maxHeight:"100px",overflowY:"auto",margin:"10px 0"}}},title:t,PopperProps:{container:l.current},disableHoverListener:!m,disableFocusListener:!m,disableTouchListener:!m},h.a.createElement(cn.a,{variant:"contained",size:"medium",dir:"auto",color:u,fullWidth:!0,tabIndex:o?-1:0,"aria-label":t+". - "+n,onClick:y,ref:c,disabled:v},t)))}}])}(h.a.Component),ro=function(e){function t(e){var n;return o()(this,t),n=Gr(this,t,[e]),m()(n,"handleKeyDown",(function(e){var t=(n.props||{}).handleKeyboardNavigation;e&&t&&t(e)})),m()(n,"handleFocus",(function(e){var t=(n.props||{}).onFocus;e&&t&&t(e)})),m()(n,"setAriaLabel",(function(e){var t=n.props||{},r=t.enableScreenReaderContent,o=t.statusText,a=r||!1,i=(t.oCallbacks||{}).personaLabel,s="";return a&&i&&(s=i()+" "),e&&(s+=e),a&&o&&(s=s+" "+o),s})),n.maxTextLength=80,n.maxButtonsLimit=3,n.cardRef=Object(f.createRef)(),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleFocus=n.handleFocus.bind(n),n.cardStyles="",n}return p()(t,e),i()(t,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props||{},n=t.active,r=t.bEnableFocus,o=t.setFocusAndView,a=t.carouselRef;n&&this.cardRef.current&&r&&a.current&&(this.cardRef.current.focus(),setTimeout((function(){a.current.scrollTo(e.cardRef.current.offsetParent.offsetLeft-e.cardRef.current.offsetParent.offsetWidth/4,0)}),0),o(!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.removeFocus,o=t.oCallbacks,a=t.transcriptContainerRef,i=t.time,s=t.toolTipPlacement,c=t.enableToolTip,l=t.bFirstSlide,u=t.bLastSlide,d=t.bCarousel,p=t.showTimer,g=t.progress,m=t.toolTipStyles,f=c||!1,b=(o||{}).onTooltipOpen;this.cardStyles=d?l?"mxg-card-first":u?"mxg-card-last":"mxg-card-carousel":"";var v=n||{},y=v.id,w=v.title,x=v.description,S=v.imageUrl,O=v.actions,C=v.buttons;return w&&null!==w?h.a.createElement(ct.a,{componentsProps:{tooltip:{sx:function(e){return m(e)}},popper:{sx:{zIndex:0}}},disableInteractive:!0,enterDelay:500,title:i||" ",disableFocusListener:!f,disableHoverListener:!f,disableTouchListener:!f,PopperProps:{container:a&&a.current},placement:s||"right-start",onOpen:function(e){return b?b(e):""}},h.a.createElement(Jr,{role:"region",className:this.cardStyles,ref:this.cardRef,tabIndex:r?-1:0,"aria-label":this.setAriaLabel(w),onKeyDown:function(t){return e.handleKeyDown(t)},onFocus:function(t){return e.handleFocus(t)}},p&&h.a.createElement(sn.a,{sx:function(e){return function(e){return{"& .Cx-MuiLinearProgress-barColorPrimary":{backgroundColor:e.palette.primary.main},"&.Cx-MuiLinearProgress-colorPrimary":{backgroundColor:e.palette.background.paper}}}(e)},variant:"determinate",value:g||0}),h.a.createElement("div",{id:"cardButtons_"+y,className:"mxg-card-button"},C&&C.map((function(t,n){return h.a.createElement(to,Ze()({key:n,button:t,index:n,maxButtonsLimit:e.maxButtonsLimit},e.props))})).reverse()),h.a.createElement(wn.a,null,x&&h.a.createElement(eo,Ze()({text:x,actions:O,id:y,maxTextLength:this.maxTextLength},this.props)),w&&h.a.createElement(Zr,Ze()({text:w,actions:O,id:y,maxTextLength:this.maxTextLength},this.props))),S&&h.a.createElement(Xr,Ze()({imageUrl:S,actions:O},this.props,{id:y})))):null}}])}(h.a.Component);ro.propTypes={color:v.a.string,data:v.a.object.isRequired,i18n:v.a.object.isRequired,onReplySelection:v.a.func.isRequired,removeFocus:v.a.bool,containerRef:v.a.object.isRequired};var oo=ro,ao=n(672),io=n(611),so=n.n(io),co=n(612),lo=n.n(co);function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function go(e,t,n){return t=u()(t),c()(e,mo()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function mo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mo=function(){return!!e})()}var fo=Object(At.w)(),ho=Object(It.a)("div")((function(e){var t;e.theme;return{position:"relative",width:null!==(t=e.props.humanizeConfig)&&void 0!==t&&t.enabled?"87%":"100%","& .Cx-Carousel":{display:"flex",flexWrap:"nowrap",overflowX:fo?"auto":"hidden",clear:"both",position:"relative"},"& .Cx-Slide":{position:"relative",padding:"0 8px 5px 0px",display:"flex","&:first-of-type":{}},"&. Cx-SlideSingle":{maxWidth:"100%"}}})),bo=function(e){return{position:"absolute",borderRadius:"50%",top:"109px",zIndex:"1",background:function(){return e.palette.background.default},boxShadow:"0px 3px 1px -2px rgba(0 0 0 / 20%), 0px 2px 2px 0px rgba(0 0 0 / 14%), 0px 1px 5px 0px rgba(0 0 0 / 12%)",transform:"rtl"===e.direction?"scaleX(-1)":void 0}},vo=function(e){function t(e){var n;return o()(this,t),(n=go(this,t,[e])).maxSlideLimit=10,n}return p()(t,e),i()(t,[{key:"render",value:function(){return"Cards"===(this.props||{}).carouselType?h.a.createElement(yo,Ze()({maxSlideLimit:this.maxSlideLimit},this.props)):null}}])}(h.a.Component),yo=function(e){function t(e){var n;return o()(this,t),(n=go(this,t,[e])).totalSlides=0,n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){var e=this.props||{},t=e.data,n=e.setSlideCount,r=e.maxSlideLimit,o=(t||{}).cards.filter((function(e){return e.title&&e.title.toString()}));o&&o.length&&r&&(o.length>r?n(r):n(o.length))}},{key:"beforeRender",value:function(){var e=this.props||{},t=e.data,n=e.maxSlideLimit,r=(t||{}).cards.filter((function(e){return e.title&&e.title.toString()}));r&&r.length&&n&&(r.length>n?this.totalSlides=n:this.totalSlides=r.length)}},{key:"render",value:function(){var e=this,t=this.props||{},n=t.data,r=t.removeFocus,o=t.onReplySelection,a=t.conversationRef,i=t.onContentAdded,s=t.i18n,c=t.color,l=t.maxSlideLimit,u=t.setTabIndex,d=t.handleKeyboardNavigation,p=t.slideIndex,g=t.bEnableFocus,m=t.setAriaLabel,f=t.setFocusAndView,b=t.carouselRef,v=t.bOrientationChanged,y=t.onFocus,w=(n||{}).cards.filter((function(e){return e.title&&e.title.toString()}));return this.beforeRender(),w&&w.length?h.a.createElement("div",{ref:b,className:"Cx-Carousel",tabIndex:-1},w.map((function(t,n){return n<l?h.a.createElement("div",{key:n,className:w.length>1?"Cx-Slide"+(p==n?" active":""):"Cx-SlideSingle"},h.a.createElement(oo,{data:t,color:c,i18n:s,onReplySelection:o,removeFocus:r||u(n),containerRef:a,onContentAdded:i,handleKeyboardNavigation:d,onFocus:y,bFirstSlide:w.length>1&&0==n||!1,bLastSlide:w.length>1&&n==e.totalSlides-1||!1,active:p==n||!1,bEnableFocus:g,enableScreenReaderContent:w.length>1,statusText:m(n),setFocusAndView:f,bOrientationChanged:v,bCarousel:w.length>1,carouselRef:b})):null}))):null}}])}(h.a.Component),wo=function(e){function t(e){var n;return o()(this,t),n=go(this,t,[e]),m()(n,"handleLeftNavigation",(function(){var e=n.state.slideIndex;0!==e&&n.setState({slideIndex:e-1,bEnableFocus:!0})})),m()(n,"handleRightNavigation",(function(){var e=n.state,t=e.slideIndex;t!==e.totalSlides-1&&n.setState({slideIndex:t+1,bEnableFocus:!0})})),m()(n,"handleKeyboardNavigation",(function(e){var t=e||{},r=t.which,o=t.currentTarget,a=t.target,i=t.ctrlKey,s=t.shiftKey;switch(r||""){case 37:i||s||(e.preventDefault(),o&&o!==a?o.focus():n.handleLeftNavigation());break;case 39:i||s||(e.preventDefault(),o&&o!==a?o.focus():n.handleRightNavigation());break;case 9:if(s&&n.state.bFocussed){e.preventDefault();var c=o.querySelectorAll('*[tabindex="0"]');n.setState({bFocussed:!1}),o&&o==a&&c&&c[c.length-1].focus()}}})),m()(n,"onFocus",(function(e){if(fo){var t=(e||{}).currentTarget,r=t&&t.offsetParent.getBoundingClientRect();n.carouselRef.current&&r&&(r.left<0||r.right>(window.innerWidth||document.documentElement.clientWidth))&&setTimeout((function(){n.carouselRef.current&&n.carouselRef.current.scrollTo(t.offsetParent.offsetLeft-t.offsetParent.offsetWidth/4,0)}),0)}})),m()(n,"onKeyPress",(function(e,t){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(t&&("left"==t&&n.handleLeftNavigation(),"right"==t&&n.handleRightNavigation()),e.preventDefault())})),m()(n,"setTabIndex",(function(e){var t=n.state,r=t.bShowArrowButtons,o=t.slideIndex;return!(!r||o===e)})),m()(n,"setAriaLabel",(function(e){var t=n.props.i18n||{},r=t.ariaSlideActive,o=t.ariaTabKeyNavigation,a=t.ariaArrowKeyNavigation,i={"<%activeSlide%>":e+1,"<%totalSlides%>":n.state.totalSlides};if(r){for(var s in i)-1!==r.indexOf(s)&&(r=r.replace(s,i[s]));if(fo||(r=r+" "+o),n.state.totalSlides>1)return fo||(r=r+" "+a),r}})),m()(n,"setFocusAndView",(function(e){n.setState({bEnableFocus:e,bFocussed:!0})})),m()(n,"setSlideCount",(function(e){n.setState({totalSlides:e})})),m()(n,"setArrowButtonVisibility",(function(e){var t=(e||{}).type;n.carouselRef.current&&(n.setState({bShowArrowButtons:!1,bOrientationChanged:t&&"orientationchange"==t||!1}),n.carouselRef.current.scrollWidth>n.carouselRef.current.offsetWidth&&!fo&&n.setState({bShowArrowButtons:!0}))})),n.carouselRef=Object(f.createRef)(),n.state={slideIndex:0,bEnableFocus:!1,totalSlides:0,bShowArrowButtons:!1,bFocussed:!1,bOrientationChanged:!1},n.showLeftArrow=!1,n.showRightArrow=!1,n.setFocusAndView=n.setFocusAndView.bind(n),n.handleLeftNavigation=n.handleLeftNavigation.bind(n),n.handleRightNavigation=n.handleRightNavigation.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n.setTabIndex=n.setTabIndex.bind(n),n.setArrowButtonVisibility=n.setArrowButtonVisibility.bind(n),n.onFocus=n.onFocus.bind(n),n}return p()(t,e),i()(t,[{key:"componentDidUpdate",value:function(){var e=this;this.state.bOrientationChanged&&this.carouselRef.current&&fo&&(setTimeout((function(){e.carouselRef.current.scrollTo({left:e.carouselRef.current.children[0].offsetLeft-10})}),0),this.setState({bOrientationChanged:!1}))}},{key:"componentDidMount",value:function(){this.setArrowButtonVisibility(),window.addEventListener("orientationchange",this.setArrowButtonVisibility),window.addEventListener("resize",this.setArrowButtonVisibility)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("orientationchange",this.setArrowButtonVisibility),window.removeEventListener("resize",this.setArrowButtonVisibility)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.removeFocus,o=t.i18n,a=t.enableToolTip,i=t.time,s=t.oCallbacks,c=t.transcriptContainerRef,l=t.toolTipStyles,u=this.state||{},d=u.slideIndex,p=u.bEnableFocus,g=u.totalSlides,m=u.bShowArrowButtons,f=u.bOrientationChanged,b=a||!1,v=(s||{}).onTooltipOpen,y=o||{},w=y.ariaNextButton,x=y.ariaPreviousButton;this.showLeftArrow=d>0||!1,this.showRightArrow=d<g-1||!1;var S={width:"26px",height:"26px",display:"flex",alignItems:"inherit",justifyContent:"inherit"};return n&&Object.keys(n).length?h.a.createElement(ct.a,{componentsProps:{tooltip:{sx:function(e){return l(e)}},popper:{sx:{zIndex:0}}},disableInteractive:!0,enterDelay:500,title:i||" ",disableFocusListener:!b,disableHoverListener:!b,disableTouchListener:!b,PopperProps:{container:c&&c.current},placement:"top-end",onOpen:function(e){return v?v(e):""}},h.a.createElement(ho,{props:this.props},m&&this.showLeftArrow&&h.a.createElement(ao.a,{sx:function(e){return po(po({},bo(e)),{},{left:"0"})}},h.a.createElement(lt.a,{size:"small",className:"mxg-carousel-icon-button",sx:{padding:"3px"},children:h.a.createElement(so.a,{fontSize:"small","aria-hidden":"true",alt:"",sx:po({},S)}),"aria-label":x,onClick:this.handleLeftNavigation,onKeyPress:function(t){e.onKeyPress(t,"left")},disabled:r||!1,tabIndex:r?-1:0})),m&&this.showRightArrow&&h.a.createElement(ao.a,{sx:function(e){return po(po({},bo(e)),{},{right:"0"})}},h.a.createElement(lt.a,{size:"small",className:"mxg-carousel-icon-button",sx:{padding:"3px"},children:h.a.createElement(lo.a,{fontSize:"small","aria-hidden":"true",alt:"",sx:po({},S)}),"aria-label":w,onClick:this.handleRightNavigation,onKeyPress:function(t){e.onKeyPress(t,"right")},disabled:r||!1,tabIndex:r?-1:0})),h.a.createElement(vo,Ze()({slideIndex:d,bEnableFocus:p,setTabIndex:this.setTabIndex,handleKeyboardNavigation:this.handleKeyboardNavigation,setFocusAndView:this.setFocusAndView,setAriaLabel:this.setAriaLabel,setSlideCount:this.setSlideCount,carouselRef:this.carouselRef,bOrientationChanged:f,onFocus:this.onFocus},this.props)))):null}}])}(h.a.Component);wo.propTypes={data:v.a.object.isRequired,carouselType:v.a.string.isRequired,color:v.a.string,i18n:v.a.object.isRequired,onReplySelection:v.a.func.isRequired,removeFocus:v.a.bool,conversationRef:v.a.object.isRequired};var xo=wo,So=h.a.useRef,Oo=!1,Co=!1;function Eo(e){var t=So(),n=e.message,r=e.color,o=e.i18n,a=e.onSelection,i=e.options,s=e.newMessage,c=e.bDisableTabStop,l=e.disableFocus,u=e.conversationRef,d=e.onContentAdded,p=e.showAgentAvatar,g=e.showBotAvatar,f=e.humanizeConfig,b=e.participantName,v=e.time,y=e.transcriptContainerRef,w=e.oCallbacks,x=e.toolTipPlacement,S=n||{},O=S.quickReplies,C=S.contentType,E=S.card,k=S.carousel,T=S.carouselType,R=(f||{}).enabled,j=((i||{}).quickReply||{}).mode,D=c||l;j&&"advanced"===j&&(Co=!0);var P=function(e){Oo=!1,a(e)},I=Object(It.a)(ut.a)((function(e){return{color:e.theme.palette.common.mediumGrey,paddingLeft:"46px","& .ellipsis":{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",maxWidth:"65%"}}})),M=Object(It.a)("div")((function(){return{alignSelf:"flex-end",padding:"0px 6px 4px 0px",width:"40px",height:"40px"}})),A=Object(It.a)("span")((function(){return{display:R?"flex":""}})),N=function(e){return m()(m()({backgroundColor:e.palette.common.white,color:e.palette.common.mediumGrey,boxShadow:e.shadows[1],fontSize:"0.70rem",fontWeight:"400"},"boxShadow","none"),"padding","2px 8px")};switch(Oo&&s&&Object.keys(s).length&&n.id!==s.id&&!Co&&t.current&&t.current.removeQuickReply(),C){case"quick-replies":return Oo=!0,h.a.createElement(h.a.Fragment,null,R&&(p||g)&&h.a.createElement(I,{variant:"caption"},h.a.createElement("span",{className:"ellipsis"},b),h.a.createElement("span",{className:"ellipsis"},b&&h.a.createElement("span",null," · "),v)),h.a.createElement(qr,{ref:t,mode:j,data:O,color:r,i18n:o,onReplySelection:P,removeFocus:D,containerRef:u}));case"card":return h.a.createElement(A,null,R&&h.a.createElement(M,null,h.a.createElement(Pn,{humanizeConfig:f,message:n,showAgentAvatar:p,showBotAvatar:g})),h.a.createElement(oo,{data:E,color:r,i18n:o,onReplySelection:P,removeFocus:D,containerRef:u,onContentAdded:d,enableToolTip:!0,transcriptContainerRef:y,oCallbacks:w,toolTipPlacement:x,time:v,toolTipStyles:N}));case"carousel":return h.a.createElement(A,null,R&&h.a.createElement(M,null,h.a.createElement(Pn,{humanizeConfig:f,message:n,showAgentAvatar:p,showBotAvatar:g})),h.a.createElement(xo,Ze()({data:k,enableToolTip:!0,carouselType:T,onReplySelection:P,removeFocus:D,toolTipStyles:N},e)));default:return null}}function ko(e,t,n){return t=u()(t),c()(e,To()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function To(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(To=function(){return!!e})()}Eo.propTypes={message:v.a.object.isRequired,newMessage:v.a.object,color:v.a.string.isRequired,i18n:v.a.object.isRequired,options:v.a.object.isRequired,onSelection:v.a.func.isRequired};var Ro=function(e){function t(e){var n;return o()(this,t),n=ko(this,t,[e]),m()(n,"handleOffer",(function(){var e,t=n.props,r=t.message,o=t.getOfferState,a=t.bOfferAttended,i=t.bOfferExpired;if("cobrowse"==Object(At.p)(r)&&(e=r.coBrowse),e&&Object.keys(e).length){var s=e.type;if(s&&s===In.G){var c=Object(At.o)(r);o(e).then((function(e){var t=e||{},r=t.offerState,o=t.timeout,s=t.timestamp,l=n.props.getRejectedOffersSet();l&&l.size&&l.has(c)&&(r="failed"),r&&(r===In.b&&(n.props.bCobrowseInProgress?(r="failed",n.props.setRejectedOffer(c)):(n.bShowTimer=!0,o&&s&&(n.iTimeout=o,n.iOfferTimeOut=Math.ceil((new Date(o)-new Date(s))/1e3),n.iProgress=Math.ceil(n.iOfferTimeOut/60*100)))),n.setState({loaded:!0,offerState:r,attended:a,expired:"failed"===r||i,offerId:c,progress:n.iProgress}))})).catch((function(){}))}}})),m()(n,"setButtonText",(function(){var e=n.state||{},t=e.offerState,r=e.offerId,o=((n.props||{}).i18n||{}).offer;t&&r&&(n.offerMessage.buttons=[{title:o["".concat(t)]||"",actions:{textback:{sessionId:r}}}])})),m()(n,"onReplySelection",(function(e){var t=n.props,r=t.onSelection,o=t.acceptOffer,a=t.declineOffer,i=t.setRejectedOffer;if(e){var s=((e||{}).postback||{}).payload,c=s||{},l=c.type,u=c.sessionId;l===In.H?o(s).then((function(){r(e)})).catch((function(e){e&&(e.code&&(i(u),n.bShowTimer=!1,clearTimeout(n.iTimer),n.setState({expired:!0,offerState:"failed"})))})):l===In.J&&a(s).then((function(){r(e)}))}})),n.cobrowseRef=Object(f.createRef)(),n.state={loaded:!1,offerState:"",attended:!1,expired:!1,offerId:"",progress:100},n.bExpiredEvent=!1,n.bShowTimer=!1,n.iTimer=0,n.iTimerTimeout="",n.iOfferTimeOut=null,n.iTimeout=null,n.iProgress=null,n.bOfferScrollDown=!1,n.offerMessage={},n.aOfferStates=[In.a,In.N,In.u,In.v],n.handleOffer=n.handleOffer.bind(n),n.onReplySelection=n.onReplySelection.bind(n),n.setButtonText=n.setButtonText.bind(n),n.setProgress=n.setProgress.bind(n),n.aScreenReadingIntervals=[75,50,25],n.toolTipStyles=function(e){return m()(m()({backgroundColor:e.palette.common.white,color:e.palette.common.mediumGrey,boxShadow:e.shadows[1],fontSize:"0.70rem",fontWeight:"400"},"boxShadow","none"),"padding","2px 8px")},n}return p()(t,e),i()(t,[{key:"setProgress",value:function(e){var t=this;this.iTimer=setTimeout((function(){0===e?t.bShowTimer=!1:t.setState({progress:e-1})}),600)}},{key:"componentDidMount",value:function(){this.handleOffer()}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.loaded,n=e.attended,r=e.expired,o=this.props,a=o.onContentAdded,i=o.message,s=o.bOfferAttended,c=o.bOfferExpired,l=o.scrollDown;if(t&&this.cobrowseRef.current&&this.bShowTimer&&100==this.iProgress?a():t&&this.cobrowseRef.current&&!this.bOfferScrollDown&&l&&(this.bOfferScrollDown=!0,a()),this.bShowTimer){var u=Math.floor((new Date(this.iTimeout)-new Date)/1e3);this.iProgress=Math.ceil(u/60*100),this.setProgress(this.iProgress)}"cobrowse"==Object(At.p)(i)&&(Object(At.o)(i)&&(c?r?(this.bShowTimer=!1,clearTimeout(this.iTimer)):this.handleOffer():s&&(this.bShowTimer=!1,clearTimeout(this.iTimer),n||this.handleOffer())))}},{key:"render",value:function(){var e=this,t=this.props,n=t.bDisableTabStop,r=t.disableFocus,o=t.conversationRef,a=t.onContentAdded,i=t.i18n,s=t.message,c=[],l=this.state,u=l.offerState,d=l.loaded,p=l.progress,g=n||r,m=this.cobrowseRef,f=this.onReplySelection,b=this.aOfferStates,v=i||{},y=v.offer,w=v.ariaLoading,x=v.ariaCobrowseActionPostback,S=v.ariaRemainingSeconds,O=y||{},C=O.cobrowseOfferTitle,E=O.cobrowseOfferDescription,k=O.acceptButton,T=O.declineButton,R=O.offerStatusNotification;if("cobrowse"==Object(At.p)(s)){var j=s.coBrowse,D=j.id,P=j.sessionId,I=j.sessionJoinToken;this.offerMessage={id:D,title:C,description:E,buttons:[{title:k,actions:{textback:{type:In.H,sessionId:P,sessionJoinToken:I}}},{title:T,actions:{textback:{type:In.J,sessionId:P,sessionJoinToken:I}}}]}}u&&(u!==In.b&&this.setButtonText(),c.push(this.offerMessage));var M=c&&c[0]||{},A=function(){var t="";if(d){if(R)if(u==In.b&&100!=p){var n=Math.ceil(e.iOfferTimeOut*p/100);t=-1!=e.aScreenReadingIntervals.indexOf(p)?n+" "+S:""}else t=R.replace("<%state%>",u)}else t=w;return t},N=-1!==b.indexOf(u);return h.a.createElement("div",null,!d&&h.a.createElement(Tr.a,{width:230,variant:"rectangular",height:118,"aria-busy":"true",role:"alert","aria-label":w}),h.a.createElement(oo,Ze()({ref:m,data:M,removeFocus:g,containerRef:o,onContentAdded:a,disableButton:N,onReplySelection:f,statusText:A(),enableToolTip:!0,enableScreenReaderContent:!0,textBackType:In.m,cardActionLabel:x,showTimer:this.bShowTimer,progress:this.state.progress,toolTipStyles:this.toolTipStyles},this.props)),h.a.createElement("div",{className:"cx-messenger-screen-reader","aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",tabIndex:-1,dangerouslySetInnerHTML:{__html:Object(ke.b)(A())}}))}}])}(h.a.Component);Ro.propTypes={message:v.a.object.isRequired,color:v.a.string.isRequired,i18n:v.a.object.isRequired,conversationRef:v.a.object.isRequired,onSelection:v.a.func.isRequired};var jo=function(e){return function(t){return h.a.createElement(Mt.a.Consumer,null,(function(n){var r=n.getOfferState,o=n.acceptOffer,a=n.declineOffer,i=n.setRejectedOffer,s=n.getRejectedOffersSet,c=n.bCobrowseInProgress;return h.a.createElement(e,Ze()({},t,{getOfferState:r,acceptOffer:o,declineOffer:a,setRejectedOffer:i,getRejectedOffersSet:s,bCobrowseInProgress:c}))}))}}(Ro),Do=Object(It.a)("div")((function(){return{"& .mxg-skeleton-image":{backgroundColor:"#eeeeee"},"& .mxg-image-bubble":{borderRadius:"8px 0px 8px 8px"},"& .mxg-skeleton-make-visible":{visibility:"visible"}}})),Po=function(e){var t=Object(f.useState)(!1),n=$e()(t,2),r=n[0],o=n[1],a=e.file,i=e.messageType,s=e.onErrorLoadingFile,c=e.onOpenFilePrev,l=e.FilePrevComp,u=e.bDisableTabStop,d=e.i18n,p=e.time,g=e.onContentAdded,m=e.bSendingStatus,b=Object(f.useRef)(null),v=d.ariaActionsImagePreviewTitle,y=d.ariaBusinessSaid,w=d.ariaYouSaid,x={};Object(ke.d)(a.downloadUrl)||(x.crossOrigin="anonymous");return h.a.createElement(Do,null,!r&&h.a.createElement(Tr.a,{variant:"rectangular",height:118,width:256,className:"mxg-skeleton-image ".concat(m&&"mxg-skeleton-make-visible")}),h.a.createElement("div",{role:"link",tabIndex:u?-1:0,title:m?"":v,onKeyPress:function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||m||c(l,a,i)},className:"mxg-image-bubble ".concat(m&&"mxg-skeleton-make-visible")},h.a.createElement("img",Ze()({src:a.downloadUrl,key:a.downloadUrl,className:"mxg-image ".concat(m&&"mxg-skeleton-make-visible"),onLoad:function(){o(!0);var e=setInterval((function(){b.current&&b.current.naturalWidth>0&&b.current.naturalHeight>0&&(clearInterval(e),g()),setTimeout((function(){e&&clearInterval(e)}),1e4)}),20)},onError:function(e){s(a),o(!1)},style:r?{}:{display:"none"},onClick:function(e){m||c(l,a,i),e.preventDefault()},alt:"","aria-label":"outbound"===i?y+" "+a.name+" "+p:w+" "+a.name+" "+p,ref:b},x))))},Io=n(667),Mo=n(668);function Ao(e,t,n){return t=u()(t),c()(e,No()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function No(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(No=function(){return!!e})()}var Fo=h.a.createRef,Lo=function(e){function t(e){var n;return o()(this,t),n=Ao(this,t,[e]),m()(n,"setIsOverflow",(function(){n.props.text;if(n.setState({isOverflown:!1}),n.textRef.current){var e=n.textRef.current;e.scrollWidth>e.offsetWidth&&n.setState({isOverflown:!0})}})),n.state={isOverflown:!1},n.textRef=Fo(),n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.setIsOverflow(),window.addEventListener("orientationchange",this.setIsOverflow),window.addEventListener("resize",this.setIsOverflow)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("orientationchange",this.setIsOverflow),window.removeEventListener("resize",this.setIsOverflow)}},{key:"render",value:function(){var e=this.props.text,t=this.state.isOverflown;return h.a.createElement(ct.a,{componentsProps:{tooltip:{sx:{width:"93%",maxHeight:"100px",overflowY:"auto",margin:"10px 0"}},popper:{sx:{zIndex:99999}}},title:e,disableHoverListener:!t,disableFocusListener:!t,disableTouchListener:!t,enterTouchDelay:1500},h.a.createElement(ut.a,{variant:"body2",noWrap:!0,ref:this.textRef,dangerouslySetInnerHTML:{__html:"<span dir='auto' className='mxg-text'>"+Object(ke.b)(e)+"</span>"}}))}}])}(h.a.Component);Lo.propTypes={text:v.a.string.isRequired};var Bo=Lo;function Ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ho(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zo=Object(At.k)().browser||"",Uo=!(!zo||"Internet Explorer"!==zo);Object(At.k)().os;function qo(e,t){var n=e||{},r=n.downloadUrl,o=n.viewFiles,a=t||{},i=a.downloadUrl,s=(a.viewFiles||{}).updatedTime,c=(o||{}).updatedTime;return i===r&&s===c}var Vo=function(e){var t=e.downloadUrl,n=e.mediaType,r=e.mimeType,o=e.name,a=e.size,i=e.downloadFile,s=e.i18n,c=e.direction,l=e.onMediaLinkExpired,u=e.file,d=e.disableFocus,p=e.viewFiles||{},g=p.updatedTime,m=p.attachmentId,b=(u||{}).id,v=r&&r.length?Object(At.i)(r):"",y=!(!n||"Image"!==n),w=!(!n||"Audio"!==n),x=!(!n||"Video"!==n),S=!(!r||"text/plain"!==r),O=!(!r||"application/pdf"!==r),C=!(!O&&!S),E=!(!v||-1===["Document","PDF","Presentation","Spreadsheet","Text"].indexOf(v)),k=!(!v||"File"!==v),T=Object(At.k)(),R=T.browser,j="iOS"==T.os&&"Chrome"==R,D=!(!R||"Safari"!==R),P=Object(f.useState)(!1),I=$e()(P,2),M=I[0],A=I[1],N=Object(f.useState)(!1),F=$e()(N,2),L=F[0],B=F[1],H=s.ariaLoading,K=Object(f.useRef)(null),z=Object(f.useRef)(null),U=Object(f.useRef)(null),q=Object(f.useRef)(null),V="",W=!1;(x||w)&&(V=Object(At.d)(n,r)),y&&(W=Object(At.e)(r));var _=!(!O||!D),G=!(!x||!V),Y=!(!w||!V),$=!(!y||!W),J=!!(_||!C&&!G&&!Y&&!$||x&&!V||w&&!V||y&&!W),Q=!t||!(C||G||Y||$),X={},Z=Object(It.a)("div")((function(e){var t=e.theme;e.props;return{height:"100%",position:"relative",boxSizing:"border-box","& .mxg-file-preview":{height:"84%",padding:"8px",display:"flex",boxSizing:"border-box",alignItems:"center",justifyContent:"center"},"& .mxg-iconButton":{padding:"8px","&:focus-visible":{outlineColor:t.palette.common.outlineColor}},"& .mxg-file-preview-fileinfo":{width:"100%"},"& .mxg-file-preview-footer":{height:"60px",width:"100%",display:"flex",padding:"8px 4px",boxSizing:"border-box",position:"absolute",bottom:"0px"},"& .mxg-file-preview-footerRight":{width:"50%",textAlign:"right"},"& .mxg-file-preview-details":{textAlign:"center"},"& .mxg-file-preview-icon":{textAlign:"center"},"& .mxg-file-preview-filesize":{fontSize:"10px",lineHeight:"16px"},"& .mxg-file-preview-attachment-type":{fontSize:"10px",lineHeight:"16px"},"& .mxg-file-preview-video":{width:"100%",maxHeight:"100%",maxWidth:"100%",cursor:"pointer","&:-moz-focusring":{outlineColor:"#000",outlineStyle:"solid"}},"& .mxg-file-preview-audio":{width:"100%",maxHeight:"100%",maxWidth:"100%",cursor:"pointer","&:-moz-focusring":{outlineColor:"#000",outlineStyle:"solid"}}}})),ee={popper:{top:"10px",zIndex:99999}},te={width:"52px",height:"52px",margin:"auto"},ne=function(){A(!0)},re={showImage:{width:Uo?"100%":"auto",maxHeight:"100%",maxWidth:"100%",display:"block",margin:"auto"},hideImage:{display:"none",maxHeight:"100%",maxWidth:"100%",margin:"auto"},showDocument:{pointerEvents:d?"none":"",display:"block",width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",margin:"auto"},hideDocument:{display:"none",maxHeight:"100%",maxWidth:"100%",margin:"auto"},footerLeft:{display:"flex",padding:"0 12px",flexDirection:"column",width:"50%"},filename:{whiteSpace:"no-wrap",overflow:"hidden",textOverflow:"ellipsis"}},oe={};Object(ke.d)(t)||(oe.crossOrigin="anonymous");var ae=function(e){"function"==typeof i&&i({downloadUrl:t,name:o}),e.preventDefault()},ie=function(e){"fetching"!==L&&(l(u),B("fetching"))};t&&!j&&K.current&&K.current.focus();var se={width:"26px",height:"26px",display:"flex",alignItems:"inherit",justifyContent:"inherit"};return Object(f.useEffect)((function(){"fetching"===L&&g&&m&&m===b&&B("fetched")}),[L,g]),(L&&"fetched"===L||g)&&(X.autoPlay=!0),L&&"fetching"===L&&U.current&&(U.current.style.opacity="0.5",U.current.style.pointerEvents="none"),L&&"fetching"===L&&q.current&&(q.current.style.opacity="0.5",q.current.style.pointerEvents="none"),d||!G&&!Y||(oe.controls=!0),h.a.createElement(Z,{tabIndex:0,"aria-labelledby":"file_description"},h.a.createElement("div",{className:"mxg-file-preview ".concat(!y&&"mxg-multiple-files")},!M&&(C||G||Y)&&!_&&h.a.createElement(ao.a,{sx:{position:"relative",display:"inline-flex",transform:"rtl"===c?"scaleX(-1)":void 0}},h.a.createElement(Er.a,{"aria-busy":"true",role:"alert","aria-label":H})),t&&y&&$&&h.a.createElement("img",Ze()({src:t,key:t,style:M?re.showImage:re.hideImage,alt:"",onLoad:ne},oe)),t&&O&&!_&&h.a.createElement("iframe",{title:s.pdfPreviewTitle,name:s.pdfPreviewTitle,ref:z,key:t,src:"".concat(t,"#view=fitH"),allow:"fullscreen",type:r,onLoad:ne,id:"mxg-file-preview-frame",style:M?re.showDocument:re.hideDocument,tabIndex:d?-1:0}),t&&S&&h.a.createElement("iframe",{title:s.textFilePreviewTitle,name:s.textFilePreviewTitle,src:"".concat(t),key:t,allow:"fullscreen",type:r,onLoad:ne,id:"mxg-file-preview-text",style:M?re.showDocument:re.hideDocument,tabIndex:d?-1:0}),t&&G&&h.a.createElement("video",Ze()({playsInline:!0,src:"".concat(t,"#t=0.001"),key:t,preload:"metadata",className:"mxg-file-preview-video",type:r,onLoadedMetadata:ne,onError:ie,style:M?{}:{display:"none"},ref:U},oe,X)),t&&Y&&h.a.createElement("audio",Ze()({src:t,key:t,preload:"metadata",className:"mxg-file-preview-audio",type:r,onLoadedMetadata:ne,onError:ie,ref:q,style:M?{}:{display:"none"}},oe)),t&&J&&h.a.createElement("div",{className:"mxg-file-preview-fileinfo"},h.a.createElement("div",{className:"mxg-file-preview-icon"},y&&h.a.createElement(Dr.a,{sx:Ko({},te)}),w&&h.a.createElement(jr.a,{sx:Ko({},te)}),x&&h.a.createElement(Rr.a,{sx:Ko({},te)}),E&&h.a.createElement(Ir.a,{sx:Ko({},te)}),k&&h.a.createElement(Pr.a,{sx:Ko({},te)})),h.a.createElement("div",{className:"mxg-file-preview-details"},h.a.createElement(Bo,{className:"mxg-file-preview-filename",text:o}),a&&h.a.createElement(ut.a,{className:"mxg-file-preview-filesize",variant:"body2"},Object(At.h)(a)),v&&h.a.createElement(ut.a,{className:"mxg-file-preview-attachment-type",variant:"body2"},v))),L&&"fetching"===L&&h.a.createElement(Er.a,{"aria-busy":"true",role:"alert","aria-label":H,sx:{width:"60px",height:"60px",position:"absolute"}})),h.a.createElement("div",{className:"mxg-file-preview-footer"},h.a.createElement("div",{style:re.footerLeft,id:"file_description"},h.a.createElement(Bo,{className:"mxg-file-preview-footer-name",text:o}),a&&h.a.createElement(ut.a,{variant:"body2",className:"mxg-file-preview-footer-size"},Object(At.h)(a))),h.a.createElement("div",{className:"mxg-file-preview-footerRight"},!j&&h.a.createElement(ct.a,{disableInteractive:!0,componentsProps:{popper:{sx:ee.popper}},enterDelay:1500,title:s.downloadButton,placement:"top-start"},h.a.createElement(lt.a,{ref:K,onClick:ae,className:"mxg-iconButton mxg-file-preview-downloadBtn",children:h.a.createElement(Io.a,{"aria-hidden":"true",alt:"",sx:Ko({},se)}),"aria-label":s.ariaDownloadButton,tabIndex:0,onKeyUp:function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||ae(e)},disabled:!t||d,size:"large"})),h.a.createElement(ct.a,{disableInteractive:!0,componentsProps:{popper:{sx:ee.popper}},enterDelay:1500,title:s.openInNewTabButton,placement:"top-start"},h.a.createElement(lt.a,{href:t,className:"mxg-iconButton mxg-file-preview-newTabBtn",target:"_blank",rel:"noopener noreferrer",children:h.a.createElement(Kt.a,{icon:Mo.a,"aria-hidden":"true",alt:"",customStyle:se}),"aria-label":s.ariaOpenAttachmentButtonNewTab,tabIndex:0,onKeyUp:function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||e.target.click()},disabled:Q||d,size:"large"})))))},Wo=h.a.memo(Vo,qo);function _o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_o(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yo=Object(At.k)().browser||"",$o=!(!Yo||"Internet Explorer"!==Yo);var Jo=Object(It.a)("div")((function(){return{display:"flex","& .mxg-humanize":{alignSelf:"flex-end",padding:"0px 6px 4px 0px",width:"40px",height:"40px"}}})),Qo=Object(It.a)("div")((function(e){var t=e.theme,n=e.props;return{"& .mxg-message-bubble":{padding:"12px",width:"auto",maxWidth:"75%",whiteSpace:"pre-wrap",wordBreak:"break-word",wordWrap:"break-word",overflowWrap:"break-word"},"& .mxg-humanize":{alignSelf:"flex-end",padding:"0px 6px 4px 0px",width:"40px",height:"40px"},"& .mxg-attachment":{padding:"0",background:"none!important"},"& .mxg-attachment-other":{width:"100%"},"& .mxg-inbound":{borderRadius:"8px 0px 8px 8px",background:t.palette[n.color].main,color:t.palette[n.color].contrastText,"&:-moz-focusring":{outlineColor:function(){return"light"==t.palette.mode?t.palette.getContrastText(t.palette.background.default):"inherit"},outlineStyle:"solid"}},"& .mxg-outbound":{color:"#000",borderRadius:"0px 8px 8px 8px",background:"#ECECEC","&:-moz-focusring":{outlineStyle:"solid"}},"& .mxg-generic-attachment-bubble":{display:"flex",flexDirection:"column"},"& .mxg-generic-attachment-bubble-container":{display:"flex",margin:"0px",padding:"12px",backgroundColor:n.message&&n.message.messageType&&"inbound"===n.message.messageType?t.palette[n.color].main:"#ECECEC",color:n.message&&n.message.messageType&&"inbound"===n.message.messageType?t.palette[n.color].contrastText:"#000","&:hover":{backgroundColor:Object(kr.c)(n.message&&n.message.messageType&&"inbound"===n.message.messageType?t.palette[n.color].main:"#ECECEC",.07)}},"& .mxg-generic-attachment-bubble-withtext":{borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"},"& .mxg-attachment-with-text":{flex:"0 0 75%"},"& .mxg-generic-attachment-body":{display:"flex",flexDirection:"column",padding:"1px 6px",flex:"1 1 auto",minWidth:0,cursor:"pointer"},"& .mxg-generic-attachment-file-data":{display:"flex",flexDirection:"row"},"& .mxg-generic-attachment-filename-container":{display:"flex"},"& .mxg-filename":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"& .mxg-generic-attachment-filesize":{fontSize:"10px",lineHeight:"16px",flexShrink:"0"},"& .mxg-generic-attachment-type":{fontSize:"10px",lineHeight:"16px",paddingLeft:"6px"},"& .mxg-generic-attachment-text":{marginTop:"1px",padding:"4px 10px 8px 12px",background:t.palette[n.color].main,borderRadius:"0px 0px 8px 8px"},"& .mxg-skeleton-image":{backgroundColor:"#eeeeee",height:"118px",width:"100%",minWidth:"256px"},"& .mxg-image-bubble":{borderRadius:"8px 0px 8px 8px"},"& .mxg-imageText-bubbleContainer":{position:"relative",textAlign:"center"},"& .mxg-imageText":{padding:"4px 10px 8px 10px",background:t.palette[n.color].main,borderRadius:"0px 0px 8px 8px"},"& .mxg-image":{width:$o?"100%":"auto",maxHeight:"100%",maxWidth:"100%",cursor:"pointer",borderTopLeftRadius:"7px",display:"block",minHeight:"3em","&:-moz-focusring":{outlineColor:"#000",outlineStyle:"solid"}},"& .mxg-markdown":{"& pre":{display:"block",padding:"9px",wordBreak:"break-word",wordWrap:"break-word",borderRadius:"4px",border:"1px solid",whiteSpace:"pre-wrap"},"& code":{padding:"0px 6px 2px 6px"},"& mark":{backgroundColor:t.palette.highlight.main,padding:"0px 2px",fontWeight:700,color:t.palette.getContrastText(t.palette.highlight.main)}},"& .mxg-emojiOnly":{fontSize:"2.814rem"},"& .mxg-skeleton-video":{backgroundColor:"#eeeeee",width:"100%",height:"25vh",marginBottom:"3px",minHeight:"25vh"},"& .mxg-video-bubble":{borderRadius:"8px 0px 8px 8px"},"& .mxg-video-bubble-container":{position:"relative",textAlign:"center",justifyContent:"center",display:"flex",alignItems:"center"},"& .mxg-video-details":{padding:"4px 10px",background:n.message&&n.message.messageType&&"inbound"===n.message.messageType?t.palette[n.color].main:"#ECECEC",borderTopLeftRadius:"8px",display:"flex",cursor:"pointer"},"& .mxg-video-details-body":{display:"flex",flexDirection:"column",padding:"1px 6px",flex:"1 1 auto",minWidth:0},"& .mxg-video-file-data":{display:"flex",flexDirection:"row"},"& .mxg-video-filename-container":{display:"flex"},"& .mxg-video-filesize":{fontSize:"10px",lineHeight:"16px",flexShrink:"0"},"& .mxg-video":{width:"100%",maxHeight:"100%",maxWidth:"100%",cursor:"pointer","&:-moz-focusring":{outlineColor:"#000",outlineStyle:"solid"}},"& .mxg-media-no-text":{borderRadius:"0px 0px 8px 8px"},"& .mxg-video-text":{marginTop:"-3px",padding:"4px 10px 8px 10px",background:t.palette[n.color].main,borderRadius:"0px 0px 8px 8px"},"& .mxg-skeleton-make-visible":{visibility:"visible"}}})),Xo=function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),"a"===e.target.tagName.toLowerCase()&&e.target.click())},Zo=function(e){var t=e.messageId,n=e.ariaSaid,r=e.text,o=e.ariaTime,a=e.bSendingStatus,i=!1;return r&&function(e){var t=!1,n=Object(At.g)();return e&&n.test(e)&&(t=!0),t}(r)&&(i=!0),h.a.createElement("div",{id:t},h.a.createElement("div",{className:"aria-name cx-messenger-screen-reader","aria-label":n,tabIndex:-1},n),h.a.createElement(ut.a,{variant:"body2",onKeyPress:Xo,className:"".concat(a&&"mxg-skeleton-make-visible"," mxg-markdown ").concat(i&&"mxg-emojiOnly"),dir:"auto",dangerouslySetInnerHTML:{__html:Object(ke.b)(e.text)}}),h.a.createElement("div",{className:"aria-time cx-messenger-screen-reader","aria-label":o,tabIndex:-1},o))},ea=function(e){var t=Object(f.useState)(!1),n=$e()(t,2),r=n[0],o=n[1],a=e.file,i=e.messageType,s=e.text,c=e.onErrorLoadingFile,l=e.onOpenFilePrev,u=e.FilePrevComp,d=e.bDisableTabStop,p=e.i18n,g=e.onContentAdded,m=e.messageId,b=e.ariaSaid,v=e.ariaTime,y=e.bSendingStatus,w=Object(f.useRef)(null),x=p.ariaActionsImagePreviewTitle,S={};Object(ke.d)(a.downloadUrl)||(S.crossOrigin="anonymous");return h.a.createElement("div",{id:m},h.a.createElement("div",{className:"aria-name cx-messenger-screen-reader","aria-label":b,tabIndex:-1},e.ariaSaid),!r&&h.a.createElement(Tr.a,{variant:"rectangular",className:"mxg-skeleton-image ".concat(y&&"mxg-skeleton-make-visible")}),h.a.createElement("div",{role:"link",tabIndex:d?-1:0,title:y?"":x,onKeyPress:function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||y||l(u,a,i)},className:"mxg-image-bubble ".concat(y&&"mxg-skeleton-make-visible")},h.a.createElement("div",{className:"mxg-imageText-bubbleContainer ".concat(y&&"mxg-skeleton-make-visible")},h.a.createElement("img",Ze()({src:a.downloadUrl,className:"mxg-image ".concat(y&&"mxg-skeleton-make-visible"),onLoad:function(){o(!0);var e=setInterval((function(){w.current&&w.current.naturalWidth>0&&w.current.naturalHeight>0&&(clearInterval(e),g()),setTimeout((function(){e&&clearInterval(e)}),1e4)}),20)},onError:function(){c(a),o(!1)},style:r?{}:{display:"none"},onClick:function(e){y||l(u,a,i),e.preventDefault()},alt:"","aria-label":a.name,ref:w},S))),h.a.createElement(ut.a,{variant:"body2",className:"mxg-imageText mxg-markdown ".concat(y&&"mxg-skeleton-make-visible"),dangerouslySetInnerHTML:{__html:"<span dir='auto'>"+Object(ke.b)(s)+"</span>"}}),h.a.createElement("div",{className:"aria-time cx-messenger-screen-reader","aria-label":v,tabIndex:-1},v)))},ta=function(e){var t=Object(f.useState)(!1),n=$e()(t,2),r=n[0],o=n[1],a=Object(f.useState)(!1),i=$e()(a,2),s=i[0],c=i[1],l=e.file,u=e.messageType,d=e.text,p=e.onMediaLinkExpired,g=(e.removeFocus,e.onOpenFilePrev),m=e.FilePrevComp,b=(e.downloadFile,e.bDisableTabStop),v=e.i18n,y=e.onContentAdded,w=e.messageId,x=e.ariaSaid,S=e.ariaTime,O=e.bSendingStatus,C=l.downloadUrl,E=l.size,k=l.name,T=(l.type,l.mime),R=l.updatedTime,j=Object(At.h)(E),D=Object(f.useRef)(null),P=Object(f.useRef)(null),I="fullscreenchange";I="Firefox"===Yo?"mozfullscreenchange":"webkitfullscreenchange";var M={};Object(ke.d)(C)||(M.crossOrigin="anonymous"),Object(f.useEffect)((function(){return document.addEventListener(I,A,!1),function(){document.removeEventListener(I,A,!1)}}),[]),Object(f.useEffect)((function(){"fetching"===s&&R&&c("fetched")}),[s,R]);var A=function(e){e.target&&e.target.classList.contains("mxg-video")&&e.target.scrollIntoView()};return R&&(M.autoPlay=!0),b||(M.controls=!0),s&&"fetching"===s&&D.current&&(D.current.style.opacity="0.5",D.current.style.pointerEvents="none"),h.a.createElement("div",{id:w,ref:P},h.a.createElement("div",{className:"aria-name cx-messenger-screen-reader","aria-label":x,tabIndex:-1},e.ariaSaid),h.a.createElement("div",{tabIndex:b?-1:0,className:"mxg-video-bubble ".concat(O&&"mxg-skeleton-make-visible"),title:O?"":v.previewFile},h.a.createElement("div",{className:"mxg-video-details ".concat(O&&"mxg-skeleton-make-visible"),onClick:function(e){O||g(m,l,u),e.preventDefault()}},h.a.createElement("div",{className:"mxg-video-icon ".concat(O&&"mxg-skeleton-make-visible")},h.a.createElement(Rr.a,{sx:Go({},{width:"40px",height:"40px",display:"flex",alignItems:"inherit",justifyContent:"inherit"})})),h.a.createElement("div",{className:"mxg-video-details-body ".concat(O&&"mxg-skeleton-make-visible")},h.a.createElement("div",{className:"mxg-video-filename-container ".concat(O&&"mxg-skeleton-make-visible"),onKeyDown:function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),O||g(m,l,u))},tabIndex:b?-1:0},h.a.createElement(Bo,{className:"mxg-video-filename mxg-filename ".concat(O&&"mxg-skeleton-make-visible"),text:k})),h.a.createElement("div",{className:"mxg-video-file-data ".concat(O&&"mxg-skeleton-make-visible")},E&&h.a.createElement(ut.a,{className:"mxg-video-filesize ".concat(O&&"mxg-skeleton-make-visible"),variant:"body2"},j),h.a.createElement(ut.a,{className:"mxg-generic-attachment-type ".concat(O&&"mxg-skeleton-make-visible"),variant:"body2"},v.videoLabel)))),h.a.createElement("div",{className:"mxg-video-bubble-container ".concat(O&&"mxg-skeleton-make-visible")},!r&&h.a.createElement(Tr.a,{variant:"rectangular",className:"mxg-skeleton-video ".concat(O&&"mxg-skeleton-make-visible")}),h.a.createElement("video",Ze()({playsInline:!0,src:"".concat(C,"#t=0.001"),key:C,preload:"metadata",className:"mxg-video ".concat(!d&&"mxg-media-no-text"," ").concat(O&&"mxg-skeleton-make-visible"),type:T,onLoadedMetadata:function(){o(!0);var e=setInterval((function(){D.current&&D.current.videoWidth>0&&D.current.videoHeight>0&&(clearInterval(e),y()),setTimeout((function(){e&&clearInterval(e)}),1e4)}),20)},style:r?{}:{display:"none"},onError:function(e){p(l),c("fetching")},"aria-label":k,ref:D},M)),s&&"fetching"===s&&h.a.createElement(Er.a,{"aria-busy":"true",role:"alert","aria-label":v.ariaLoading,className:"".concat(O&&"mxg-skeleton-make-visible"),sx:{width:"60px",height:"60px",position:"absolute"}})),d&&h.a.createElement(ut.a,{variant:"body2",className:"mxg-video-text mxg-markdown ".concat(O&&"mxg-skeleton-make-visible"),dangerouslySetInnerHTML:{__html:"<span dir='auto'>"+Object(ke.b)(d)+"</span>"}}),h.a.createElement("div",{className:"aria-time cx-messenger-screen-reader","aria-label":S,tabIndex:-1},S)))},na=function(e){var t=e.text,n=e.file,r=e.messageId,o=e.messageType,a=e.ariaSaid,i=e.bDisableTabStop,s=e.i18n,c=e.onOpenFilePrev,l=e.FilePrevComp,u=e.ariaTime,d=e.bSendingStatus,p=(n.downloadUrl,n.size),g=n.name,m=n.type,f=n.mime,b=f&&f.length?Object(At.i)(f):m&&m.length?Object(At.i)(m):"",v=!(!b||"Video"!==b),y=!(!b||"Audio"!==b),w=!(!b||"File"!==b),x=!(!b||"Image"!==b),S=!(!b||-1===["Document","PDF","Presentation","Spreadsheet","Text"].indexOf(b)),O=Object(At.h)(p),C={width:"40px",height:"40px",display:"flex",alignItems:"inherit",justifyContent:"inherit"};return h.a.createElement("div",{id:r},h.a.createElement("div",{className:"aria-name cx-messenger-screen-reader","aria-label":a,tabIndex:-1},e.ariaSaid),h.a.createElement("div",{className:"mxg-generic-attachment-bubble ".concat(d&&"mxg-skeleton-make-visible")},h.a.createElement(cn.a,{className:"mxg-generic-attachment-bubble-container  ".concat(t&&"mxg-generic-attachment-bubble-withtext"," ").concat(d&&"mxg-skeleton-make-visible"),variant:"text",onClick:function(e){d||c(l,n,o),e.preventDefault()},onKeyDown:function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||(e.preventDefault(),d||c(l,n,o))},title:d?"":s.previewFile,tabIndex:i?-1:0,"aria-label":g+" "+O+" "+b},h.a.createElement("div",{className:"mxg-generic-attachment-iconContainer ".concat(d&&"mxg-skeleton-make-visible")},v&&h.a.createElement(Rr.a,{sx:Go({},C)}),y&&h.a.createElement(jr.a,{sx:Go({},C)}),x&&h.a.createElement(Dr.a,{sx:Go({},C)}),w&&h.a.createElement(Pr.a,{sx:Go({},C)}),S&&h.a.createElement(Ir.a,{sx:Go({},C)})),h.a.createElement("div",{className:"mxg-generic-attachment-body ".concat(d&&"mxg-skeleton-make-visible")},h.a.createElement("div",{className:"mxg-generic-attachment-filename-container ".concat(d&&"mxg-skeleton-make-visible")},h.a.createElement(Bo,{className:"mxg-generic-attachment-filename mxg-filename ".concat(d&&"mxg-skeleton-make-visible"),text:g})),h.a.createElement("div",{className:"mxg-generic-attachment-file-data ".concat(d&&"mxg-skeleton-make-visible")},p&&h.a.createElement(ut.a,{className:"mxg-generic-attachment-filesize ".concat(d&&"mxg-skeleton-make-visible"),variant:"body2"},O),b&&h.a.createElement(ut.a,{className:"mxg-generic-attachment-type ".concat(d&&"mxg-skeleton-make-visible"),variant:"body2"},b)))),t&&h.a.createElement(ut.a,{variant:"body2",className:"mxg-generic-attachment-text mxg-markdown ".concat(d&&"mxg-skeleton-make-visible"),dangerouslySetInnerHTML:{__html:"<span dir='auto'>"+Object(ke.b)(t)+"</span>"}}),h.a.createElement("div",{className:"aria-time cx-messenger-screen-reader","aria-label":u,tabIndex:-1},u)))},ra=function(e){var t=e.message,n=e.time,r=e.transcriptContainerRef,o=e.onOpenFilePrev,a=e.onErrorLoadingFile,i=e.onMediaLinkExpired,s=e.onContentAdded,c=e.onSelection,l=e.downloadFile,u=e.i18n,d=e.bLastMessage,p=e.bDisableTabStop,g=e.disableFocus,f=e.richMediaOptions,b=e.bCard,v=e.bCarousel,y=e.bCobrowse,w=e.direction,x=e.humanizeConfig,S=e.showAgentAvatar,O=e.showBotAvatar,C=(e.participantName,e.aFocusMngtMsgIds),E=e.newRelic,k=e.bSendingStatus,T=(e.bErrorStatus,t||{}),R=T.text,j=T.files,D=T.messageType,P=T.id,I=T.originatingEntity,M=T.timestamp,A=x||{},N=(A.agent,A.bot),F=A.enabled,L=(N||{}).name,B=((t||{}).from||{}).name,H=p||g,K=E||{},z=K.pageActionMetrics,U=(K.performanceMetrics,K.errorMetrics,z),q="";H&&C&&C.length&&M&&R&&C.includes(M)&&(q=R.replaceAll("<a target='_blank'","<a target='_blank' tabindex='-1'"));var V,W,_,G=u.ariaBusinessSaid,Y=u.ariaYouSaid,$=u.ariaAgentSaid,J=u.ariaBotSaid,Q="",X=!1,Z=j&&j.length?Object(At.n)(j[0]):{},ee=Z.mediaType,te=Z.mimeType,ne=!1;if((j||[]).length)switch(ee){case"Image":V=!0;break;case"Video":W=!0;break;case"Audio":_=!0;break;case"File":ne=!0}var re=!!(V||W||_||ne);(W||_)&&(Q=Object(At.d)(ee,te)),V&&(X=Object(At.e)(te));var oe=!(!R||!(W&&!Q||_||ne)),ae="";(j||[]).length&&(ae=function(e){return h.a.createElement(Wo,Ze()({},e,{onMediaLinkExpired:i,downloadUrl:j[0].downloadUrl,size:j[0].size,name:j[0].name,mediaType:ee,mimeType:te,file:j[0],downloadFile:l,i18n:u,direction:w,disableFocus:g}))});var ie=function(){var e="";return D&&("outbound"==D?(e=G,F&&("Human"===I&&B&&$?e=$.replace("<%Agent%>",B):"Bot"===I&&L&&J&&(e=J.replace("<%Bot%>",L)))):"inbound"==D&&(e=Y)),e},se={display:$o?"-ms-flexbox":"flex",justifyContent:"outbound"===t.messageType?"flex-start":"flex-end"},ce=function(e){var t=e||{},n=t.type,r=t.target;"focus"===n?U.messageOnFocus():"mouseover"===n?r&&r.className&&"function"==typeof r.className.indexOf&&-1!==r.className.indexOf("mxg-message-bubble")&&U.messageOnHover():"touchstart"===n&&U.messageOnTouch()},le=h.a.forwardRef((function(e,t){return k?h.a.createElement(Tr.a,Ze()({variant:"rectangular"},e,{ref:t}),e.children):h.a.createElement("div",Ze()({},e,{ref:t}),e.children)}));return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",null,(R&&d||b||v)&&h.a.createElement(Eo,Ze()({onSelection:c,options:f},e,{transcriptContainerRef:r,toolTipPlacement:"right-start",oCallbacks:{onTooltipOpen:ce}}))),y&&h.a.createElement(h.a.Fragment,null,h.a.createElement(Jo,null,F&&h.a.createElement("div",{className:"mxg-humanize"}),h.a.createElement(jo,Ze()({transcriptContainerRef:r,toolTipPlacement:"outbound"===D?"right-start":"left-start",oCallbacks:{onTooltipOpen:ce,personaLabel:ie}},e)))),(R||!!(j||[]).length)&&h.a.createElement(Qo,{style:se,props:e},F&&"outbound"===D&&h.a.createElement("div",{className:"mxg-humanize"},(S||O)&&!v&&!b&&h.a.createElement(Pn,{humanizeConfig:x,message:t,showAgentAvatar:S,showBotAvatar:O})),h.a.createElement(ct.a,{disableInteractive:!0,componentsProps:{tooltip:{sx:function(e){return m()(m()({backgroundColor:e.palette.common.white,color:e.palette.common.mediumGrey,boxShadow:e.shadows[1],fontSize:"0.70rem",fontWeight:"400"},"boxShadow","none"),"padding","0px")}},popper:{sx:{zIndex:0}}},enterDelay:500,title:n,PopperProps:{container:r.current},placement:"outbound"===t.messageType?"right-start":"left-start",onOpen:function(e){return ce(e)}},h.a.createElement(le,{className:t.messageType&&"outbound"===t.messageType?"mxg-message-bubble mxg-outbound ".concat(re&&"mxg-attachment"," ").concat(re&&!X&&"mxg-attachment-other"," ").concat(oe&&"mxg-attachment-with-text"):"mxg-message-bubble mxg-inbound ".concat(re&&"mxg-attachment"," ").concat(re&&!X&&"mxg-attachment-other"," ").concat(oe&&"mxg-attachment-with-text"),tabIndex:H||!R&&(j||[]).length?-1:0,"aria-labelledby":!R&&(j||[]).length?"":P},R&&!(j||[]).length&&h.a.createElement(Zo,{ariaSaid:ie(),messageId:P,text:q||R,ariaTime:n,bSendingStatus:k}),ne&&h.a.createElement(na,{text:q||R,file:j[0],bSendingStatus:k,messageType:D,onOpenFilePrev:o,FilePrevComp:ae,messageId:P,bDisableTabStop:H,i18n:u,ariaSaid:ie(),ariaTime:n}),W&&Q&&h.a.createElement(ta,{text:q||R,file:j[0],bSendingStatus:k,messageType:D,messageId:P,bDisableTabStop:H,i18n:u,onMediaLinkExpired:i,onOpenFilePrev:o,FilePrevComp:ae,downloadFile:l,ariaSaid:ie(),onContentAdded:s,ariaTime:n}),(W&&!Q||_||V&&!X)&&h.a.createElement(na,{text:q||R,file:j[0],bSendingStatus:k,messageType:D,messageId:P,bDisableTabStop:H,i18n:u,onOpenFilePrev:o,FilePrevComp:ae,ariaSaid:ie(),ariaTime:n}),R&&V&&X&&h.a.createElement(ea,{text:q||R,file:j[0],bSendingStatus:k,messageType:D,onOpenFilePrev:o,onErrorLoadingFile:a,FilePrevComp:ae,bDisableTabStop:H,i18n:u,onContentAdded:s,messageId:P,ariaSaid:ie(),ariaTime:n}),!R&&V&&X&&h.a.createElement(Po,{file:j[0],messageType:D,bSendingStatus:k,bDisableTabStop:H,i18n:u,time:n,FilePrevComp:ae,onContentAdded:s,onOpenFilePrev:o,onErrorLoadingFile:a})))))},oa=ra;function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ra.propTypes={color:v.a.string,type:v.a.string,message:v.a.object,time:v.a.string,onOpenFilePrev:v.a.func,downloadFile:v.a.func,bDisableTabStop:v.a.bool,i18n:v.a.object.isRequired,richMediaOptions:v.a.object.isRequired,onSelection:v.a.func.isRequired};var sa,ca,la=Object(At.k)().browser||"",ua=Object(At.k)().os||"",da=!(!la||"Internet Explorer"!==la),pa=!(!la||"Firefox"!==la),ga="Android"===ua,ma=Object(It.a)("div")((function(e){var t=e.theme;return{textAlign:"center","&:-moz-focusring":{outlineColor:function(){return"light"==t.palette.mode?t.palette.getContrastText(t.palette.background.default):"inherit"},outlineStyle:"solid"}}})),fa=Object(It.a)(ut.a)((function(e){return{color:e.theme.palette.common.mediumGrey}})),ha=["Video"],ba="",va=!1;function ya(e,t){var n=e||{},r=n.showBotAvatar,o=n.showBotName,a=n.showAgentAvatar,i=n.showAgentName,s=n.showCustomerName,c=n.message,l=n.bOfferExpired,u=n.bOfferAttended,d=n.bDisableTabStop,p=n.disableFocus,g=n.bActiveQuickReply,m=n.view,f=n.bSentMessage,h=t||{},b=h.showBotAvatar,v=h.showBotName,y=h.showAgentAvatar,w=h.showAgentName,x=h.showCustomerName,S=h.message,O=h.bCard,C=h.bCarousel,E=h.bCobrowse,k=h.humanizeEnabled,T=h.bOfferExpired,R=h.bOfferAttended,j=h.bDisableTabStop,D=h.disableFocus,P=h.bActiveQuickReply,I=h.view,M=h.bSentMessage,A=S||{},N=A.files,F=A.updatedTime,L=A.deliveryStatus,B=c||{},H=B.updatedTime;B.deliveryStatus;N&&N.length?(sa=N[0].type,ca=N[0].mime):sa="",ba="Video"==sa?Object(At.d)(sa,ca):"",m!==I&&(va=!0);var K=j!==d||D!==p,z=!(!L||"sending"!==L),U=M!==f,q=!(!!!ha.includes(sa)||!ba||K),V=!(!N||!N.length)&&!!N[0].updatedTime;return!K&&((!k||P===g&&x===s&&b===r&&v===o&&y===a&&w===i&&R===u&&T===l&&F===H||!1!==q&&!V)&&!!(N&&N.length&&!z&&!U||O||C||b||v||y||w||E&&R===u&&T===l))}var wa=function(e){var t,n=e.message,r=(e.files,e.scrollDown),o=e.scrollToMessage,a=e.bDisableTabStop,i=e.disableFocus,s=(e.transcriptRef,e.transcriptContainerRef),c=e.markdownEnabled,l=e.onScrollDown,u=e.time,d=e.humanizeEnabled,p=e.humanizeConfig,g=e.showAgentName,b=e.showAgentAvatar,v=e.showBotAvatar,y=e.showBotName,w=e.showCustomerName,x=e.i18n,S=e.previousMessage,O=e.bActiveQuickReply,C=e.bShowSignedMessage,E=e.oCustomer,k=e.bSentMessage,T=e.maxMessageLength,R=((p||{}).bot||{}).name,j=x||{},D=j.customerDefaultName,P=j.ariaMessageSending,I=j.ariaMessageSent,M=j.ariaMessageNotSent,A=j.ariaMessageFailed,N=j.ariaReadOnlyError,F=a||i,L=Object(f.useRef)(null),B=(n||{}).files,H=Object(f.useRef)(!1),K=pa?100:ga?600:0,z=A,U=!1,q=!1,V=!1;H.current=!(!B||!B.length)&&!!B[0].updatedTime;Object(f.useEffect)((function(){return!r||!va&&H.current||(t=setTimeout((function(){l(L,o)}),K)),H.current=!1,function(){clearTimeout(t)}}),[]),Genesys("command","Markdown.configure",{disableLinkFocus:!1,enabled:c});var W=n||{},_=W.messageType,G=W.from,Y=(W.quickReplies,W.presence,W.deliveryStatus),$=W.errorKey,J=(G||{}).name,Q=(S||{}).messageType,X="",Z=!1,ee=!1;d&&n.messageType;if(d&&_&&("outbound"==_?"Human"==n.originatingEntity?J&&g?X="".concat(J):J||(X=""):"Bot"==n.originatingEntity&&(X=y&&J?"".concat(J):y&&!J&&R?"".concat(R):""):"inbound"==_&&(ee=!0,X="".concat(D," "))),_&&Q&&_===Q&&(Z=!0),C){var te="",ne=x.signedInMessage,re=E||{},oe=re.firstName,ae=re.lastName;oe&&ae||!Object.keys(G).length||(oe=G.firstName||"",ae=G.lastName||""),_&&"inbound"===_&&(oe||ae)&&(te="".concat(oe," ").concat(ae),ne=x.signedInMessageWithName.replace("<%username%>",te)),n=ia(ia({},n),{},{messageType:"system",text:ne})}if(Y)switch(Y){case"sent":U=!0;break;case"sending":q=!0;break;case"error":V=!0}if($)switch($){case"messageLengthExceeded":z=(z=x.errors[$]).replace("<%maxMessageLength%>",T);break;case"readOnlySession":z=N}var ie=Object(It.a)("div")((function(e){e.theme;return{margin:"0px 0px 4px 0px",padding:"6px 0px 0px 0px",width:"100%",display:"flex",flexDirection:"column-reverse",height:da?"100%":"auto",scrollMarginBottom:"18px",paddingTop:Z?"0px!important":"6px",boxSizing:"border-box"}})),se=Object(It.a)(ut.a)((function(e){return{color:e.theme.palette.common.mediumGrey,"&.customerParticipant":{alignSelf:"flex-end"},"&.paddingAgentName":{paddingLeft:"46px"},"& .ellipsis":{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre",maxWidth:"65%"}}})),ce=Object(It.a)(ut.a)((function(e){return{color:e.theme.palette.error.main,alignSelf:"flex-end",display:"flex",alignItems:"center",flexWrap:"wrap","& .paddingError":{paddingLeft:"4px"}}}));return h.a.createElement(ie,{className:"mxg-message",ref:L},"system"===n.messageType?h.a.createElement(ma,{className:"mxg-system",tabIndex:F?-1:0,"aria-labelledby":"systemMessage"},h.a.createElement(fa,{variant:"caption",id:"systemMessage"},n.text)):h.a.createElement(h.a.Fragment,null,d&&!O&&(g||y||w)?h.a.createElement(h.a.Fragment,null,h.a.createElement(se,{className:"".concat(ee?"customerParticipant":"paddingAgentName"),variant:"caption"},h.a.createElement("span",{className:ee?"":"ellipsis"},X),h.a.createElement("span",{className:"".concat(ee?"":"ellipsis")},X&&h.a.createElement("span",null," · "),u),ee&&q&&h.a.createElement("span",null,u&&h.a.createElement("span",null," · "),P),ee&&k&&U&&h.a.createElement("span",null,u&&h.a.createElement("span",null," · "),I))):h.a.createElement(h.a.Fragment,null,q&&h.a.createElement(se,{className:"customerParticipant",variant:"caption"},h.a.createElement("span",null,P)),"inbound"==_&&U&&k&&h.a.createElement(se,{className:"customerParticipant",variant:"caption"},h.a.createElement("span",null,I))),V&&h.a.createElement(ct.a,{disableInteractive:!0,componentsProps:{tooltip:{sx:function(e){return m()(m()({backgroundColor:e.palette.common.white,color:e.palette.common.mediumGrey,boxShadow:e.shadows[1],fontSize:"0.70rem",fontWeight:"400"},"boxShadow","none"),"padding","0px")}},popper:{sx:{zIndex:0}}},enterDelay:500,title:z,PopperProps:{container:s.current},placement:"left-start"},h.a.createElement(ce,{variant:"caption"},h.a.createElement(Cr.a,{fontSize:"inherit"}),h.a.createElement("span",{className:"paddingError"},M))),h.a.createElement(oa,Ze()({},e,{onContentAdded:function(){r&&!H.current&&l(L,o),H.current=!1},participantName:X,bSendingStatus:q,bErrorStatus:V}))))},xa=h.a.memo(wa,ya);wa.propTypes={color:v.a.string,type:v.a.string,message:v.a.object,scrollDown:v.a.bool,scrollToMessage:v.a.bool,bQuickReplies:v.a.bool,time:v.a.string,i18n:v.a.object.isRequired,bDisableTabStop:v.a.bool,disableFocus:v.a.bool,richMediaOptions:v.a.object.isRequired,onSelection:v.a.func.isRequired,onScrollDown:v.a.func.isRequired};n(250),Object(At.k)().browser;var Sa="Android"===(Object(At.k)().os||""),Oa=Object(It.a)("div")((function(e){var t=e.theme;return{borderRadius:"0px 8px 8px 8px",margin:"0px 0px 6px 0px",padding:"10px 12px",display:"inline-block",scrollMarginBottom:"18px",background:t.palette.common.lightGrey,"&:-moz-focusring":{outlineColor:function(){return"light"==t.palette.mode?t.palette.getContrastText(t.palette.background.default):"inherit"},outlineStyle:"solid"},"& .mxg-typing-indicator-dot":{background:t.palette.common.mediumGrey}}}));function Ca(e){var t,n=e.i18n,r=e.dotsCount,o=e.onScrollDown,a=n.ariaIsTyping,i=Object(f.useRef)(null),s=[],c=Sa?600:100;if(Object(f.useEffect)((function(){return t=setTimeout((function(){o(i)}),c),function(){clearTimeout(t)}}),[]),r&&r>=3&&r<=5)for(var l=0;l<r;l++)s.push(l);else s=[0,1,2];return h.a.createElement(Oa,{tabIndex:0,ref:i},h.a.createElement("div",{className:"cx-messenger-screen-reader","aria-label":a,tabIndex:-1},a),s.map((function(e){return h.a.createElement("span",{key:e,className:"mxg-typing-indicator-dot",style:{"--animation-order":e}})})))}Ca.propTypes={color:v.a.string,i18n:v.a.object.isRequired,dotsCount:v.a.number,onScrollDown:v.a.func.isRequired};var Ea=Ca,ka=Object(At.k)().os||"",Ta=Object(At.k)().browser||"",Ra="Android"===ka,ja=!(!Ta||"Firefox"!==Ta),Da=Object(It.a)("div")((function(e){var t=e.theme;return{margin:"10px",flexDirection:"column-reverse",display:"flex","& .alignButton":{textAlign:"center"},"& .disconnectText":{color:t.palette.common.mediumGrey,textAlign:"center"},"& .disconnectTime":{color:t.palette.common.mediumGrey,paddingBottom:"10px",textAlign:"center"}}}));function Pa(e){var t,n=e||{},r=(n.color,n.dateTime),o=n.bDisableTabStop,a=n.disableFocus,i=n.i18n,s=n.bReadOnlySession,c=n.scrollDown,l=n.onScrollDown,u=n.disconnectType,d=o||a,p=Object(f.useRef)(null),g=ja?100:Ra?600:0;return Object(f.useEffect)((function(){return t=setTimeout((function(){c&&l(p)}),g),function(){clearTimeout(t)}}),[]),h.a.createElement(Da,{tabIndex:d?-1:0,ref:p,className:"mxg-disconnect-message","aria-labelledby":"disconnectMessage_text disconnectMessageSend_text dateTime_text"},h.a.createElement(ut.a,{id:"dateTime_text",className:"disconnectTime",component:"div","aria-label":r,variant:"caption",dir:"auto"},r),u&&("boolean"==typeof s?!s:"send"===u.toLowerCase())&&h.a.createElement("div",{className:"disconnectText"},h.a.createElement(ut.a,{id:"disconnectMessageSend_text","aria-label":i&&i.disconnectMessageSend||"",variant:"caption",dir:"auto"},i&&i.disconnectMessageSend||"")),h.a.createElement("div",{className:"disconnectText"},h.a.createElement(ut.a,{variant:"caption",dir:"auto",id:"disconnectMessage_text"},i&&i.disconnectMessage||"")))}function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Aa(e,t,n){return t=u()(t),c()(e,Na()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function Na(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Na=function(){return!!e})()}Pa.propTypes={participantName:v.a.string,dateTime:v.a.string,i18n:v.a.object.isRequired};var Fa=Object(At.k)().browser||"",La=!(!Fa||"Internet Explorer"!==Fa),Ba=Object(At.w)(),Ha={position:"absolute",boxSizing:"border-box",overflowY:"auto",overflowX:"hidden",overscrollBehavior:"contain",width:"100%",padding:"0px 16px 6px 16px",height:La?"auto":"100%",maxHeight:"calc(100% - 171px)",scrollBehavior:"smooth"},Ka={display:La?"-ms-flexbox":"flex",flexDirection:"column-reverse",minHeight:"100%",position:"relative"},za={display:"inline-block"},Ua=function(e){var t=Object(It.a)(ut.a)((function(e){return{color:e.theme.palette.common.mediumGrey}})),n=Object(It.a)("div")((function(e){e.theme;return{textAlign:"center"}})),r=e.oDateDivider;return h.a.createElement(n,null,h.a.createElement(t,{variant:"caption"},Cn()(r.$d).format("ll")))},qa=function(e,t){return!(!t||!e||t.timestamp!=e.timestamp)},Va=function(e){function t(e){var n;return o()(this,t),n=Aa(this,t,[e]),m()(n,"screenReaderTranscriptMessage",(function(){var e=n.props||{},t=e.message,r=e.i18n,o=e.status,a=e.bShowTyping,i=e.bTypingStopped,s=e.humanizeConfig,c=e.disconnectType,l=e.bReadOnlySession,u=s||{},d=u.bot,p=u.enabled,g=(d||{}).name,m=((t||{}).from||{}).name,f=(n.state||{}).newMessage,h="",b=r||{},v=b.offer,y=b.ariaSendingMessage,w=b.ariaSendMsgError,x=b.ariaMessageSent,S=b.ariaNewMessage,O=b.ariaYouSaid,C=b.ariaBusinessSaid,E=b.ariaAgentSaid,k=b.ariaBotSaid,T=b.ariaIsTyping,R=b.ariaStopTyping,j=b.ariaCarouselMessage,D=b.disconnectMessage,P=b.disconnectMessageSend,I=(v||{}).cobrowseOfferTitle;if(a)h="<div>"+T+"</div>";else if("resetTyping"===o&&i)h="<div>"+R+"</div>";else if(f&&Object.keys(f).length){var M,A=f.messageType,N=f.originatingEntity,F=f.files,L=f.text,B=f.quickReplies,H=f.card,K=f.coBrowse,z=f.id,U=f.carousel,q=f.presence,V=f.timestamp,W=f.deliveryStatus,_="",G=W&&"sent"===W?x:"",Y="",$=(U||{}).cards,J=(q||{}).type;if(M=V&&V.length?Cn()(Cn()(V).$d).format("LT"):"",W&&"sending"===W)h="<div>"+y+"</div>";else if(W&&"error"===W)h="<div>"+w+"</div>";else if(A&&(A==In.L?(_=C,p&&("Human"===N&&m&&E?_=E.replace("<%Agent%>",m):"Bot"===N&&g&&k&&(_=k.replace("<%Bot%>",g)))):A==In.y&&(_=O)),L&&L.match(/<a/)&&(Y=L.replaceAll("<a target='_blank'","<a target='_blank' tabindex='-1'")),F&&F.length)F[0].name&&L?h=Y?S+" "+G+" "+_+" "+F[0].name+" "+Y:S+" "+G+" "+_+" "+F[0].name+" "+L:F[0].name&&(h=S+" "+G+" "+_+" "+F[0].name),h="<div>"+h+" "+M+"<span aria-hidden='true'>"+z||!1;else if(B&&B.length)h=S+" "+_+(L?" "+L:""),B.forEach((function(e){e.text&&(h=h+" "+e.text)})),h="<div>"+h+" "+M+"<span aria-hidden='true'>"+z||!1;else if(H&&Object.keys(H).length){var Q=(H||{}).title;h=S+" "+_+(L?" "+L:""),Q&&(h=h+" "+Q),h="<div>"+h+" "+M+"<span aria-hidden='true'>"+z||!1}else if(U&&Object.keys(U).length&&$&&$.length){h=S+" "+_+(L?" "+L:"");$.length>1?(h=h+" "+j,h=$.length>10?h.replace("<%totalSlides%>",10):h.replace("<%totalSlides%>",$.length)):$.forEach((function(e){e.title&&(h=h+" "+e.title)})),h="<div>"+h+" "+M+"<span aria-hidden='true'>"+z||!1}else if(K&&Object.keys(K).length){var X=K.type;X&&X==In.G&&(h="<div>"+S+" "+_+" "+I+" "+M+"<span aria-hidden='true'>"+z||!1)}else if(J&&J.toLowerCase()==In.q){var Z=Cn()(Cn()(V).$d).format("LLL");"send"!=c.toLowerCase()||l?("readonly"==c.toLowerCase()||l)&&(h="<div>"+D+" "+Z+"<span aria-hidden='true'>"+z||!1):h="<div>"+D+" "+P+" "+Z+"<span aria-hidden='true'>"+z||!1}else f.text&&(h=Y?"<div>"+S+" "+G+" "+_+" "+Y+" "+M+"<span aria-hidden='true'>"+z||!1:"<div>"+S+" "+G+" "+_+" "+f.text+" "+M+"<span aria-hidden='true'>"+z||!1)}return h})),m()(n,"setMarkdown",function(){var e=Qe()(tt.a.mark((function e(t){var r,o,a,i,s,c;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props||{},o=r.awaitMarkdown,e.next=3,o(t);case 3:n.markdownMessages=e.sent,a=n.props||{},i=a.status,s=n.state||{},c=s.newMessage,n.markdownMessages.length&&n.markdownMessages[0].timestamp!==c.timestamp?(n.props.setMarkdownMessages(n.markdownMessages),n.setState((function(){return{newMessage:n.markdownMessages[0],renderHistory:!1}}))):"historyFetched"===i||"restored"===i?n.setState((function(){return{renderHistory:!0}})):n.setState((function(){return{newMessage:{},renderHistory:!1}}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m()(n,"checkForConversationDisconnectMessage",(function(e){var t=n.props||{},r=t.bConversationDisconnectEnabled,o=(t.oCallbacks||{}).onConversationDisconnected,a=!1;if(r){var i=e||{},s=i.eventType,c=i.presence;if(s&&s.toLowerCase()===In.M){var l=(c||{}).type;l&&l.toLowerCase()===In.q&&(a=!0,n.state.bShowDisconnect||(n.setState((function(){return{bShowDisconnect:!0}})),o({bShowDisconnect:!0})))}}return a})),m()(n,"checkForSignedInMessage",(function(e){var t=e||{},n=t.presence,r=t.eventType;if(r&&r.toLowerCase()===In.M){var o=(n||{}).type;return!(!o||o.toLowerCase()!==In.O)}return!1})),n.aValidScrollKeyCodes=[0,1,38,33,void 0],n.bScrollLock=!1,n.transcriptRef=Object(f.createRef)(),n.transcriptContainerRef=Object(f.createRef)(),n.bStarterMessage=!0,n.oDateDivider={},n.oPreviousDate={},n.handleScroll=n.handleScroll.bind(n),n.markdownMessages=[],n.state={maxHeight:"",bShowDisconnect:!1,renderHistory:!1,newMessage:{}},n}return p()(t,e),i()(t,[{key:"getHeight",value:function(e){var t=this.props,n=t.textInputRef,r=(t.headerRef,t.bReadOnlySession),o=t.statusBoxRef,a=(e||{}).iHeaderHeight,i=105,s=66;return n.current?i=n.current.offsetHeight:r&&(i=o.current.offsetHeight),a&&(s=a),Number(s)+Number(i)}},{key:"handleScroll",value:function(e){var t,n=this,r=this.props.oCallbacks.fetchHistory,o=this.transcriptRef.current.scrollTop,a=e&&-1!==this.aValidScrollKeyCodes.indexOf(e.which);0==Math.round(o)&&a&&!this.bScrollLock&&(this.bScrollLock=!0,r&&(r(),clearTimeout(t)),t=setTimeout((function(){n.bScrollLock=!1}),2e3))}},{key:"componentDidMount",value:function(){this.props.getComponentMethods(this)}},{key:"updateComponent",value:function(e){var t="calc(100% - "+this.getHeight(e)+"px)";this.state.maxHeight!==t&&this.setState({maxHeight:t})}},{key:"componentWillUnmount",value:function(){this.props.getComponentMethods(null)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=e.sendingMessage,o=e.messages,a=e.status,i=e.userTyping,s=e.markdownMessages,c=(e.files,e.aFocusMngtMsgIds),l=e.bDisableTabStop,u=e.oDisableInputs,d=t||{},p=d.newMessage,g=d.maxHeight,m=(this.state||{}).newMessage,f=this.props||{},h=f.awaitMarkdown,b=f.setMarkdownMessages,v=f.setFocusMngtMsgIds,y=f.bDisableTabStop,w=f.oDisableInputs,x=(u||{}).bMessageFocus,S=(w||{}).bMessageFocus,O=(this.state||{}).maxHeight,C=function(e){var t=(e||{}).propertyName,r=Object(ke.c)(n.markdownMessages,o,t);return r&&r.length?(n.setMarkdown(r),!1):l!==y||x!==S||O!==g||(!i||!qa(m,p))},E=function(){n.markdownMessages=[],h([]),b([]),v([])};if(o&&o.length){if(this.markdownMessages.length||s.length!==o.length||(this.markdownMessages=s),o.length<this.markdownMessages.length){var k=Object(ke.c)(o,this.markdownMessages,"timestamp");k&&k.length&&E()}if("messagesUpdated"===a&&o.length===this.markdownMessages.length)return C({propertyName:"updatedTime"});if(o.length!==this.markdownMessages.length||r)return C({propertyName:"timestamp"})}else if(!o.length&&(this.markdownMessages.length||s.length||c.length))return E(),!0;return!i||!qa(m,p)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.messages,t.message,t.showProgress),r=t.i18n,o=t.oCallbacks,a=t.status,i=t.pageNumber,s=t.pageSize,c=t.bDisableTabStop,l=t.oDisableInputs,u=t.bShowTyping,d=t.direction,p=t.richMediaOptions,g=t.conversationRef,m=t.bAutoStartEnabled,f=t.markdownEnabled,b=t.cobrowse,v=t.bReadOnlySession,y=t.messageOutofOrderIndex,w=t.humanizeEnabled,x=t.humanizeConfig,S=t.disconnectType,O=(t.files,t.aFocusMngtMsgIds),C=t.maxMessageLength,E=t.view,k=t.oCustomer,T=this.state,R=T.maxHeight,j=T.newMessage,D=(b||{}).enabled,P=this.props.styles.color,I={messageType:"system",text:r.startConversationMessage,type:"text"},M=o.onMessageAdded,A=o.onOpenFilePrev,N=o.onErrorLoadingFile,F=o.downloadFile,L=o.onMessageSelection,B=o.onMediaLinkExpired,H="fetchingHistory"===a||"historyFetched"===a||"historyComplete"===a,K=!1,z=!1,U=!1,q=!1,V=!1;m&&(I.text=r.autoStartConversationMessage),R&&(Ha=Ma(Ma({},Ha),{},{maxHeight:R}));var W=function(t,n){Ba?e.transcriptRef&&e.transcriptRef.current&&e.transcriptRef.current.scrollTo(0,e.transcriptRef.current.scrollHeight):setTimeout((function(){t&&t.current&&t.current.scrollIntoView({behavior:"smooth",block:n?"nearest":"end",inline:"end"})}),10)},_=ve()(this.markdownMessages||[]);"historyFetched"!==a&&"restored"!==a||(this.bStarterMessage=!1),"historyComplete"!==a&&"sessionCleared"!==a||this.bStarterMessage||(this.bStarterMessage=!0),i&&1===i&&s&&(_&&_.length&&_.length<s||Array.isArray(_)&&!_.length)&&(this.bStarterMessage=!0),this.bStarterMessage&&_.push(I),j&&Object.keys(j).length&&M(j);var G=[],Y=[],$=[],J=[],Q=!1,X=!1;return h.a.createElement("div",null,n&&h.a.createElement(sn.a,{variant:"query"}),_&&!!_.length&&h.a.createElement("div",{style:Ha,ref:this.transcriptRef,className:"mxg-transcript",onScroll:this.handleScroll,tabIndex:-1},h.a.createElement("div",{style:Ka,ref:this.transcriptContainerRef},u&&h.a.createElement("span",{style:za},h.a.createElement(Ea,{dotsCount:3,i18n:r,onScrollDown:W})),_.map((function(t,n){var o,a="",i={},s=!1,u=!1,m=!1,b=!1,T=!1,R=t||{},I=R.eventType,M=R.contentType,Z=R.carousel,ee=R.messageType,te=R.originatingEntity,ne=R.deliveryStatus,re=R.type,oe=R.from,ae=R.card;T=!1,_.length>n+1&&(i=_[n+1]),t.timestamp&&(a=Cn()(t.timestamp),0==n?e.oPreviousDate=a:a.$D&&e.oPreviousDate.$D&&e.oPreviousDate.$D!==a.$D&&(T=!0,e.oDateDivider=Ma({},e.oPreviousDate),e.oPreviousDate=a));var ie=i,se=ie.messageType,ce=ie.originatingEntity,le=ie.from;if((ee&&se&&ee!==se||te&&ce&&te!==ce||function(e,t){var n=!1,r=e||{},o=r.name,a=r.avatar,i=t||{},s=i.name,c=i.avatar;return o&&s&&o!==s||a&&c&&a!==c?n=!0:(o&&s||!a&&!c||a===c)&&(a&&c||!o&&!s||o===s)||(n=!0),n}(oe,le)||te===ce&&"event"===re)&&J.push(n+1),w)switch(ee){case"inbound":0!=n&&-1===J.indexOf(n)||(V=!0,s=!0);break;case"outbound":var ue=function(e,t){var n="";return(e&&t&&"text"===e.toLowerCase()||"structured"===e.toLowerCase())&&(n=t.toLowerCase()),n}(re,te);"human"===ue?0!=n&&-1===J.indexOf(n)||(K=!0,z=!0,m=!0):"bot"===ue&&(0!=n&&-1===J.indexOf(n)||(U=!0,q=!0,b=!0))}Q||I||!ne||"sent"!==ne?Q||ne||I||!ee||"inbound"!==ee||(Q=!0):(Q=!0,u=!0);var de=(Z||{}).cards,pe=!1,ge=!1;if(ae&&null!==(o=ae.title)&&void 0!==o&&o.length&&(pe=!0),de&&null!=de&&de.length){var me=de.find((function(e){return e.title.toString()}));me&&(ge=!0)}_.length>n+1&&(i=_[n+1]);var fe=!!t.quickReplies&&!!t.quickReplies.length,he=0==n&&fe||!1,be=t.contentType&&t.contentType===In.n&&pe||!1,ve=D&&t.eventType&&t.eventType===In.f||!1,ye=!1,we=!1,xe=!1,Se=e.checkForConversationDisconnectMessage(t)||!1,Oe=e.checkForSignedInMessage(t)||!1;Se&&0===n?X=!0:Se&&0!==n&&(X=!1);var Ce=M&&M===In.o&&Z&&Object.keys(Z).length>=1&&ge||!1,Ee=!1;if(ve){var ke=(t||{}).coBrowse;if(ke&&Object.keys(ke).length){var Te=ke||{},Re=Te.type,je=Te.sessionId;if(Re&&je)switch(Re){case In.G:ye=!0,G&&G.length&&-1!==G.indexOf(je)?(0===G.indexOf(je)&&1===n&&(Ee=!0),we=!0):Y&&Y.length&&-1!==Y.indexOf(je)?(0===Y.indexOf(je)&&2===n&&(Ee=!0),we=!0):$&&$.length&&-1!==$.indexOf(je)?(0===$.indexOf(je)&&1===n&&(Ee=!0),xe=!0):X&&($.push(je),xe=!0);break;case In.I:var De=e.props.getRejectedOffersSet();De&&De.length&&De.has(je),$.push(je);break;case In.H:G.push(je);break;case In.J:Y.push(je)}}}var Pe=!!t.text||!(!t.files||!t.files.length)||be||ye||Ce||Oe,Ie=!1,Me=_.length?_[0]:{},Ae=Me.eventType,Ne=(Me.presence||{}).type;return Ae&&Ae.toLowerCase()===In.M&&Ne&&Ne.toLowerCase()===In.O&&(Ie=!0,fe&&1===n&&(he=!0)),h.a.createElement(h.a.Fragment,{key:t.id||n},T&&h.a.createElement(Ua,{oDateDivider:e.oDateDivider}),Pe&&h.a.createElement(xa,{key:t.id||n,color:P,view:E,messages:_,message:t,previousMessage:i,newMessage:j,bLastMessage:0===n||!(1!==n||!t.text||!Ie),time:Cn()(a.$d).format("LT"),scrollToMessage:!H&&n===y||Ee,scrollDown:!H&&(0===n||n===y)||Ee,transcriptContainerRef:e.transcriptContainerRef,onOpenFilePrev:A,onErrorLoadingFile:N,onMediaLinkExpired:B,onSelection:L,downloadFile:F,i18n:r,maxMessageLength:C,bDisableTabStop:c,disableFocus:l.bMessageFocus,direction:d,richMediaOptions:p,bQuickReplies:fe,bActiveQuickReply:he,bCard:be,bCobrowse:ve,bCarousel:Ce,bOfferExpired:xe,bShowSignedMessage:Oe,markdownEnabled:f,conversationRef:g,transcriptRef:e.transcriptRef,onScrollDown:W,bOfferAttended:we,humanizeEnabled:w,humanizeConfig:x,showAgentAvatar:K&&m,showAgentName:z&&m,showBotAvatar:U&&b,showBotName:q&&b,showCustomerName:V&&s,bSentMessage:u,aFocusMngtMsgIds:O,newRelic:e.props.newRelic,oCustomer:k}),Se&&h.a.createElement(Pa,{color:P,dateTime:Cn()(a.$d).format("LLL"),i18n:r,bDisableTabStop:c,disableFocus:l.bMessageFocus,scrollDown:!H&&0===n,onScrollDown:W,bReadOnlySession:v,disconnectType:S}))})))),h.a.createElement("div",{className:"cx-messenger-screen-reader","aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",tabIndex:-1,dangerouslySetInnerHTML:{__html:Object(ke.b)(this.screenReaderTranscriptMessage())}}))}}])}(h.a.Component),Wa=function(e){return function(t){return h.a.createElement(Mt.a.Consumer,null,(function(n){var r=n.oDisableInputs,o=n.markdownMessages,a=n.setMarkdownMessages,i=n.getRejectedOffersSet,s=n.aFocusMngtMsgIds,c=n.setFocusMngtMsgIds,l=n.newRelic,u=n.oCustomer;return h.a.createElement(e,Ze()({},t,{oDisableInputs:r,markdownMessages:o,setMarkdownMessages:a,getRejectedOffersSet:i,aFocusMngtMsgIds:s,setFocusMngtMsgIds:c,newRelic:l,oCustomer:u}))}))}}(Va);Va.propTypes={styles:v.a.object,message:v.a.object,messages:v.a.array,status:v.a.string,bShowTyping:v.a.bool,bTypingStopped:v.a.bool,markdownEnabled:v.a.bool,textInputRef:v.a.object,headerRef:v.a.object,showProgress:v.a.bool.isRequired,i18n:v.a.object.isRequired,oCallbacks:v.a.object,oDisableInputs:v.a.object.isRequired,disableFocus:v.a.bool,richMediaOptions:v.a.object.isRequired,messageOutofOrderIndex:v.a.any,getComponentMethods:v.a.func};var _a=n(614),Ga=n.n(_a),Ya=n(615),$a=n.n(Ya),Ja=n(616),Qa=n.n(Ja),Xa=n(657),Za=Object(It.a)("div")((function(e){e.theme;return{position:"absolute",right:"0",background:"white",zIndex:"2",width:"100%",height:"100%",maxHeight:"calc(100% - 60px)"}}));function ei(e){var t=e.content,n=e.children;return h.a.createElement(Xa.a,{in:!0},h.a.createElement(Za,null,t||n))}ei.propTypes={content:v.a.node,headerRef:v.a.object};var ti=n(422),ni=n(425),ri=n(350),oi=n(669),ai=n(670);function ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ci={"&.Cx-MuiList-root":{paddingBottom:"0px"},"& .Cx-MuiListItem-root":{padding:"4px 8px 4px 12px"},"& .Cx-MuiListItem-container":{margin:"0px 12px",borderRadius:"6px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2), 0px 6px 10px 0px rgba(0,0,0,0.14), 0px 1px 18px 0px rgba(0,0,0,0.12)"},"& .Cx-MuiListItemText-primary":{whiteSpace:"nowrap",maxWidth:"80%",overflow:"hidden",textOverflow:"ellipsis"},"& .Cx-MuiListItemSecondaryAction-root":{right:"6px"}},li=!1,ui={width:"70%",height:"70%"},di={position:"absolute",left:"0px",zIndex:1};function pi(e){var t=e.enableAttachments,n=e.data,r=e.onRemove,o=(e.styles,e.ariaRemove),a=e.disabled,i=e.direction,s=e.oDisableInputs,c=(n.url,n.name),l=n.size,u=n.id,d=n.downloadUrl,p=n.percentage,g=n.type,m=g&&0!==g.length?Object(At.i)(g):"File",f=!(!m||-1===["Document","PDF","Presentation","Spreadsheet","Text"].indexOf(m)),b=!(!m||"Image"!==m),v=!(!b||void 0!==t),y=!(!b||!t),w=!(!m||"Video"!==m),x=!(!m||"Audio"!==m),S=!(!m||"File"!==m);b&&(li=Object(At.e)(g));var O=h.a.useState(!1),C=$e()(O,2),E=C[0],k=C[1],T=h.a.useState(!1),R=$e()(T,2),j=R[0],D=R[1],P=j?"indeterminate":"determinate",I=p?Number(p):5;return 100==I&&(d?setTimeout((function(){D(!1)}),600):setTimeout((function(){D(!0)}),600)),h.a.createElement(bn.a,{sx:ci,className:"mxg-attach-file-container"},h.a.createElement(vn.a,{tabIndex:s.bAttachFileButton?-1:0,"aria-labelledby":"file_details"},h.a.createElement(ti.a,null,h.a.createElement(ao.a,{sx:{position:"relative",display:"inline-flex",verticalAlign:"middle",textAlign:"center",transform:"rtl"===i?"scaleX(-1)":void 0}},h.a.createElement(Er.a,{variant:P,value:I,size:46,"aria-hidden":"true"}),h.a.createElement(ao.a,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"}},h.a.createElement(mt.a,{variant:"circular",className:"mxg-attach-file-avatar"},d&&b&&li&&h.a.createElement("img",{src:d,style:{width:"100%",height:"100%"},alt:""}),d&&y&&!li&&h.a.createElement(Dr.a,{alt:"",sx:si({},ui),className:"mxg-attach-file-avatar-image-files"}),!d&&v&&h.a.createElement(oi.a,{alt:"",sx:si({},ui),className:"mxg-attach-file-avatar-image"}),!d&&y&&h.a.createElement(Dr.a,{alt:"",sx:si({},ui),className:"mxg-attach-file-avatar-image-files"}),w&&h.a.createElement(Rr.a,{alt:"",sx:si({},ui),className:"mxg-attach-file-avatar-video"}),x&&h.a.createElement(jr.a,{alt:"",sx:si({},ui),className:"mxg-attach-file-avatar-audio"}),S&&h.a.createElement(Pr.a,{alt:"",sx:si({},ui),className:"mxg-attach-file-avatar-generic"}),f&&h.a.createElement(Ir.a,{alt:"",sx:si({},ui),className:"mxg-attach-file-avatar-doc"}))))),h.a.createElement(ni.a,{primaryTypographyProps:{dir:"auto"},primary:c,secondary:Object(At.h)(l),id:"file_details"}),h.a.createElement(ri.a,null,h.a.createElement(ao.a,{sx:{position:"relative",display:"inline-flex",transform:"rtl"===i?"scaleX(-1)":void 0}},h.a.createElement(lt.a,{className:"mxg-attach-file-closebtn",children:h.a.createElement(ai.a,{fontSize:"small","aria-hidden":"true",alt:"",sx:{width:"26px",height:"26px",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}),"aria-label":o,onClick:function(e){k(!0),r({id:u})},disabled:!u||a||s.bAttachFileButton,size:"large"}),E&&h.a.createElement(Er.a,{size:48,thickness:2.6,sx:si({},di)})))))}function gi(e,t,n){return t=u()(t),c()(e,mi()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function mi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mi=function(){return!!e})()}function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}pi.propTypes={enableAttachments:v.a.bool,data:v.a.object,onRemove:v.a.func.isRequired,ariaRemove:v.a.string,disabled:v.a.bool,oDisableInputs:v.a.object,direction:v.a.string};var bi={severity:{offline:"error",reconnecting:"warning",authenticating:"info",reAuthenticating:"info"},i18n:{offline:"disconnected",reconnecting:"reconnecting",authenticating:"authenticating",reAuthenticating:"reAuthenticating"}},vi="Conversation",yi=m()({inputBox:"".concat(vi,"-inputBox"),focused:"".concat(vi,"-focused"),spinner:"".concat(vi,"-spinner"),inputButton:"".concat(vi,"-inputButton"),sendIcon:"".concat(vi,"-sendIcon"),attachIcon:"".concat(vi,"-attachIcon")},"inputButton","".concat(vi,"-inputButton")),wi=Object(It.a)("div")((function(e){var t=e.theme;e.props;return m()(m()(m()(m()(m()(m()(m()(m()({},"&.".concat(yi.inputBox),{borderTop:"1px solid #8a8a8a"}),"& .".concat(yi.focused),{borderTop:function(e){return"1px solid #333"}}),"& .".concat(yi.spinner),{position:"relative",top:"40%",textAlign:"center"}),"& .".concat(yi.inputButton),{display:"none"}),"& .".concat(yi.sendIcon),{float:"right",marginRight:"6px","&:focus-visible":{outlineColor:t.palette.common.outlineColor}}),"& .".concat(yi.attachIcon),{float:"left",marginLeft:"4px","&:focus-visible":{outlineColor:t.palette.common.outlineColor}}),"& .".concat(yi.inputButton),{display:"none"}),"&.startNewButton",{textAlign:"center",padding:"14px 0px 4px 0px"})})),xi={"&.Cx-MuiTextField-root":{backgroundColor:"transparent"},"& .Cx-MuiInputBase-multiline":{padding:"19px 18px 16px!important",borderRadius:"0!important"},"& .Cx-MuiInput-input":{"&::placeholder":{opacity:.65}}},Si={position:"absolute",justifyContent:"center",zIndex:3,width:"92%",margin:"16px"},Oi=!1,Ci=h.a.forwardRef((function(e,t){var n=e.color,r=e.i18n,o=e.sendMessage,a=e.onAttachment,i=e.onRemoveAttachment,s=e.onhandleMxgInput,c=e.enableAttachments,l=e.allowedMediaPresence,u=e.bImageOnlyFileType,d=e.onBlur,p=e.onFocus,g=e.autoFocus,m=e.aFileTypes,f=e.files,b=e.status,v=e.prevStatus,y=(e.error,e.bPreviewOpened),w=e.bPreviewClosed,x=e.bDisable,S=e.inputRef,O=e.oDisableInputs,C=e.bDisabledSend,E=e.maxMessageLength,k=e.direction,T=e.previewMode,R=e.nRMessengerPageActionMetrics,j={value:"",bTyping:!1,bAttachFile:!1,bFocused:!1},D=h.a.useState(j),P=$e()(D,2),I=P[0],M=P[1],A="requestingUpload"==b||"uploadApproved"==b||"uploading"==b||"requestingUpload"==v&&"connected"==b,N=("uploading"==v||"fileUploaded"==v)&&"fileUploaded"==b,F="deletingFile"==b,L="deletingFile"==v&&"fileDeleted"==b,B=!!f.name,H=[25,50,75],K="",z=h.a.createRef(),U={"audio/MPA":".mpa"};Array.isArray(m)&&m.length>0&&(m.forEach((function(e){U.hasOwnProperty(e)&&(e=e+","+U[e]),K=K+e+","})),K=K.slice(0,-1));var q=!!(!l||l&&u),V=!(!c&&!l||u);T&&c&&(q=!1,V=!0,K||(K="*/*"));var W=function(){A||(o(I.value,B),M(hi({},j)),S.current.focus())},_=function(e){var t=e.target,n=t.files;a(n),t.value="",S.current.focus()},G=!0;A||y?G=!0:B&&N?G=!1:(I.bTyping||I.bFocused)&&(G=!I.value&&!B);var Y,$={width:"26px",height:"26px",display:"flex",alignItems:"inherit",justifyContent:"inherit"};return h.a.createElement(h.a.Fragment,null,B&&h.a.createElement(pi,{onRemove:function(e){i(e),R.attachmentremoved(),S.current.focus()},enableAttachments:c,direction:k,ariaRemove:r.ariaRemoveButton,data:hi(hi({},f),{},{id:f.attachmentId}),key:f.attachmentId||Object(At.s)(),oDisableInputs:O,disabled:x}),h.a.createElement(Vn.a,{ref:t,id:"mxg-message-input",color:n,placeholder:r.inputMessagePlaceholder,sx:xi,multiline:!0,InputProps:{disableUnderline:!0},fullWidth:!0,autoFocus:g,inputRef:S,maxRows:4,value:I.value,inputProps:{"aria-label":I.value||r.inputMessagePlaceholder,maxLength:E},variant:"standard",onChange:function(e){e.persist(),s(e),M((function(t){return hi(hi({},t),{},{value:e.target.value,bTyping:!0})}))},onKeyPress:function(e){13!=e.which||e.ctrlKey||e.shiftKey||C||(W(),e.preventDefault())},onFocus:function(e){p(e),M((function(e){return hi(hi({},e),{},{bFocused:!0})}))},onBlur:function(e){d(e),B||M((function(e){return hi(hi({},e),{},{bFocused:!1})}))},onPaste:function(e){e.clipboardData.files&&e.clipboardData.files.length&&K&&!B&&_({target:e.clipboardData})},disabled:y||O.bTextField||x}),h.a.createElement("span",null,K&&!B&&h.a.createElement("span",null,h.a.createElement("input",{type:"file",className:yi.inputButton,id:"attach-file-button",accept:K,onChange:_,ref:z}),h.a.createElement("label",{htmlFor:"attach-file-button"},h.a.createElement(lt.a,{className:yi.attachIcon,"aria-label":r.ariaAttachButton,title:r.ariaActionsAttachFileTitle,component:"span",onKeyUp:function(e){13!==e.which&&32!==e.which||e.ctrlKey||e.shiftKey||z.current.click()},disabled:y||O.bAttachFileButton||x},q&&!V&&h.a.createElement(Ga.a,{alt:"",sx:hi({},$)}),V&&!q&&h.a.createElement($a.a,{alt:"",sx:hi({},$)})))),h.a.createElement(lt.a,{className:"mxg-conversation-sendbtn ".concat(yi.sendIcon),"aria-label":r.ariaSendButton,title:r.ariaSendButton,disabled:G||O.bSendIcon||x||C,onClick:W,size:"large"},h.a.createElement(Kt.a,{icon:Sn.a,alt:"",customStyle:$}))),h.a.createElement("div",{className:"cx-messenger-screen-reader","aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",tabIndex:-1},h.a.createElement("span",{tabIndex:-1,dangerouslySetInnerHTML:{__html:Object(ke.b)(function(){if(A){var e="";return H.forEach((function(t){100!=f.percentage&&f.percentage>=t&&f.percentage<=t+5&&(e=100-f.percentage+" "+r.ariaPercentRemaining)})),f.percentage>0?e:r.ariaFileUploading}return N?r.ariaFileUploadComplete:F?r.ariaRemovingFile:L?r.ariaFileRemoved:y&&"requestingFile"==v&&"messagesUpdated"==b?r.ariaImagePreviewOpened:w&&"messagesUpdated"==v&&"messagesUpdated"==b?r.ariaImagePreviewClosed:""}())}}),h.a.createElement("span",{tabIndex:-1,dangerouslySetInnerHTML:{__html:Object(ke.b)((Y=(I||{}).value,Y&&Y.length===E?r.ariaMessageLengthLimit:""))}})))})),Ei=function(e){function t(e){var n;o()(this,t),n=gi(this,t,[e]),m()(n,"registerPlugin",(function(){var e=n.props,t=e.setConvPluginRef,r=e.convPluginRef,o=e.payload,a=e.config,i=e.restoring,s=((a||{}).apps||{}).conversations,c=(s||{}).autoStart,l=(s||{}).humanize,u=(c||{}).enabled,d=((l||{}).enabled,n);o&&o.journeyContext&&(d.oMetaData.journeyContext=o.journeyContext),r&&Object.keys(r).length?(d.oConversation=r,d.oMetaData.opened=(new Date).getTime(),r.publish("opened",d.oMetaData),!u||i||d.bSessionActive||r.subscribe("MessagingService.ready",(function(){setTimeout((function(){r.republish("autoStart",d.oMetaData)}),200)}))):Genesys("registerPlugin",n.sPluginName,(function(e){e&&Object.keys(e).length&&(d.oConversation=e,t(e),e.ready(),d.oMetaData.opened=(new Date).getTime(),e.publish("opened",d.oMetaData),!u||i||d.bSessionActive||e.subscribe("MessagingService.ready",(function(){e.republish("autoStart",d.oMetaData)})),e.subscribe("MessagingPreview.ready",(function(){Oi=!0})))}))})),m()(n,"generateErrorAlert",(function(e){return Object.assign({},n.oAlerts.error,{message:n.handleErrorMessage(e),alertType:n.sAlertType,onPrimary:function(){n.props.dispatch(it.clearError()),n.props.closeAlertDialog()}})})),m()(n,"handleMxgInput",(function(e){n.onUserTyping(),n.setState({inputValue:e.target.value,bTyping:!0})})),m()(n,"dispatchMessage",(function(e){if("object"===wr()(e)){if(Object.keys(e).length){var t=e.type;!t||"quickReply"!==t&&"card"!==t&&"cobrowse"!==t?n.props.dispatch(it.send(e)):(n.props.dispatch(it.sendTextBack(e)),n.inputRef.current&&n.inputRef.current.focus())}}else n.props.dispatch(it.send({message:e}))})),m()(n,"sendMessage",(function(e,t){var r=n.props,o=r.payload,a=r.conversationStore||{},i=a.status,s=a.connection;i&&"connected"===i&&s&&"opened"===s&&(n.bSessionActive=!0),(""!==e||t)&&(n.bSessionActive||n.bPendingConnection?(n.dispatchMessage(e),n.setState({inputValue:"",bTyping:!1})):(n.props.dispatch(it.connect(o)),setTimeout((function(){n.dispatchMessage(e),n.setState({inputValue:"",bTyping:!1})}),300)))})),m()(n,"removeAgentIndicator",(function(e){n.bShowAgentTyping=!1,n.bTypingStopped=!0,e&&Object.keys(e).length&&n.props.dispatch(it.clearTypingTimeout())})),m()(n,"onAgentTyping",(function(){var e=n.props.conversationStore,t=n.state.inputValue,r=e.files,o=e.typingNotification,a=!!r.name;""!==t||a?n.bShowAgentTyping?n.removeAgentIndicator(o):(n.bTypingStopped=!1,n.props.dispatch(it.clearTypingTimeout())):n.bShowAgentTyping||(n.bShowAgentTyping=!0,n.bTypingStopped=!1)})),m()(n,"onUserTyping",(function(){var e=(n.props.config.apps||{}).conversations||{},t=e.showUserTypingIndicator,r=(e.autoStart||{}).enabled;t&&n.bSessionActive&&(r&&!n.bPreventEvent?n.props.dispatch(it.sendTyping()):r||n.props.dispatch(it.sendTyping()))})),m()(n,"onAttachment",(function(e){e&&e.length&&n.props.dispatch(it.requestUpload(e))})),m()(n,"onRemoveAttachment",(function(e){e&&e.id&&n.props.dispatch(it.deleteFile(e))})),m()(n,"onMessageAdded",(function(e){n.oConversation&&n.oConversation.publish("messageAdded",e)})),m()(n,"onOpenFilePrev",(function(e,t,r){n.OverlayNode=e;var o=n.props.onFilePreviewOpened,a={route:"conversations.filePreview",imagePrevComp:e,file:t};n.props.dispatch(it.getFile(t)),n.nRMessengerPageActionMetrics.attachmentClicked(),o(a)})),m()(n,"onUpdateFilePrev",(function(e,t){n.OverlayNode=e,(0,n.props.onFilePreviewOpened)({route:"conversations.filePreview",imagePrevComp:e,file:t})})),m()(n,"onErrorLoadingFile",(function(e){e&&n.props.dispatch(it.refreshFiles([e]))})),m()(n,"onMediaLinkExpired",(function(e){e&&n.props.dispatch(it.getFile(e))})),m()(n,"onConnectionRestored",(function(e){var t=n.props.conversationStore.connectionStatus;n.bPendingConnection=!1,n.bRestoreFailed&&(n.bRestoreFailed=!1,n.bSessionActive=!0),!n.bSessionActive||t&&"offline"===t?n.props.dispatch(it.pending()):n.props.dispatch(it.connected())})),m()(n,"getAlertType",(function(){return"normal"})),m()(n,"fetchHistory",(function(){n.props.dispatch(it.fetchHistory())})),m()(n,"downloadFile",(function(e){n.props.dispatch(it.downloadFile(e)),n.nRMessengerPageActionMetrics.attachmentDownloaded()})),m()(n,"startNewConversation",(function(){((((n.props.config||{}).apps||{}).conversations||{}).conversationDisconnect||{}).enabled&&(n.bResetConversation=!0,n.props.fConversationDisconnected(!1),n.props.dispatch(it.resetConversation()))})),m()(n,"resetConversation",(function(){var e=n.props||{},t=e.config,r=e.conversationStore.readOnly,o=e.fConversationDisconnected,a=(((t||{}).apps||{}).conversations||{}).conversationDisconnect||{},i=a.enabled,s=a.type,c=n.state.bReadOnlySession;!i||"ReadOnly"!=s&&r||(n.bConversationDisconnected=!1,n.bResetConversation=!0,o(!1),"boolean"==typeof c&&c&&n.setState({bReadOnlySession:!1}))})),m()(n,"onStarted",(function(){var e=(n.oMetaData||{}).started,t=n.state.prevConversationStore.previousStatus,r=n.props.config||{},o=r.apps,a=r.auth,i=(((o||{}).conversations||{}).autoStart||{}).enabled,s=(a||!1).enabled;e&&!n.bResetConversation||t&&(!t||"restored"===t)||(n.bSessionActive=!0,n.oMetaData.started=(new Date).getTime(),n.oConversation&&n.oConversation.publish("started",n.oMetaData),n.bResetConversation&&(i&&s&&setTimeout((function(){n.props.dispatch(it.openedConversation())}),400),n.bResetConversation=!1),n.bPendingConnection=!1,n.props.bShowAlertDialog&&!n.bRestoreFailed&&(n.props.closeAlertDialog(),n.onConnectionRestored()))})),m()(n,"onRestored",(function(){n.oConversation&&!n.bRestored&&(n.bRestored=!0,n.oConversation.publish("restored",hi(hi({},n.oMetaData),{},{messages:n.props.conversationStore.messages})))})),m()(n,"handleErrorMessage",(function(e){var t=n.props,r=t.i18n,o=t.config.fileUpload,a=t.conversationStore,i=o||{},s=i.enableAttachments,c=(i.modes,(a||{}).allowedMediaPresence),l=(e||{}).errorKey,u="boolean"==typeof s&&!0===s;void 0===s&&c&&(u=!0);var d=r.errors.generic;if(l)switch(l){case"fileTypeInvalid":d=u?r.errors.fileTypeInvalidMultipleFiles||r.errors.generic:(d=r.errors[l]||r.errors.generic).replace("<%allowedFileTypes%>",n.aAllowedFileTypes);break;case"fileTooLarge":case"fileSizeZero":d=(d=r.errors[l]||r.errors.generic).replace("<%maxFileSizeLimit%>",Object(At.h)(n.maxFileSize,2,n.bRounded));break;case"fileNameInvalid":case"fileNameTooLong":case"fileContentInvalid":d=r.errors[l]||r.errors.generic;break;case"messageLengthExceeded":d=(d=r.errors[l]||r.errors.generic).replace("<%maxMessageLength%>",n.maxMessageLength)}return d})),m()(n,"onStartFailed",(function(){var e=n.props,t=(e.i18n,e.conversationStore.error);n.sAlertType="startFailed",n.bPendingConnection?n.props.showAlertDialog(n.oAlerts.startFailed):n.props.showAlertDialog(n.oAlerts.generic),n.oConversation&&n.oConversation.publish("error",{error:t,metadata:n.oMetaData})})),m()(n,"onRestoreFailed",(function(){var e=n.props,t=(e.i18n,e.conversationStore.error);n.sAlertType="restoreFailed",n.props.showAlertDialog(n.generateErrorAlert(t)),n.bRestoreFailed=!0,n.bRestored=!1,n.oConversation&&n.oConversation.publish("error",{error:t,metadata:n.oMetaData})})),m()(n,"onSessionExpired",(function(){n.bSessionActive=!1})),m()(n,"onSessionLoggedOut",(function(){n.bSessionActive=!1})),m()(n,"onFetchHistoryFailed",(function(){var e=n.props,t=(e.i18n,e.conversationStore.error);n.sAlertType="fetchHistoryFailed",n.props.showAlertDialog(n.generateErrorAlert(t)),n.oConversation&&n.oConversation.publish("error",{error:t,metadata:n.oMetaData})})),m()(n,"onTextInputFocus",(function(){n.textInput.current&&(n.textInput.current.style.borderTop="1px solid #333")})),m()(n,"onTextInputBlur",(function(){n.textInput.current&&(n.textInput.current.style.borderTop="1px solid #8a8a8a")})),m()(n,"onConversationDisconnected",(function(e){var t=n.props,r=t.config.apps,o=t.fConversationDisconnected,a=t.conversationStore,i=(e||{}).bShowDisconnect,s=((r||{}).conversations||{}).conversationDisconnect||{},c=s.enabled,l=s.type,u=(a||{}).readOnly,d=n.state.bReadOnlySession;if(c&&l){if(n.bConversationDisconnected||(n.bConversationDisconnected=!0),"boolean"==typeof i&&"boolean"==typeof d)switch(u){case!0:d||n.setState({bReadOnlySession:!0});break;case!1:d&&n.setState({bReadOnlySession:!1})}else"ReadOnly"==l&&"boolean"==typeof d&&(d||n.setState({bReadOnlySession:!0,bShowDisconnect:!0}));d&&"boolean"==typeof i&&(o(i),n.setState({bShowDisconnect:i}))}})),m()(n,"onReadOnlySession",(function(){var e=n.props,t=e.config.apps,r=e.conversationStore.readOnly,o=((t||{}).conversations||{}).conversationDisconnect||{},a=o.enabled,i=o.type,s=(n.state.conversationStore||{}).messages,c=n.state.bReadOnlySession,l=!1;if(s&&s.length){var u=s[0],d=u.eventType,p=u.presence;if(d&&"Presence"==d&&p){var g=(p||{}).type;g&&"Disconnect"==g&&(l=!0)}}a&&("ReadOnly"==i||r)&&"boolean"==typeof c&&!c&&l&&n.setState({bReadOnlySession:!0})})),m()(n,"onResetDisconnectSession",(function(){var e=n.state,t=e.bReadOnlySession,r=(e.conversationStore||{}).messages,o=!1;if(r&&r.length){var a=r[0],i=a.eventType,s=a.presence;if(i&&"Presence"==i&&s){var c=(s||{}).type;c&&"Disconnect"==c&&(o=!0)}}o||"boolean"==typeof t&&t&&(n.bConversationDisconnected=!1,n.setState({bReadOnlySession:!1,bShowDisconnect:!1}))})),m()(n,"updateTranscriptHeight",(function(){var e=n.props,t=e.iHeaderHeight,r=e.headerRef,o="calc(100% - "+n.childComponent.getHeight({iHeaderHeight:r&&r.current?r.current.offsetHeight:t})+"px)";n.childComponent.transcriptRef.current&&(n.childComponent.transcriptRef.current.style.maxHeight=o)})),n.textInput=h.a.createRef(),n.conversationRef=h.a.createRef(),n.inputRef=h.a.createRef(),n.statusBoxRef=h.a.createRef(),n.state={inputValue:"",bTyping:!1,file:"",conversationStore:"",prevConversationStore:"",prevMessengerStore:"",prevConfig:"",bReadOnlySession:!1,bCleared:!1,bShowDisconnect:!1},n.bPreviewClosed=!1,n.bObserving=!1,n.oDisableInputs=e.oDisableInputs||{},n.sPluginName="Conversations",n.oConversation="",n.sErrorMessage="",n.sAlertType="",n.aAllowedFileTypes=[],n.maxFileSize="",n.onConnectionRestored=n.onConnectionRestored.bind(n),n.bSessionActive=e.restoring||!1,n.restoring=e.restoring||!1,n.bPendingConnection=!1,n.bRestoreFailed=!1,n.bRestored=!1,n.bPreventEvent=!1,n.bConversationDisconnected=!1,n.bResetConversation=!1,n.bDisabledSend=!1,n.bPreviewUpdated=!1,n.bShowAgentTyping=!1,n.bTypingStopped=!1,n.bRounded=!0,n.childComponent="",n.oMetaData={opened:"",closed:"",started:"",completed:""},n.OverlayNode="";var r=e.config,a=e.newRelic,i=(((r||{}).richMedia||{}).quickReply||{}).mode,s=(a||{}).pageActionMetrics;return n.richMediaOptions={quickReply:{mode:i||"standard"}},n.maxMessageLength=4096,n.oAlerts={generic:{message:e.i18n.errors.generic,primary:e.i18n.okButton,alertType:"generic"},error:{message:"",primary:e.i18n.okButton,alertType:""},startFailed:{message:e.i18n.errors.startFailed,primary:e.i18n.okButton,alertType:"startFailed"}},n.nRMessengerPageActionMetrics=s,n.sConversationClassName=Object(At.l)(r),n.sHomeClassName=Object(At.m)(r),n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.conversationStore,r=n.connection,o=n.status,a=n.resetSession,i=n.previousStatus,s=t.open,c=t.config,l=t.getTranscriptComponentMethods,u=t.previousConversationExpired,d=t.previousConversationCleared,p=t.fResetConversationCleared,g=t.verifyStorageAndRemove,m=t.messengerStore,f=t.route,b=t.openConversation,v=t.i18n,y=(t.setHomeScreenHeight,t.oDisableInputs),w=t.previousSessionInActive,x=t.storeConversationProps,S=t.autoClosed,O=t.prevConversationStatus,C=t.isSignedIn,E=this.state.bCleared,k=c||{},T=k.apps,R=k.direction,j=k.home,D=k.cobrowse,P=T||{},I=P.conversations,M=P.knowledge,A=((I||{}).autoStart||{}).enabled,N=c.auth||!1,F=N.enabled,L=N.allowSessionUpgrade;this.sConversationClassName=Object(At.l)(c),this.sHomeClassName=Object(At.m)(c);var B=m||{},H=B.route,K=B.file,z=D||{},U=z.enabled,q=z.channels,V=(M||{}).enabled,W=!!(U&&q&&q.length)&&q.includes("voice");if(l(this.childComponent),this.registerPlugin(),g(),setTimeout((function(){s&&e.oConversation&&e.oConversation.command("MessengerHelper.setDimension",{conversations:{height:In.E,width:In.F,removeClass:[e.sHomeClassName],addClass:[e.sConversationClassName]}})})),r&&"closed"===r&&!u?this.props.dispatch(it.reconnect()):"logout"!==i&&"sessionLoggedOut"!==i||"opened"!==r||!L||this.props.dispatch(it.reconnect()),"sessionExpired"===o&&(F?this.props.dispatch(it.restoreAuthSession()):this.props.dispatch(it.sessionCleared())),A&&F&&this.props.dispatch(it.openedConversation()),F&&d&&("closed"===o||"closed"===r)&&(L?C&&this.props.dispatch(it.restoreAuthSession()):this.props.dispatch(it.restoreAuthSession()),p()),d&&p(),A&&"closed"===r&&!this.bSessionActive&&u&&!a&&this.props.dispatch(it.connect()),f&&"conversations.conversations"==f&&H&&"conversations.filePreview"==H||"sessionExpired"===o||r&&"closed"===r)b({route:"conversations.conversations"}),this.props.resetRoute();else if(H&&"conversations.filePreview"==H&&K){var _=Object(At.n)(K)||{},G=_.mediaType,Y=_.mimeType;this.onOpenFilePrev((function(t){return h.a.createElement(Wo,Ze()({},t,{downloadUrl:K.downloadUrl,size:K.size,name:K.name,mediaType:G,mimeType:Y,file:K,downloadFile:e.downloadFile,i18n:v,direction:R,disableFocus:y.bMessageFocus}))}),K)}w!==u&&O&&"connectionClosed"==O&&S&&(f||(j||V||W)&&this.props.dispatch(rt.navigateToHome()),x({autoClosed:!1,status:"opened"})),this.oConversation&&this.oConversation.subscribe("MessagingService.conversationCleared",(function(){E||e.setState({bCleared:!0})}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.open,o=n.bShowAlertDialog,a=n.config,i=(n.conversationStore||{}).messengerCleared,s=(e||{}).bShowAlertDialog,c=this.state.bTyping;this.sConversationClassName=Object(At.l)(a),this.sHomeClassName=Object(At.m)(a),setTimeout((function(){r&&t.oConversation&&!c&&!i&&t.oConversation.command("MessengerHelper.setDimension",{conversations:{height:In.E,width:In.F,removeClass:[t.sHomeClassName,"genesys-mxg-frame-transition"],addClass:[t.sConversationClassName]}})})),!this.bObserving&&this.childComponent&&this.childComponent.transcriptRef.current&&0===this.childComponent.transcriptRef.current.offsetHeight&&(this.bObserving=!0,Object(At.f)(this.childComponent.transcriptRef.current,(function(){t.bObserving=!1,t.updateTranscriptHeight()}))),(this.bPreviewClosed||s&&s!==o)&&(setTimeout((function(){t.inputRef.current&&t.inputRef.current.focus()}),50),setTimeout((function(){t.childComponent&&t.updateTranscriptHeight()}),200))}},{key:"componentWillUnmount",value:function(){this.oMetaData.closed=(new Date).getTime(),this.oConversation&&this.oConversation.publish("closed",this.oMetaData),this.props.fConversationComponentWillUnmount(this.props.conversationStore),this.props.dispatch(it.closed()),this.props.enableFocusControls(!0)}},{key:"beforeRender",value:function(){var e=this,t=this.state.prevConversationStore.status,n=(this.state.prevMessengerStore||{}).route,r=(this.state.prevConfig||{}).lang,o=this.props||{},a=o.conversationStore,i=a.status,s=a.prevStatus,c=a.previousStatus,l=a.message,u=(a.sendingMessage,a.error),d=a.connection,p=a.typingNotification,g=a.resetSession,m=a.readOnly,f=o.messengerStore,b=f.route,v=f.file,y=o.closeMessenger,w=o.i18n,x=(o.openConversation,o.bShowOverlay),S=o.route,O=o.config,C=O.apps,E=O.direction,k=O.lang,T=o.bShowAlertDialog,R=o.closeAlertDialog,j=(o.setAlertDialogStatus,o.oDisableInputs),D=this.state.bCleared,P=((C||{}).conversations||{}).showAgentTypingIndicator;if(n&&"conversations.filePreview"===n&&b&&"conversations.conversations"===b&&(this.bPreviewClosed=!0),this.oAlerts={generic:{message:w.errors.generic,primary:w.okButton,alertType:"generic"},error:{message:"",primary:w.okButton,alertType:""},startFailed:{message:w.errors.startFailed,primary:w.okButton,alertType:"startFailed"}},S||!n||"conversations.home"!==n&&"conversations.conversations"!==n||!b||"conversations.filePreview"!=b||x){if(b&&"conversations.filePreview"==b&&x&&v){var I=Object(At.n)(v)||{},M=I.mediaType,A=I.mimeType,N=function(t){return h.a.createElement(Wo,Ze()({},t,{downloadUrl:v.downloadUrl,size:v.size,name:v.name,mediaType:M,mimeType:A,file:v,downloadFile:e.downloadFile,i18n:w,direction:E,disableFocus:j.bMessageFocus}))};j.bMessageFocus&&!this.bPreviewUpdated?(this.bPreviewUpdated=!0,this.onUpdateFilePrev(N,v)):this.bPreviewUpdated&&!j.bMessageFocus&&(this.bPreviewUpdated=!1,this.onUpdateFilePrev(N,v))}}else if(v){var F=Object(At.n)(v)||{},L=F.mediaType,B=F.mimeType;this.onOpenFilePrev((function(t){return h.a.createElement(Wo,Ze()({},t,{downloadUrl:v.downloadUrl,size:v.size,name:v.name,mediaType:L,mimeType:B,file:v,downloadFile:e.downloadFile,i18n:w,direction:E,disableFocus:j.bMessageFocus}))}),v)}"pending"===t&&"connecting"===i?this.bPendingConnection=!0:("connecting"===t||"restored"===t||"restoring"===t)&&"connectionFailed"===i||!0===this.props.bShowAlertDialog&&"startFailed"===this.props.sAlertDialogType&&r!==k?this.onStartFailed():"connecting"===t&&"connected"===i||"reconnecting"===t&&"connected"===i||"restoreFailed"===t&&"connected"===i||"requestingUpload"===t&&"connected"===i||"restoring"===t&&"connected"===i||"opened"===t&&"connected"===i||"sessionCleared"===t&&"connected"===i||"allowedfiletypesupdated"===t&&"connected"===i?this.onStarted():"restoring"===t&&"restoreFailed"===i||!0===this.props.bShowAlertDialog&&"restoreFailed"===this.props.sAlertDialogType&&r!==k?this.onRestoreFailed():"connected"===t&&"restored"===i?this.onRestored():"sessionExpired"!==t&&"sessionExpired"===i?(this.onSessionExpired(),T&&R(),y(!0)):"sessionLoggedOut"!==t&&"sessionLoggedOut"===i?this.onSessionLoggedOut():t&&"connectionClosed"!==t&&"connectionClosed"===i||"conversationNotFound"===i||D?(T&&R(),y(!0),this.setState({bCleared:!1})):("fetchingHistory"===t&&"fetchHistoryFailed"===i||!0===this.props.bShowAlertDialog&&"fetchHistoryFailed"===this.props.sAlertDialogType&&r!==k)&&this.onFetchHistoryFailed(),"sessionCleared"==i&&g&&"boolean"==typeof g&&d&&"closed"===d&&(this.resetConversation(),this.bSessionActive=!1),u&&Object.keys(u).length&&"restoreFailed"!=u&&"fetchingHistory"!=t&&"fetchHistoryFailed"!==i&&"restoreFailed"!==i&&(!1===this.props.bShowAlertDialog||r!==k)?(this.sAlertType="genericError",this.props.showAlertDialog(this.generateErrorAlert(u))):i&&"connected"===i&&l&&Object.keys(l).length||d&&"opened"===d&&(this.bSessionActive=!0),P&&p&&Object.keys(p).length&&this.onAgentTyping(),p&&!Object.keys(p).length&&this.bShowAgentTyping&&this.removeAgentIndicator(),"disconnected"!==t&&"disconnected"==i?this.onConversationDisconnected():"steppingUpConversation"!==c&&"disconnected"!==s||"sessionCleared"!==i||g||(this.onResetDisconnectSession(),T&&R(),y(!0),this.setState({bCleared:!1})),(i&&"readOnly"==i||m)&&this.onReadOnlySession()}},{key:"render",value:function(){var e=this,t=this.props,n=t.color,r=t.conversationStore,o=t.i18n,a=t.restoring,i=t.headerRef,s=t.config,c=s.fileUpload,l=s.direction,u=s.maxMessageLength,d=s.preview,p=s.cobrowse,g=s.apps,m=t.oDisableInputs,f=t.enableFocusControls,b=t.disableFocusControls,v=t.enableTransition,y=t.awaitMarkdown,w=t.bShowAlertDialog,x=t.overlayNode,S=t.Toaster,O=t.view,C=t.loginStatus,E=t.bAuthenticating,k=this.props,T=k.bShowOverlay,R=k.messengerStore,j=this.state,D=j.file,P=j.bReadOnlySession,I=r.status,M=r.allowedFileTypes,A=r.maxFileSizeInKB,N=r.allowedMediaPresence,F=r.bImageOnlyFileType,L=r.messages,B=r.sendingMessage,H=(r.pageSize,r.pageNumber,r.files),K=r.viewFiles,z=r.error,U=(r.connection,r.connectionStatus),q=r.capabilities,V=r.correctedMessagesOrder,W=r.bRestoring,_=c||{},G=_.enableAttachments,Y=_.modes,$="boolean"==typeof G&&!0===G,J="boolean"==typeof G&&!1===G,Q=!!(Y&&Y.length&&void 0===G||Y&&Y.length&&"boolean"==typeof G&&!0===G),X=(R||{}).route,Z=(g||{}).conversations||{},ee=Z.autoStart,te=Z.markdown,ne=Z.conversationDisconnect,re=Z.humanize,oe=(re||{}).enabled,ae=(ee||{}).enabled,ie=(te||{}).enabled,se=ne||{},ce=se.enabled,le=se.type,ue=!1,de=!1,pe=!1,ge=(q||{}).enableSend,me={color:n};this.OverlayNode=x;var fe=this.OverlayNode,he=this.inputRef,be=(this.state.prevConversationStore||{}).status;u&&"number"==typeof u&&(this.maxMessageLength=u),void 0===G&&N&&($=!0),Q&&(this.aAllowedFileTypes&&this.aAllowedFileTypes.length&&(this.aAllowedFileTypes=[]),Y.forEach((function(t,n){var r=t.fileTypes,o=t.maxFileSizeKB;r&&(e.aAllowedFileTypes[n]=r),o&&(e.maxFileSize=o*In.K)}))),this.state.conversationStore&&this.beforeRender(),$?(this.aAllowedFileTypes&&this.aAllowedFileTypes.length&&(this.aAllowedFileTypes=[]),M&&M.length&&(M.includes("*/*")?this.aAllowedFileTypes=["*/*"]:M.forEach((function(t,n){e.aAllowedFileTypes[n]=t}))),this.maxFileSize&&this.maxFileSize.length&&(this.maxFileSize=""),A&&(this.maxFileSize=A*In.K)):J&&(this.aAllowedFileTypes&&this.aAllowedFileTypes.length&&(this.aAllowedFileTypes=[]),A&&(this.maxFileSize=A*In.K)),"sending"!==B||"connecting"!==I&&"reconnecting"!==I||(ue=!0),void 0!==be&&"connecting"!==be||"connecting"!==I||(ue=!0),"restoring"!==I&&"fetchingHistory"!==I||(ue=!0),"opened"===be&&"connecting"===I&&(ue=!0),(a||W)&&(ue=!0),w&&(ue=!1),"sessionCleared"===I&&"restoring"===be&&(ue=!1),("signingIn"===C||E||"steppingUpConversation"===I)&&(ue=!0,pe=!0);var ve=!d&&("offline"===U||"reconnecting"===I),ye="";return(ye="reAuthenticating"===I?I:E?"authenticating":"")&&(ue=!0,pe=!0),"offline"===U?de=!0:"online"===U&&(de=!1),!ae||ge||this.bSessionActive?ae&&ge&&(this.bDisabledSend=!1,this.bPreventEvent=!1):(ue=!0,this.bDisabledSend=!0,this.bPreventEvent=!0),"sessionLoggedOut"!==be&&"sessionLoggedOut"===I&&(ue=!1),this.bAttachment=H.name||"",h.a.createElement(Nt.a,{direction:"left",in:!0,appear:!0,timeout:v?{appear:200,enter:100,exit:0}:0},h.a.createElement(an.a,{elevation:0,className:"mxg-conversation",ref:this.conversationRef},h.a.createElement("div",{style:Si},ve&&h.a.createElement(Sr,{icon:h.a.createElement(Qa.a,{fontSize:"small",alt:""}),severity:bi.severity["reconnecting"===I?I:U]},o.errors[bi.i18n["reconnecting"===I?I:U]]),ye&&h.a.createElement(Sr,{severity:bi.severity[ye]},o.info[bi.i18n[ye]]),h.a.createElement("div",null,h.a.createElement(S,{config:this.props.config}))),h.a.createElement("div",{className:"mxg-conversation-container",role:"main"},T&&x&&h.a.createElement(ei,{headerRef:i},h.a.createElement(fe,{downloadUrl:D&&D.downloadUrl||K.newDownloadUrl,viewFiles:K||{}})),h.a.createElement(Wa,Ze()({view:O,styles:me,messages:L,status:I,getComponentMethods:function(t){return e.childComponent=t},textInputRef:this.textInput,statusBoxRef:this.statusBoxRef,bAutoStartEnabled:ae,bConversationDisconnectEnabled:ce,bReadOnlySession:P,disconnectType:le,headerRef:i,showProgress:ue,bShowTyping:this.bShowAgentTyping,bTypingStopped:this.bTypingStopped,i18n:o,maxMessageLength:this.maxMessageLength,bDisableTabStop:T,direction:l,richMediaOptions:this.richMediaOptions,conversationRef:this.conversationRef,cobrowse:p||{},markdownEnabled:ie,awaitMarkdown:y,startNewConversation:this.startNewConversation,correctedMessagesOrder:V,humanizeEnabled:oe,humanizeConfig:oe?re:{},oCallbacks:{onMessageAdded:this.onMessageAdded,fetchHistory:this.fetchHistory,onOpenFilePrev:this.onOpenFilePrev,onErrorLoadingFile:this.onErrorLoadingFile,onMediaLinkExpired:this.onMediaLinkExpired,onMessageSelection:this.sendMessage,downloadFile:this.downloadFile,onConversationDisconnected:this.onConversationDisconnected}},r)),!P&&h.a.createElement(wi,{className:"mxg-input-container ".concat(yi.inputBox," ").concat(this.bAttachment?"mxg-input-attachment":""),ref:this.textInput},h.a.createElement(Ci,{ref:this.textInput,inputRef:he,sendMessage:this.sendMessage,onAttachment:this.onAttachment,onRemoveAttachment:this.onRemoveAttachment,onhandleMxgInput:this.handleMxgInput,enableAttachments:G,allowedMediaPresence:N,aFileTypes:this.aAllowedFileTypes,bImageOnlyFileType:F,maxFileSize:this.maxFileSize,files:H,color:n,i18n:o,onFocus:this.onTextInputFocus,onBlur:this.onTextInputBlur,autoFocus:!d||!!Oi,previewMode:d,status:I,direction:l,prevStatus:be,error:z,bPreviewOpened:X&&"conversations.filePreview"==X||!1,bPreviewClosed:this.bPreviewClosed,bDisable:de||pe,bDisabledSend:!1,oDisableInputs:m,enableFocusControls:f,disableFocusControls:b,maxMessageLength:this.maxMessageLength,nRMessengerPageActionMetrics:this.nRMessengerPageActionMetrics})),P&&this.state.bShowDisconnect&&h.a.createElement(wi,{className:"mxg-input-container startNewButton",ref:this.statusBoxRef,"aria-labelledby":"startNewConversation_text"},h.a.createElement(cn.a,{id:"startNewConversation_text",variant:"contained",size:"medium",dir:"auto",color:n,autoFocus:!0,tabIndex:T||m.bMessageFocus?-1:0,"aria-label":o&&o.startNewConversation+"-"+o.ariaStartNewConversation||"",disabled:W,onClick:this.startNewConversation},o&&o.startNewConversation||"")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{messengerStore:e.messengerStore,conversationStore:e.conversationStore,config:e.config,prevConversationStore:t.conversationStore,prevMessengerStore:t.messengerStore,prevConfig:t.config}}}])}(h.a.PureComponent);Ei.propTypes={color:v.a.string,i18n:v.a.object,payload:v.a.object,config:v.a.object.isRequired,dispatch:v.a.func.isRequired,setConvPluginRef:v.a.func.isRequired,convPluginRef:v.a.object,headerRef:v.a.object,fConversationComponentWillUnmount:v.a.func.isRequired,closeMessenger:v.a.func.isRequired,oDisableInputs:v.a.object.isRequired,enableFocusControls:v.a.func,disableFocusControls:v.a.func,enableTransition:v.a.bool.isRequired,verifyStorageAndRemove:v.a.func.isRequired,Toaster:v.a.elementType.isRequired};var ki=oe((function(e){return{conversationStore:e.conversationStore}}))(function(e){return function(t){return h.a.createElement(Mt.a.Consumer,null,(function(n){var r=n.closeMessenger,o=n.oDisableInputs,a=n.disableFocusControls,i=n.enableFocusControls,s=n.verifyStorageAndRemove,c=n.route,l=n.resetRoute,u=n.setHomeScreenHeight,d=n.iHeaderHeight,p=n.bShowAlertDialog,g=n.sAlertDialogType,m=n.showAlertDialog,f=n.closeAlertDialog,b=n.setAlertDialogStatus,v=n.setHeaderDeleteButtonClick,y=n.onHeaderDeleteButtonClick,w=n.newRelic;return h.a.createElement(e,Ze()({},t,{closeMessenger:r,oDisableInputs:o,disableFocusControls:a,enableFocusControls:i,verifyStorageAndRemove:s,route:c,resetRoute:l,setHomeScreenHeight:u,iHeaderHeight:d,bShowAlertDialog:p,sAlertDialogType:g,showAlertDialog:m,closeAlertDialog:f,setAlertDialogStatus:b,setHeaderDeleteButtonClick:v,onHeaderDeleteButtonClick:y,newRelic:w}))}))}}(Ei));function Ti(e,t){var n={};return e&&Object.keys(e).forEach((function(r,o){var a=r.split(t),i=$e()(a,2),s=i[0],c=i[1];c?(n[s]=n[s]||{},n[s][c]=e[r]):n[r]=e[r]})),n}var Ri=n(14);function ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pi(e,t,n){return t=u()(t),c()(e,Ii()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function Ii(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ii=function(){return!!e})()}var Mi=Object(At.k)().browser||"",Ai=Object(At.k)().os||"",Ni=!(!Mi||"Safari"!==Mi),Fi="iOS"===Ai,Li=!Object(At.w)()&&("iOS"===Ai||"Mac OS X"===Ai||"Android"===Ai||"Linux"===Ai);Li=Li||Object(At.v)();var Bi=Object(It.a)("div")((function(e){e.theme;return{overflow:Ni||Fi?"hidden":"clip"}})),Hi=function(e){var t=e.config,n=e.oPlugins,r={config:t,newRelic:e.newRelic||{}};n.MessagingService||Genesys("loadPlugin","MessagingService",r,(function(){e.setPlugin("MessagingService",{})}))},Ki=nt((function(){return Promise.resolve().then(n.bind(null,235))})).KnowledgeSearch,zi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return ve()(e.querySelectorAll('a, button, input, textarea, select, details,[tabindex]:not([tabindex="-1"])')).filter((function(e){return!e.hasAttribute("disabled")}))},Ui=function(e){function t(e){var n;o()(this,t),n=Pi(this,t,[e]),m()(n,"onConfirmChat",(function(e){e.preventDefault(),n.props.dispatch(rt.confirmChat({route:"conversations.registration"}))})),m()(n,"onSubmit",(function(e){e.preventDefault(),Hi(n.props)})),m()(n,"onFilePreviewOpened",(function(e){var t=e.imagePrevComp;n.props.dispatch(rt.openPreview(e)),n.OverlayNode=t,n.setState((function(){return{bShowOverlay:!0}}))})),m()(n,"handleNavigation",(function(e){var t=(e||{}).route;n.slideDirection="backward",n.bBackwardDirection=!0,t&&"conversations.home"==t?n.props.dispatch(rt.navigateToHome()):(n.props.verifyStorageAndRemove().then((function(){n.props.dispatch(rt.navigateBack())})),"conversations.filePreview"==n.route&&(n.OverlayNode="",n.props.resetRoute(),n.setState((function(){return{bShowOverlay:!1}}))))})),m()(n,"expandMessenger",(function(){n.bCollapsed=!1,(0,n.props.setArticleExpanded)(!0),n.props.oMessenger.command("MessengerHelper.setDimension",{conversations:{height:In.B,width:In.C,addClass:["genesys-mxg-expand","genesys-mxg-frame-transition"]}})})),m()(n,"collapseMessenger",(function(){n.bCollapsed=!0,(0,n.props.setArticleExpanded)(!1),n.props.oMessenger.command("MessengerHelper.setDimension",{conversations:{height:In.E,width:In.F,removeClass:["genesys-mxg-expand"]}})})),m()(n,"openConversation",(function(e){var t=e.route;n.OverlayNode="",n.state.bShowOverlay&&n.setState((function(){return{bShowOverlay:!1}})),n.props.dispatch(rt.openConversations({route:t}))})),m()(n,"openSearch",(function(e){var t=e.route;n.props.dispatch(ot({route:t}))})),m()(n,"openCobrowseConnect",(function(e){var t=e.route;n.props.dispatch(rt.openCobrowseConnect({route:t}))})),m()(n,"openCobrowseSharing",(function(e){var t=e.route;n.props.dispatch(rt.cobrowseShare({route:t,cobrowseConnectStatus:"sharing"}))})),m()(n,"removeStorage",(function(e){n.props.oMessenger.command(n.storage+".remove",{name:e})})),m()(n,"onCobrowseVoiceSessionStart",(function(){var e=((n.props||{}).config||{}).cobrowse||{},t=e.enabled,r=e.channels;!!(t&&r&&r.length)&&r.includes("voice");n.props.dispatch(rt.setCobrowseConnectStatus({cobrowseConnectStatus:"sharing"}))})),m()(n,"onCobrowseVoiceSessionEnd",(function(){(n.props||{}).cobrowseActiveSession&&(n.route&&"cobrowse.sharing"===n.route?n.props.dispatch(rt.navigateToHome({route:"conversations.home",cobrowseConnectStatus:"ended"})):n.props.dispatch(rt.setCobrowseConnectStatus({cobrowseConnectStatus:"ended"})))})),m()(n,"navigateToHome",(function(){n.props.dispatch(rt.navigateToHome({route:"conversations.home"}))})),m()(n,"onError",(function(e){var t=n.props.oPlugins,r=e||{},o=r.errorKey,a=r.errorMessage,i=t.Knowledge||{},s={errorName:o||"Error",errorMessage:a||Ri.v};n.nRMessengerErrorMetrics.newRelicError(s),i&&Object.keys(i).length&&i.publish("error",e)})),m()(n,"fCLauncherClose",(function(){n.props.dispatch(it.end())})),m()(n,"fConversationStore",(function(e){n.conversationStore=e})),m()(n,"fSetHeaderDeleteButtonClick",(function(e){n.props.setHeaderDeleteButtonClick((function(){var t=n;t.props.showAlertDialog({message:e.alert.confirmClearConversation,primary:e.sureButton,secondary:e.cancelButton,preventDefault:!0,alertType:"clearConversation",onPrimary:function(e){e.preventDefault(),t.props.setAlertDialogStatus("progress"),t.props.dispatch(it.clearConversation())},onSecondary:function(e){e.preventDefault(),t.props.closeAlertDialog()}})}))})),m()(n,"fSetHeaderSignInButtonClick",(function(e){n.props.setHeaderSignInButtonClick((function(){n.props.showAlertDialog({message:e.alert.confirmSignIn,primary:e.signInButton,secondary:e.cancelButton,alertType:"confirmSignIn",preventDefault:!0,onPrimary:function(e){e.preventDefault(),n.handleSignIn().then((function(e){}),(function(e){}))},onSecondary:function(e){e.preventDefault(),n.props.closeAlertDialog()}})}))})),m()(n,"getFramesDimension",(function(){var e=(n.props||{}).oMessenger;if(e)return new Promise((function(t){e.command("MessengerHelper.getDimension").then((function(e){t(e)}))}))})),m()(n,"handleSignIn",(function(){var e=n.props.oMessenger;return new Promise((function(t,n){e.command("MessagingService.stepUpConversation").then((function(e){t(e)}),(function(e){n(e)}))}))})),m()(n,"handleSignOut",(function(){var e=n.props.oMessenger;return new Promise((function(t,n){e.command("Auth.logout").then((function(e){t(e)}),(function(e){n(e)}))}))})),m()(n,"getMarkdown",(function(e,t){return new Promise((function(n,r){Genesys("command","Markdown.getMarkdown",{text:e,messageType:t},(function(e){e&&n(e)}),(function(e){r(e)}))}))})),m()(n,"awaitMarkdown",function(){var e=Qe()(tt.a.mark((function e(t){var r,o,a,i,s,c;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t.length){e.next=5;break}n.markdownMessages=[],n.aFocusMngtMsgIds=[],e.next=15;break;case 5:return r=t.map(function(){var e=Qe()(tt.a.mark((function e(t){var r,o,a,i,s,c,l,u;return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(r=t||{}).text,a=r.timestamp,i=r.updatedTime,s=r.messageType,!(t&&o&&s)){e.next=10;break}return e.next=4,n.getMarkdown(o,s);case 4:return c=e.sent,u=(l=c||{}).markedText,l.isLinkIncluded&&a&&!i&&n.aFocusMngtMsgIds.push(a),e.abrupt("return",t=Di(Di({},t),{},{text:u}));case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.all(r);case 8:if(o=e.sent,a=n.props||{},i=a.conversationStore,s=a.setFocusMngtMsgIds,c=i.messages,n.aFocusMngtMsgIds&&n.aFocusMngtMsgIds.length&&s(n.aFocusMngtMsgIds),!(o&&o.length||!c.length)){e.next=15;break}return o.map((function(e){var t=(e||{}).deliveryStatus;if(e&&e.id&&e.updatedTime&&Object(ke.a)(n.markdownMessages,"id",e.id)){var r=c.findIndex((function(t){return t.id===e.id}));n.markdownMessages.splice(r,1,e)}if(e&&!e.updatedTime&&t&&"sending"!==t&&Object(ke.a)(n.markdownMessages,"tracingId",e.tracingId)){var o=n.markdownMessages.findIndex((function(t){return t.tracingId===e.tracingId}));n.markdownMessages.splice(o,1)}if(e&&e.timestamp&&!Object(ke.a)(n.markdownMessages,"timestamp",e.timestamp)){var a=c.findIndex((function(t){return t.timestamp===e.timestamp}));n.markdownMessages.splice(a,0,e)}})),e.abrupt("return",n.markdownMessages);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m()(n,"fConversationComponentWillUnmount",(function(e){var t=n;n.transcriptComponent="",setTimeout((function(){t.props.fStore({conversationStore:e,messengerStore:t.messengerStore})}))})),m()(n,"fConversationDisconnected",(function(e){n.state.bConversationDisconnected!==e&&n.setState({bConversationDisconnected:e})})),m()(n,"expandHeader",(function(){var e=(n.props.config||{}).home;return At.c[n.route]?At.c[n.route].expandHeader:!!e})),m()(n,"backButton",(function(e,t,r){var o=!1;return"conversations.filePreview"===n.route&&(o=At.c[n.route].backButton),(t||e||r)&&(o=!!At.c[n.route]&&At.c[n.route].backButton),o})),m()(n,"deleteButton",(function(){var e=((((n.props.config||{}).apps||{}).conversations||{}).conversationClear||{}).enabled,t=(n.props.conversationStore||{}).messages,r=!1;return e&&At.c[n.route]&&At.c[n.route].deleteButton&&(t&&t.length||n.markdownMessages.length)&&(r=!0),r})),m()(n,"closeButton",(function(){return!!At.c[n.route]&&At.c[n.route].closeButton})),m()(n,"moreVertButton",(function(){var e=(n.props.config||{}).auth||{},t=e.enabled,r=(e.allowSessionUpgrade,At.c[n.route]||{});return!(r&&!r.moreVertButton)&&t})),m()(n,"showSignInButton",(function(){var e=n.props||{},t=e.conversationStore,r=(e.config||{}).auth||{},o=r.enabled,a=r.allowSessionUpgrade,i=n.state||{},s=i.bAuthenticated,c=i.signInAvailable,l=i.sLoginStatus,u=i.bAuthenticating,d=At.c[n.route]||{},p=t||{},g=p.messages,m=p.readOnly,f=p.previousStatus;return!!o&&(!!a&&(!!c&&(!u&&!s&&(!(d&&!d.sigInButton)&&(("disconnected"!==f||!m)&&!!((""===l||"signingIn"===l)&&g&&g.length||n.markdownMessages.length))))))})),m()(n,"isSignedIn",(function(){var e=(n.props.config||{}).auth||{},t=e.enabled,r=e.allowSessionUpgrade,o=n.state||{},a=o.bAuthenticated,i=o.signInAvailable,s=o.bAuthenticating;return!!t&&(!!r&&(!!i&&(!s&&!!a)))})),m()(n,"showHeaderTitle",(function(){var e=(n.props.config||{}).home;return At.c[n.route]?At.c[n.route].showHeaderTitle:!!e})),m()(n,"showHeaderSubTitle",(function(){var e=(n.props.config||{}).home;return At.c[n.route]?At.c[n.route].showHeaderSubTitle:!!e})),m()(n,"resetKnowledgeState",(function(){n.setKnowledgeStore({inputValue:""}),n.setState((function(){return{bShowProgress:!1,knowledge:{results:{}}}}))})),m()(n,"showKnowledgeResults",(function(e,t){n.setKnowledgeStore({inputValue:t}),n.props.dispatch({type:"RESET_CATEGORIES"}),n.setState((function(){return{bShowProgress:!1,knowledge:{results:e}}}))})),m()(n,"showProgress",(function(){n.setState((function(){return{bShowProgress:!0}}))})),m()(n,"stopProgress",(function(){n.setState((function(){return{bShowProgress:!1}}))})),m()(n,"setKnowledgeStore",(function(e){n.knowledgeStore=Di(Di({},n.knowledgeStore),e)})),m()(n,"setKnowledgePlugin",(function(e,t){t&&n.props.setPlugin(e,t)})),m()(n,"onHeaderUpdated",(function(e){var t=(e||{}).height;n.props.onHeaderUpdated(e),n.transcriptComponent&&n.transcriptComponent.updateComponent({iHeaderHeight:t})})),m()(n,"handleSearchContentNavigation",(function(e){var t=e||{},r=t.which,o=t.target,a=t.shiftKey;if(9===(r||""))if(n.knowledgeWrapperRef.current&&o){var i=n.knowledgeWrapperRef.current.querySelectorAll('*[tabindex="0"]');if(a&&i.length&&o==i[0]){if(n.knowledgeSearchBoxRef.current){e.preventDefault();var s=n.knowledgeSearchBoxRef.current.querySelectorAll('*[tabindex="0"]');s&&s.length?s[s.length-1].focus():n.knowledgeSearchBoxRef.current.querySelector("input").focus()}else if(n.headerRef&&n.headerRef.current){var c=n.headerRef.current.querySelectorAll('*[tabindex="0"]');c&&c.length&&(e.preventDefault(),c[c.length-1].focus())}}else!a&&i.length&&o==i[i.length-1]&&(e.preventDefault(),n.props.launcherRef&&n.props.launcherRef.current&&n.props.launcherRef.current.focus())}})),m()(n,"handleSearchBoxNavigation",(function(e){var t=(e||{}).which||"";if(t&&9===t&&n.knowledgeWrapperRef&&n.knowledgeWrapperRef.current){var r=n.knowledgeWrapperRef.current.querySelectorAll('*[tabindex="0"]');r&&r.length&&(e.preventDefault(),r[0].focus())}})),m()(n,"isHeaderUpdated",(function(e){n.state.bHeaderUpdated!==e&&n.setState({bHeaderUpdated:e})})),m()(n,"onReadOnlySession",(function(e){var t=((n.props.config.apps||{}).conversations||{}).conversationDisconnect||{},r=t.enabled,o=t.type,a=e||{},i=a.messages,s=a.readOnly,c=n.state.bConversationDisconnected,l=!1;i&&i.length&&i.forEach((function(e,t){var n=e.eventType,r=e.presence;if(n&&"Presence"==n&&r){var o=(r||{}).type;o&&"Disconnect"==o&&(l=!0)}else;})),r&&("ReadOnly"==o||s)&&!c&&l&&n.setState({bConversationDisconnected:!0})})),m()(n,"setInitials",(function(e){var t=(e||{}).messages,r=(n.props||{}).setCustomer;t&&t.length&&t.forEach((function(e,t){var o=e||{},a=o.from,i=o.messageType;if(i&&"inbound"===i){var s,c,l=a||{},u=l.firstName,d=l.lastName;if(u)n.oAvatar.initials=null===(s=u[0])||void 0===s?void 0:s.toUpperCase(),n.oAvatar.firstName=u;if(d)n.oAvatar.initials=n.oAvatar.initials+(null===(c=d[0])||void 0===c?void 0:c.toUpperCase()),n.oAvatar.lastName=d;r(n.oAvatar)}}))})),m()(n,"BodyView",(function(e){var t=n.props,r=t.config,o=t.oPlugins,a=(e||{}).oKnowledgeI18n,i=(((r||{}).apps||{}).knowledge||{}).enabled;switch(n.route){case"knowledge.category":case"knowledge.search":return h.a.createElement(h.a.Fragment,null,i&&h.a.isValidElement(h.a.createElement(Ki,null))&&h.a.createElement(f.Suspense,{fallback:h.a.createElement(nn.a,{rows:1,heights:[20,140]})},h.a.createElement(Ki,{showResults:n.showKnowledgeResults,showProgress:n.showProgress,stopProgress:n.stopProgress,config:r,setStore:n.setKnowledgeStore,store:n.knowledgeStore||{},setPlugin:n.setKnowledgePlugin,plugin:o.Knowledge||"",i18n:a,onError:n.onError,knowledgeSearchBoxRef:n.knowledgeSearchBoxRef,handleSearchBoxNavigation:n.handleSearchBoxNavigation,utility:{isMobile:At.w,getBrowserandOS:At.k}})));default:return null}}));var r=e||{},a=r.data,i=r.oContextStore,s=r.config,c=r.newRelic,l=((i||{}).knowledge||{}).results,u=((a||{}).journeyContext||{}).customer,d=(e.config||{}).deploymentId;n.bCleared=!1,n.state={bShowRegForm:!0,iRenderCount:1,knowledge:{results:l||{}},bShowProgress:!1,bHeaderUpdated:!1,bShowOverlay:!1,bConversationDisconnected:!1,sLoginStatus:"",bAuthenticating:!1,bAuthenticated:!1,signInAvailable:!1},n.restoring=!1,n.bBackwardDirection=!1,n.bReconnectAfterAutoClose=!1,n.bReconnecting=!1,n.bAutoClosed=!1,n.bUpdateDeleteDialog=!1,n.OverlayNode="",n.conversationStore={},n.knowledgeStore={inputValue:null,customerId:u&&u.id||""},n.oAvatar={},n.headerRef=Object(f.createRef)(),n.messengerRef=Object(f.createRef)(),n.messengerContainerRef=Object(f.createRef)(),n.homeRef=Object(f.createRef)(),n.knowledgeWrapperRef=Object(f.createRef)(),n.knowledgeSearchBoxRef=Object(f.createRef)(),n.transcriptComponent="",n.markdownMessages=[],n.storage=Object(At.q)(s),n.aFocusMngtMsgIds=[];var p=c||{},g=p.pageActionMetrics,b=p.performanceMetrics,v=p.errorMetrics;return n.nRMessengerPageActionMetrics=g,n.nRMessengerPerformanceMetrics=b,n.nRMessengerErrorMetrics=v,n.nRMessageOpenStartTime=(new Date).getTime(),n.messengerStorage=d?d+":gcmc":"_gcmc",n.subOpenStorage="opn",n.bActivePrevConv=e.activePreviousConversation,n.handleTabKey=n.handleTabKey.bind(n),n.updateHeight=n.updateHeight.bind(n),n.slideDirection=null,n.sSlideInLeft="left",n.sSlideInRight="right",n.bCollapsed=!1,n}return p()(t,e),i()(t,[{key:"updateView",value:function(){var e=this.props,t=e.messengerStore,n=e.config,r=e.setView,o=n||{},a=o.apps,i=o.home,s=o.theme,c=o.cobrowse||{},l=c.enabled,u=c.channels,d=(s||{}).direction,p=((a||{}).knowledge||{}).enabled,g=(t||{}).route,m=!!(l&&u&&u.length)&&u.includes("voice"),f=g&&g.split("."),h=$e()(f,3);this.app=h[0],this.view=h[1],this.subView=h[2],r&&r(this.view),"rtl"===d&&(this.sSlideInLeft="right",this.sSlideInRight="left"),this.route=p||i||"conversations.filePreview"===g||m?"".concat(this.app,".").concat(this.view):"conversations.conversations";var b=this.route.split("."),v=$e()(b,2);switch(this.app=v[0],this.view=v[1],this.slideDirection=null,this.view){case"home":this.slideDirection="backward",this.bBackwardDirection=!1;break;case"conversations":case"connect":case"sharing":this.slideDirection="forward";break;case"category":case"search":0==this.bBackwardDirection&&(this.slideDirection="forward");break;case"article":this.slideDirection=null}}},{key:"updateHeight",value:function(){this.setState((function(e){return{iRenderCount:e.iRenderCount++}})),Object(At.w)()||document.removeEventListener("keydown",this.handleTabKey,!1)}},{key:"handleTabKey",value:function(e){var t,n,r,o,a;9===e.keyCode&&(t=this.messengerContainerRef.current,n=e,o="",a="",o=(r=zi(t))[0],a=r[r.length-1],n.shiftKey?document.activeElement===o&&(a.focus(),n.preventDefault()):document.activeElement===a&&(o.focus(),n.preventDefault()))}},{key:"shouldComponentUpdate",value:function(e,t){var n=e||{},r=n.conversationStore,o=n.config,a=this.props||{},i=a.conversationStore,s=a.open,c=a.messengerClosed,l=a.config,u=i||{},d=u.status,p=u.previousStatus,g=u.prevStatus,m=r||{},f=m.status,h=m.previousStatus,b=m.prevStatus,v=m.connection,y=(l||{}).apps,w=(o||{}).apps;if(y&&w){var x=(y||{}).conversations,S=(w||{}).conversations,O=(x||{}).enabled,C=(S||{}).enabled;this.bRegEnabled=x&&x.form,"boolean"!=typeof C||O===C||this.bRegEnabled||(Hi(e),this.props.store&&C&&this.props.dispatch(it.openWithStore(this.props.store)))}return("connectionClosed"===d||"closed"===d||"closed"!==v)&&("closed"===p||g&&"closed"===g)&&"connectionClosed"===f&&("closed"===h||b&&"closed"===b)&&!c&&s?this.bReconnectAfterAutoClose=!1:!this.bAutoClosed&&s&&(this.bReconnectAfterAutoClose=!0),!0}},{key:"componentDidMount",value:function(){var e=this,t=this.props||{},n=t.open,r=(t.messengerClosed,t.conversationStore),o=t.config,a=t.oMessenger,i=t.closeAlertDialog,s=t.previousConversationCleared,c=t.route,l=t.fResetConversationCleared,u=t.previousConversationExpired,d=t.previousSessionInActive,p=t.storeConversationProps,g=t.autoClosed,m=t.prevConversationStatus,f=o||{},h=f.i18n,b=f.lang,v=f.home,y=f.cobrowse,w=f.apps,x=y||{},S=x.enabled,O=x.channels,C=((w||{}).knowledge||{}).enabled,E=!!(S&&O&&O.length)&&O.includes("voice"),k=(r||{}).status,T=o.auth||!1,R=T.enabled,j=T.allowSessionUpgrade,D=Ti(h[b].conversations,"."),P=(new Date).getTime()-this.nRMessageOpenStartTime;if(this.nRMessengerPerformanceMetrics.messengerOpen({context:{totalLoadTime:P},attributes:{messengerOpenDuration:P}}),this.props.getComponentMethods(this),this.props.setClick(this.fCLauncherClose),n&&this.props.oMessenger.publish("opened"),window.addEventListener("orientationchange",this.updateHeight),window.addEventListener("resize",this.updateHeight),a&&(a.subscribe("MessagingService.conversationCleared",(function(){e.bCleared=!0,i()})),j&&(a.subscribe("MessagingService.steppedUpConversation",(function(){"restored"===((e.props||{}).conversationStore||{}).status&&e.setState({sLoginStatus:"loggedIn",bAuthenticated:!0,bAuthenticating:!1})})),a.subscribe("MessagingService.stepUpConversationError",(function(){e.setState({sLoginStatus:"",bAuthenticated:!1,bAuthenticating:!1})})),a.subscribe("Auth.signedOut",(function(){R&&e.setState({bAuthenticated:!1,sLoginStatus:""})})),a.subscribe("Auth.signInAvailable",(function(){R&&e.setState({signInAvailable:!0})})),a.subscribe("Auth.signingIn",(function(){R&&e.setState({sLoginStatus:"signingIn"})})),a.subscribe("Auth.signedIn",(function(){var t=(e.state||{}).sLoginStatus;R&&"loggedIn"!==t&&e.setState({sLoginStatus:"loggedIn"})})),a.subscribe("Auth.authenticating",(function(){R&&e.setState({bAuthenticating:!0})})),a.subscribe("Auth.authenticated",(function(){R&&e.setState({bAuthenticated:!0,bAuthenticating:!1})})))),this.fSetHeaderDeleteButtonClick(D),this.fSetHeaderSignInButtonClick(D),Object(At.w)()){var I=this;this.headerRef.current&&setTimeout((function(){I.updateHeight()}),100)}"sessionExpired"===k&&(R?this.props.dispatch(it.restoreAuthSession()):this.props.dispatch(it.sessionCleared())),(s||d!==u&&m&&"connectionClosed"==m&&g)&&(this.view&&"conversations"!==this.view&&s&&l(),c||(v||C||E)&&this.props.dispatch(rt.navigateToHome()),p({autoClosed:!1,status:"opened"}))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props||{},r=n.open,o=n.oMessenger,a=n.activePreviousConversation,i=n.conversationStore,s=n.messengerClosed,c=n.route,l=n.config,u=n.storeConversationProps,d=n.bShowAlertDialog,p=n.sAlertDialogType,g=i||{},m=g.status,f=g.previousStatus,h=g.connection,b=g.readOnly,v=e||{},y=v.open,w=v.conversationStore,x=v.config,S=(w||{}).connection,O=(x||{}).lang,C=l||{},E=C.lang,k=C.i18n,T=C.home,R=C.cobrowse,j=(C.apps||{}).knowledge,D=R||{},P=D.enabled,I=D.channels,M=(j||{}).enabled,A=!!(P&&I&&I.length)&&I.includes("voice");if("boolean"==typeof b&&1==b&&this.onReadOnlySession(i),E&&"string"==typeof E&&O&&"string"==typeof O)if(E!==O){var N=Ti(k[E].conversations,".");this.bUpdateDeleteDialog=!0,this.fSetHeaderDeleteButtonClick(N),this.fSetHeaderSignInButtonClick(N)}else this.bUpdateDeleteDialog&&(this.bUpdateDeleteDialog=!1,d&&("clearConversation"===p&&this.props.onHeaderDeleteButtonClick(),"confirmSignIn"===p&&this.props.onHeaderSignInButtonClick()));if(c&&"conversations.conversations"===c)this.props.resetRoute();Object(At.w)()?document.addEventListener("keydown",this.handleTabKey,!1):document.removeEventListener("keydown",this.handleTabKey,!1),this.bCleared&&(!c&&(T||M||A)&&this.props.dispatch(rt.navigateToHome()),this.bCleared=!1,this.props.closeMessenger(!0),u({autoClosed:this.bAutoClosed,status:m})),a&&(this.bAutoClosed||r)&&"closed"===h&&"closed"===S&&(this.bReconnectAfterAutoClose||r)?(this.bAutoClosed=!1,this.bReconnecting||(this.bReconnecting=!0,this.props.dispatch(it.reconnect()))):!this.bAutoClosed&&r&&"opened"===S&&"closed"===h&&"connectionClosed"===m?(this.bAutoClosed=!0,this.bReconnectAfterAutoClose=!1,this.props.storeConversationProps({autoClosed:this.bAutoClosed,status:m}),this.fConversationComponentWillUnmount(i),this.props.closeMessenger(!0),this.bReconnecting&&(this.bReconnecting=!1)):s||"conversationNotFound"!==m&&("sessionExpired"===f||"sessionExpired"!==m)?"logout"!==f&&"logout"===m&&(this.props.dispatch(it.sessionLoggedOut()),this.bReconnecting&&(this.bReconnecting=!1)):(this.props.dispatch(it.sessionCleared()),this.props.closeMessenger(!0),this.bReconnecting&&(this.bReconnecting=!1)),r&&r!=y&&o.publish("opened"),!r&&y&&r!=y&&(this.nRMessengerPageActionMetrics.messengerClosed(),o.publish("closed"),Object(At.w)()&&document.removeEventListener("keydown",this.handleTabKey,!1))}},{key:"componentWillMount",value:function(){var e=this.props.config,t=e.apps;e.data;if(t){var n=(t||{}).conversations,r=(n||{}).enabled;this.bRegEnabled=n&&n.form,n&&r&&!this.bRegEnabled&&Hi(this.props),this.props.store&&this.props.dispatch(it.openWithStore(this.props.store))}}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.setContextStore,n=e.open,r=e.oMessenger,o=this.state.knowledge;window.removeEventListener("orientationchange",this.updateHeight),window.removeEventListener("resize",this.updateHeight),o&&t({knowledge:o}),this.props.getComponentMethods(null),n&&(this.nRMessengerPageActionMetrics.messengerClosed(),r.publish("closed"),Object(At.w)()&&document.removeEventListener("keydown",this.handleTabKey,!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.color,r=t.open,o=(t.fabVisible,t.config),a=t.setConvPluginRef,i=t.convPluginRef,s=t.conversationStore,c=t.messengerStore,l=t.toggleLauncher,u=t.logoutMessenger,d=t.data,p=t.oMessenger,g=t.setContextStore,m=t.route,f=t.sOSBrowser,b=t.Toaster,v=t.cobrowseActiveSession,y=t.bFabVisible,w=t.previousSessionInActive,x=t.prevConversationStatus,S=t.autoClosed,O=t.storeConversationProps,C=(t.iHomeScreenHeight,this.state),E=C.bShowProgress,k=C.sLoginStatus,T=(C.bAuthenticated,o.home),R=o.apps,j=(o.registration,o.i18n),D=o.lang,P=o.fullScreen,I=o.cobrowse,M=o.preview,A=(o.auth||{}).enabled,N=R||{},F=N.conversations,L=N.knowledge,B=I||{},H=B.enabled,K=B.channels,z=!!(H&&K&&K.length)&&K.includes("voice"),U=(F||{}).enabled,q=-1!==f.indexOf("mxg-mobile"),V=(L||{}).enabled;rt.setConfig(o),this.updateView(),g({conversationStore:s,messengerStore:c});var W=(!!T||!!V||!!z)&&("home"===this.view||"search"===this.view||"article"===this.view||"category"===this.view||"connect"===this.view||"sharing"===this.view||m&&"knowledge.search"===m||"cobrowse.connect"===m),_=!!U,G=(!this.route||this.route,j[D]),Y=Ti(j[D].knowledge,"."),$=Ti(j[D].conversations,"."),J=Ti(j[D].cobrowse,"."),Q=G[this.view]||G[this.app],X=s||{},Z=X.status,ee=X.previousStatus,te=X.bRestoring,ne=X.newSession;return A&&!Object.keys(this.oAvatar).length&&this.setInitials(s),this.storage=Object(At.q)(o),_&&this.bActivePrevConv&&("restoring"===ee&&("connected"===Z||"allowedfiletypesupdated"===Z)||"connected"===ee&&"restored"===Z||"disconnected"===ee&&"restored"===Z||"opened"===ee&&"restoring"===Z||te)&&(this.restoring=!0,this.bActivePrevConv=!1,p.command(this.storage+".get",{name:this.messengerStorage+this.subOpenStorage}).then((function(t){if(t){var n=t.split(":"),o=$e()(n,1)[0];o&&"string"==typeof o&&("true"!=o||r||(l(),e.props.dispatch(rt.openConversations({route:"conversations.conversations"}))))}}))),_||"conversations"!=this.view||(T||V||z)&&this.props.dispatch(rt.navigateToHome()),("restored"===Z||"connected"===ee&&"restoreFailed"===Z)&&(this.restoring=!1),this.restoring&&(("allowedfiletypesupdated"===ee&&"restoreFailed"===Z||"restoreFailed"===ee&&"connected"===Z||"restoring"===ee&&"connectionFailed"===Z)&&(this.restoring=!1),ne&&"connected"===Z&&(this.restoring=!1)),"connected"!==ee&&"restored"!==ee||"logout"!==Z||p.command("LocalStorage.get",{name:this.messengerStorage+this.subOpenStorage}).then((function(t){if(t){var n=t.split(":"),o=$e()(n,1)[0];o&&"string"==typeof o&&("true"==o||r)&&(u(),e.oAvatar={})}})),"closed"===ee&&"logout"===Z&&(r||y)&&(u(),this.oAvatar={},this.props.dispatch(it.pending())),r&&h.a.createElement(rn.a,Ze()({maxWidth:"sm",className:"cx-messenger-container ".concat(P?"mxg-fullscreen":""," ").concat(Li&&!P&&Object(At.v)()&&q?"cx-mxg-tablet-landscape":""," ").concat(Li&&!P?"cx-messenger-tablet":"").concat(this.view&&"home"==this.view?" cx-mxg-homescreen":""),ref:this.messengerContainerRef},Object(At.w)()?{"aria-modal":!0}:{}),h.a.createElement(on.a,{in:r,timeout:r?"auto":0},h.a.createElement(an.a,{elevation:2,sx:function(t){return{"&.Cx-MuiPaper-root":{background:"linear-gradient("+t.palette[e.props.color].main+", rgba(0, 0, 0, 0.84) 200%)"}}},ref:this.messengerRef,className:r?"cx-messenger ".concat(!q&&M?"cx-messenger-preview":""):""},h.a.createElement(hn,{container:this.messengerRef,status:this.props.sAlertDialogStatus,color:this.props.color}),W?h.a.createElement(vr,{knowledgeEnabled:V,cobrowseVoiceEnabled:z,knowledge:this.state.knowledge,showProgress:E,config:o,setKnowledgePlugin:this.setKnowledgePlugin,setKnowledgeStore:this.setKnowledgeStore,awaitMarkdown:this.awaitMarkdown,knowledgeStore:this.knowledgeStore,plugins:this.props.oPlugins,slideDirection:this.slideDirection,Toaster:b,i18n:{knowledge:Y,conversations:$,cobrowse:J},onError:this.onError,knowledgeWrapperRef:this.knowledgeWrapperRef,handleSearchContentNavigation:this.handleSearchContentNavigation,homeScreenRef:this.homeRef,headerRef:this.headerRef,color:n,sOSBrowser:this.props.sOSBrowser,updateHomeHeight:this.state.bHeaderUpdated,resetKnowledgeState:this.resetKnowledgeState,bTablet:Li,cobrowseActiveSession:v,bConversationApp:_,openConversation:this.openConversation,fConversationDisconnected:this.fConversationDisconnected,bConversationDisconnected:this.state.bConversationDisconnected}):_&&r&&h.a.createElement(ki,{open:r,color:n,view:this.view,previousConversationExpired:this.props.previousConversationExpired,previousConversationCleared:this.props.previousConversationCleared,fResetConversationCleared:this.props.fResetConversationCleared,prevConversationStatus:x,previousSessionInActive:w,autoClosed:S,storeConversationProps:O,restoring:!!this.restoring,payload:d,config:o,i18n:$,setConvPluginRef:a,loginStatus:this.state.sLoginStatus,bAuthenticating:this.state.bAuthenticating,overlayNode:this.OverlayNode,bShowOverlay:this.state.bShowOverlay,onFilePreviewOpened:this.onFilePreviewOpened,openConversation:this.openConversation,convPluginRef:i,awaitMarkdown:this.awaitMarkdown,headerRef:this.headerRef,enableTransition:W||!!V,fConversationComponentWillUnmount:this.fConversationComponentWillUnmount,fConversationDisconnected:this.fConversationDisconnected,messengerStore:c,getTranscriptComponentMethods:function(t){return e.transcriptComponent=t},Toaster:b,isSignedIn:this.isSignedIn()}),r&&h.a.createElement(tn,{muiTheme:this.props.muiTheme,title:Q.headerTitle,subTitle:Q.headerSubTitle,ariaBack:$.ariaBackButton,ariaExpand:$.ariaExpandButton,ariaCollapse:$.ariaCollapseButton,ariaClose:$.ariaCloseAttachmentButton,clearButton:$.clearButton,signInButton:$.signInButton,ariaDeleteTitle:$.ariaActionsClearButtonTitle,ariaDeleteLabel:$.ariaActionsClearButtonLabel,ariaMenuClearLabel:$.ariaActionsMenuClearButtonLabel,ariaExpandMenu:Q.ariaExpandMenu,ariaMenuTitle:$.ariaMenuTitle,ariaActionsSignInButtonTitle:$.ariaActionsSignInButtonTitle,ariaActionsSignInButtonLabel:$.ariaActionsSignInButtonLabel,ariaYouAreSignedIn:$.ariaYouAreSignedIn,color:n,expand:this.expandHeader(),deleteButton:this.deleteButton(),handleDeleteButton:this.onHeaderDeleteButtonClick,handleSignIn:this.handleSignIn,handleSignOut:this.handleSignOut,backButton:this.backButton(T,V,z),closeButton:this.closeButton(),showHeaderTitle:this.showHeaderTitle(),showHeaderSubTitle:this.showHeaderSubTitle(),moreVertButton:this.moreVertButton(),showSignInButton:this.showSignInButton(),isSignedIn:this.isSignedIn(),sLoginStatus:k,oAvatar:this.oAvatar,handleNavigation:this.handleNavigation,expandMessenger:this.expandMessenger,collapseMessenger:this.collapseMessenger,config:o,ref:this.headerRef,onHeaderUpdated:this.onHeaderUpdated,ariaMinimize:$.ariaMinimizeButton,launcherRef:this.props.launcherRef,route:this.route,i18n:j,slideDirection:this.slideDirection,homeScreenRef:this.homeRef,messengerRef:this.messengerContainerRef,isHeaderUpdated:this.isHeaderUpdated,bTablet:Li,getFramesDimension:this.getFramesDimension},V&&("search"===this.view||"category"===this.view)&&h.a.createElement(Bi,null,h.a.createElement(Nt.a,{direction:"forward"==this.slideDirection?this.sSlideInLeft:this.sSlideInRight,in:!0,appear:!0,mountOnEnter:!0,unmountOnExit:!0},h.a.createElement("div",null,this.BodyView({oKnowledgeI18n:Y}))))))),h.a.createElement("div",{role:"alert",className:"cx-messenger-screen-reader","aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",tabIndex:-1,"aria-label":function(){var t="";if(T&&"home"===e.view){var n=Q||{},r=n.ariaHomeScreenOpenStatus,o=n.headerTitle,a=n.headerSubTitle;t=r||"",e.showHeaderTitle()&&e.showHeaderSubTitle()&&(t="".concat(t," ").concat(o," ").concat(a))}else if("conversations"===e.view){t=($||{}).ariaMessengerOpenStatus||""}else if(V){var i=(Y||{}).ariaKnowledgeScreenOpenStatus;"search"===e.view&&(t=i||"")}return t}()}))}}])}(h.a.Component);Ui.propTypes={open:v.a.bool.isRequired,fabVisible:v.a.bool.isRequired,dispatch:v.a.func.isRequired,color:v.a.string.isRequired,config:v.a.object,setClick:v.a.func.isRequired,setConvPluginRef:v.a.func.isRequired,convPluginRef:v.a.object,data:v.a.object,fStore:v.a.func.isRequired,store:v.a.object,oMessenger:v.a.object,launcherRef:v.a.object,oPlugins:v.a.object.isRequired,setPlugin:v.a.func.isRequired,getComponentMethods:v.a.func.isRequired,setContextStore:v.a.func.isRequired,oContextStore:v.a.object.isRequired,sAlertDialogStatus:v.a.string};var qi=oe((function(e){return{messengerStore:e.messengerStore,conversationStore:e.conversationStore}}))(function(e){return function(t){return h.a.createElement(Mt.a.Consumer,null,(function(n){var r=n.toggleLauncher,o=n.closeMessenger,a=n.logoutMessenger,i=n.oPlugins,s=n.resetRoute,c=n.setPlugin,l=n.setContextStore,u=n.oContextStore,d=n.setArticleExpanded,p=n.expandedArticle,g=n.setCustomer,m=n.route,f=n.setView,b=n.verifyStorageAndRemove,v=n.bFabVisible,y=n.setCobrowseSessionStatus,w=n.sAlertDialogStatus,x=n.onHeaderDeleteButtonClick,S=n.setHeaderDeleteButtonClick,O=n.onHeaderSignInButtonClick,C=n.setHeaderSignInButtonClick,E=n.setFocusMngtMsgIds,k=n.onHeaderUpdated,T=n.showAlertDialog,R=n.closeAlertDialog,j=n.sAlertDialogType,D=n.bShowAlertDialog,P=n.setAlertDialogStatus,I=n.oDisableInputs,M=n.storeConversationProps,A=n.previousSessionInActive,N=n.autoClosed,F=n.prevConversationStatus,L=n.iHomeScreenHeight,B=n.newRelic,H=n.muiTheme;return h.a.createElement(e,Ze()({},t,{toggleLauncher:r,closeMessenger:o,logoutMessenger:a,oPlugins:i,setPlugin:c,setContextStore:l,oContextStore:u,setArticleExpanded:d,expandedArticle:p,setCustomer:g,resetRoute:s,route:m,setView:f,verifyStorageAndRemove:b,sAlertDialogStatus:w,onHeaderDeleteButtonClick:x,setHeaderDeleteButtonClick:S,onHeaderSignInButtonClick:O,setHeaderSignInButtonClick:C,setFocusMngtMsgIds:E,onHeaderUpdated:k,showAlertDialog:T,closeAlertDialog:R,sAlertDialogType:j,bShowAlertDialog:D,setAlertDialogStatus:P,bFabVisible:v,setCobrowseSessionStatus:y,oDisableInputs:I,storeConversationProps:M,previousSessionInActive:A,autoClosed:N,prevConversationStatus:F,iHomeScreenHeight:L,newRelic:B,muiTheme:H}))}))}}(Ui));function Vi(e,t,n){return t=u()(t),c()(e,Wi()?Reflect.construct(t,n||[],u()(e).constructor):t.apply(e,n))}function Wi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wi=function(){return!!e})()}var _i=function(e){function t(e){var n;o()(this,t),n=Vi(this,t,[e]),m()(n,"openConversation",(function(e){var t=(n.messengerProps||{}).openConversation;t&&t(e)})),m()(n,"openSearch",(function(e){var t=(n.messengerProps||{}).openSearch;t&&t(e)})),m()(n,"openCobrowseConnect",(function(e){var t=(n.messengerProps||{}).openCobrowseConnect;t&&t(e)})),m()(n,"openCobrowseSharing",(function(e){var t=(n.messengerProps||{}).openCobrowseSharing;t&&t(e)})),m()(n,"onCobrowseVoiceSessionStart",(function(){var e=(n.messengerProps||{}).onCobrowseVoiceSessionStart;e&&e()})),m()(n,"onCobrowseVoiceSessionEnd",(function(){var e=(n.messengerProps||{}).onCobrowseVoiceSessionEnd;e&&e()}));var r=e.store;return n.messengerProps="",r&&Object.keys(r).length?n.store=Ge({conversationStore:r.conversationStore||void 0}):n.store=Ge(),n}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.props.getComponentMethods(this)}},{key:"componentWillUnmount",value:function(){this.props.getComponentMethods(null)}},{key:"render",value:function(){var e=this;return h.a.createElement(E,{store:this.store},h.a.createElement(qi,{open:this.props.open,activePreviousConversation:this.props.activePreviousConversation,previousConversationExpired:this.props.previousConversationExpired,previousConversationCleared:this.props.previousConversationCleared,fResetConversationCleared:this.props.fResetConversationCleared,messengerClosed:this.props.messengerClosed,closeMessenger:this.props.closeMessenger,fabVisible:this.props.fabVisible,color:this.props.color,config:this.props.config,setClick:this.props.setClick,convPluginRef:this.props.convPluginRef,setConvPluginRef:this.props.setConvPluginRef,data:this.props.data,fStore:this.props.fStore,store:this.props.store,Toaster:this.props.Toaster,oLauncher:this.props.oLauncher,oMessenger:this.props.oMessenger,launcherRef:this.props.launcherRef,getComponentMethods:function(t){return e.messengerProps=t},sOSBrowser:this.props.sOSBrowser,cobrowseActiveSession:this.props.cobrowseActiveSession}))}}])}(h.a.Component);_i.propTypes={open:v.a.bool.isRequired,activePreviousConversation:v.a.bool.isRequired,previousConversationExpired:v.a.bool,fabVisible:v.a.bool.isRequired,color:v.a.string.isRequired,config:v.a.object,setClick:v.a.func.isRequired,convPluginRef:v.a.object,setConvPluginRef:v.a.func.isRequired,data:v.a.object,fStore:v.a.func.isRequired,store:v.a.object,oLauncher:v.a.object,oMessenger:v.a.object,launcherRef:v.a.object,getComponentMethods:v.a.func.isRequired};t.default=_i}}]);